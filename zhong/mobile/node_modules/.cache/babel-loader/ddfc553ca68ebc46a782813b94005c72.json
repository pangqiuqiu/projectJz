{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _ImageContainer = require('./ImageContainer');\n\nvar _ImageContainer2 = _interopRequireDefault(_ImageContainer);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n} // 快速拖动时间限制\n\n\nvar DEFAULT_TIME_DIFF = 200;\n\nvar ListContainer = function (_PureComponent) {\n  _inherits(ListContainer, _PureComponent);\n\n  function ListContainer() {\n    _classCallCheck(this, ListContainer);\n\n    var _this = _possibleConstructorReturn(this, (ListContainer.__proto__ || Object.getPrototypeOf(ListContainer)).call(this));\n\n    _this.state = {\n      left: 0\n    };\n\n    _this.easing = function (distance) {\n      var t = distance;\n      var b = 0;\n      var d = _this.props.screenWidth; // 允许拖拽的最大距离\n\n      var c = d / 2.5; // 提示标签最大有效拖拽距离\n\n      return c * Math.sin(t / d * (Math.PI / 2)) + b;\n    };\n\n    _this.handleStart = function () {\n      // console.info(\"ListContainer handleStart\")\n      _this.startLeft = _this.state.left;\n      _this.startTime = new Date().getTime();\n      _this.isNeedSpring = false;\n    };\n\n    _this.handleMove = function (diffX) {\n      // console.info(\"ListContainer handleStart diffX = %s\",diffX);\n      var nDiffx = diffX; // 限制最大 diffx 值\n\n      if (Math.abs(nDiffx) > _this.props.screenWidth) {\n        if (nDiffx < 0) {\n          nDiffx = -_this.props.screenWidth;\n        }\n\n        if (nDiffx > 0) {\n          nDiffx = _this.props.screenWidth;\n        }\n      }\n\n      if (_this.state.left >= 0 && nDiffx > 0) {\n        nDiffx = _this.easing(nDiffx);\n      } else if (_this.state.left <= -_this.maxLeft && nDiffx < 0) {\n        nDiffx = -_this.easing(-nDiffx);\n      }\n\n      _this.setState({\n        left: _this.startLeft + nDiffx\n      });\n    };\n\n    _this.handleEnd = function (isAllowChange) {\n      var index = void 0;\n\n      var diffTime = new Date().getTime() - _this.startTime;\n\n      console.info('handleEnd %s', isAllowChange, diffTime, _this.state.left, _this.startLeft, _this.props.index); // 快速拖动情况下切换图片\n\n      if (isAllowChange && diffTime < DEFAULT_TIME_DIFF) {\n        if (_this.state.left < _this.startLeft) {\n          index = _this.props.index + 1;\n        } else {\n          index = _this.props.index - 1;\n        }\n      } else {\n        index = Math.abs(Math.round(_this.state.left / _this.perDistance));\n      } // 处理边界情况\n\n\n      if (index < 0) {\n        index = 0;\n      } else if (index > _this.length - 1) {\n        index = _this.length - 1;\n      }\n\n      _this.setState({\n        left: -_this.perDistance * index\n      });\n\n      _this.isNeedSpring = true;\n\n      if (index !== _this.props.index) {\n        _this.props.changeIndex(index);\n\n        return true;\n      }\n\n      return false;\n    };\n\n    _this.isNeedSpring = false;\n    return _this;\n  }\n\n  _createClass(ListContainer, [{\n    key: 'componentWillMount',\n    value: function componentWillMount() {\n      var _props = this.props,\n          screenWidth = _props.screenWidth,\n          urls = _props.urls,\n          index = _props.index,\n          gap = _props.gap;\n      this.length = urls.length;\n      this.perDistance = screenWidth + gap;\n      this.maxLeft = this.perDistance * (this.length - 1);\n      this.isNeedSpring = false;\n      this.setState({\n        left: -this.perDistance * index\n      });\n    }\n  }, {\n    key: 'componentWillReceiveProps',\n    value: function componentWillReceiveProps(nextProps) {\n      if (this.props.index !== nextProps.index) {\n        this.isNeedSpring = true;\n        this.setState({\n          left: -this.perDistance * nextProps.index\n        });\n      }\n    }\n    /**\n     * 拖拽的缓动公式 - easeOutSine\n     * Link http://easings.net/zh-cn#\n     * t: current time（当前时间）；\n     * b: beginning value（初始值）；\n     * c: change in value（变化量）；\n     * d: duration（持续时间）。\n     */\n\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this2 = this;\n\n      var _props2 = this.props,\n          maxZoomNum = _props2.maxZoomNum,\n          screenWidth = _props2.screenWidth,\n          screenHeight = _props2.screenHeight,\n          urls = _props2.urls,\n          speed = _props2.speed;\n      var left = this.state.left;\n      var defaultStyle = {};\n\n      if (this.isNeedSpring) {\n        var duration = speed + 'ms';\n        defaultStyle.WebkitTransitionDuration = duration;\n        defaultStyle.transitionDuration = duration;\n      }\n\n      var translate = 'translate3d(' + left + 'px, 0, 0)';\n      defaultStyle.WebkitTransform = translate;\n      defaultStyle.transform = translate;\n      return _react2.default.createElement('div', {\n        className: 'viewer-list-container',\n        style: defaultStyle\n      }, urls.map(function (item, i) {\n        return _react2.default.createElement(_ImageContainer2.default, {\n          key: i // eslint-disable-line\n          ,\n          src: item,\n          maxZoomNum: maxZoomNum,\n          handleStart: _this2.handleStart,\n          handleMove: _this2.handleMove,\n          handleEnd: _this2.handleEnd,\n          left: _this2.perDistance * i,\n          screenWidth: screenWidth,\n          screenHeight: screenHeight\n        });\n      }));\n    }\n  }]);\n\n  return ListContainer;\n}(_react.PureComponent);\n\nListContainer.propTypes = {\n  maxZoomNum: _propTypes2.default.number.isRequired,\n  changeIndex: _propTypes2.default.func.isRequired,\n  gap: _propTypes2.default.number.isRequired,\n  speed: _propTypes2.default.number.isRequired // Duration of transition between slides (in ms)\n\n};\nexports.default = ListContainer;","map":{"version":3,"sources":["D:/myCompany/zhongdianqiche/mobile/node_modules/react-wx-images-viewer/dist/components/ListContainer.js"],"names":["Object","defineProperty","exports","value","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","key","Constructor","protoProps","staticProps","prototype","_react","require","_react2","_interopRequireDefault","_propTypes","_propTypes2","_ImageContainer","_ImageContainer2","obj","__esModule","default","_classCallCheck","instance","TypeError","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","create","constructor","setPrototypeOf","__proto__","DEFAULT_TIME_DIFF","ListContainer","_PureComponent","_this","getPrototypeOf","state","left","easing","distance","t","b","d","screenWidth","c","Math","sin","PI","handleStart","startLeft","startTime","Date","getTime","isNeedSpring","handleMove","diffX","nDiffx","abs","maxLeft","setState","handleEnd","isAllowChange","index","diffTime","console","info","round","perDistance","changeIndex","componentWillMount","_props","urls","gap","componentWillReceiveProps","nextProps","render","_this2","_props2","maxZoomNum","screenHeight","speed","defaultStyle","duration","WebkitTransitionDuration","transitionDuration","translate","WebkitTransform","transform","createElement","className","style","map","item","src","PureComponent","propTypes","number","isRequired","func"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _ImageContainer = require('./ImageContainer');\n\nvar _ImageContainer2 = _interopRequireDefault(_ImageContainer);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n// 快速拖动时间限制\nvar DEFAULT_TIME_DIFF = 200;\n\nvar ListContainer = function (_PureComponent) {\n  _inherits(ListContainer, _PureComponent);\n\n  function ListContainer() {\n    _classCallCheck(this, ListContainer);\n\n    var _this = _possibleConstructorReturn(this, (ListContainer.__proto__ || Object.getPrototypeOf(ListContainer)).call(this));\n\n    _this.state = {\n      left: 0\n    };\n\n    _this.easing = function (distance) {\n      var t = distance;\n      var b = 0;\n      var d = _this.props.screenWidth; // 允许拖拽的最大距离\n      var c = d / 2.5; // 提示标签最大有效拖拽距离\n\n      return c * Math.sin(t / d * (Math.PI / 2)) + b;\n    };\n\n    _this.handleStart = function () {\n      // console.info(\"ListContainer handleStart\")\n      _this.startLeft = _this.state.left;\n      _this.startTime = new Date().getTime();\n      _this.isNeedSpring = false;\n    };\n\n    _this.handleMove = function (diffX) {\n      // console.info(\"ListContainer handleStart diffX = %s\",diffX);\n      var nDiffx = diffX;\n      // 限制最大 diffx 值\n      if (Math.abs(nDiffx) > _this.props.screenWidth) {\n        if (nDiffx < 0) {\n          nDiffx = -_this.props.screenWidth;\n        }\n        if (nDiffx > 0) {\n          nDiffx = _this.props.screenWidth;\n        }\n      }\n\n      if (_this.state.left >= 0 && nDiffx > 0) {\n        nDiffx = _this.easing(nDiffx);\n      } else if (_this.state.left <= -_this.maxLeft && nDiffx < 0) {\n        nDiffx = -_this.easing(-nDiffx);\n      }\n\n      _this.setState({\n        left: _this.startLeft + nDiffx\n      });\n    };\n\n    _this.handleEnd = function (isAllowChange) {\n      var index = void 0;\n      var diffTime = new Date().getTime() - _this.startTime;\n      console.info('handleEnd %s', isAllowChange, diffTime, _this.state.left, _this.startLeft, _this.props.index);\n      // 快速拖动情况下切换图片\n      if (isAllowChange && diffTime < DEFAULT_TIME_DIFF) {\n        if (_this.state.left < _this.startLeft) {\n          index = _this.props.index + 1;\n        } else {\n          index = _this.props.index - 1;\n        }\n      } else {\n        index = Math.abs(Math.round(_this.state.left / _this.perDistance));\n      }\n\n      // 处理边界情况\n      if (index < 0) {\n        index = 0;\n      } else if (index > _this.length - 1) {\n        index = _this.length - 1;\n      }\n\n      _this.setState({\n        left: -_this.perDistance * index\n      });\n      _this.isNeedSpring = true;\n      if (index !== _this.props.index) {\n        _this.props.changeIndex(index);\n        return true;\n      }\n      return false;\n    };\n\n    _this.isNeedSpring = false;\n    return _this;\n  }\n\n  _createClass(ListContainer, [{\n    key: 'componentWillMount',\n    value: function componentWillMount() {\n      var _props = this.props,\n          screenWidth = _props.screenWidth,\n          urls = _props.urls,\n          index = _props.index,\n          gap = _props.gap;\n\n\n      this.length = urls.length;\n      this.perDistance = screenWidth + gap;\n      this.maxLeft = this.perDistance * (this.length - 1);\n      this.isNeedSpring = false;\n\n      this.setState({\n        left: -this.perDistance * index\n      });\n    }\n  }, {\n    key: 'componentWillReceiveProps',\n    value: function componentWillReceiveProps(nextProps) {\n      if (this.props.index !== nextProps.index) {\n        this.isNeedSpring = true;\n        this.setState({\n          left: -this.perDistance * nextProps.index\n        });\n      }\n    }\n\n    /**\n     * 拖拽的缓动公式 - easeOutSine\n     * Link http://easings.net/zh-cn#\n     * t: current time（当前时间）；\n     * b: beginning value（初始值）；\n     * c: change in value（变化量）；\n     * d: duration（持续时间）。\n     */\n\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this2 = this;\n\n      var _props2 = this.props,\n          maxZoomNum = _props2.maxZoomNum,\n          screenWidth = _props2.screenWidth,\n          screenHeight = _props2.screenHeight,\n          urls = _props2.urls,\n          speed = _props2.speed;\n      var left = this.state.left;\n\n\n      var defaultStyle = {};\n\n      if (this.isNeedSpring) {\n        var duration = speed + 'ms';\n        defaultStyle.WebkitTransitionDuration = duration;\n        defaultStyle.transitionDuration = duration;\n      }\n      var translate = 'translate3d(' + left + 'px, 0, 0)';\n      defaultStyle.WebkitTransform = translate;\n      defaultStyle.transform = translate;\n\n      return _react2.default.createElement(\n        'div',\n        {\n          className: 'viewer-list-container',\n          style: defaultStyle\n        },\n        urls.map(function (item, i) {\n          return _react2.default.createElement(_ImageContainer2.default, {\n            key: i // eslint-disable-line\n            , src: item,\n            maxZoomNum: maxZoomNum,\n            handleStart: _this2.handleStart,\n            handleMove: _this2.handleMove,\n            handleEnd: _this2.handleEnd,\n            left: _this2.perDistance * i,\n            screenWidth: screenWidth,\n            screenHeight: screenHeight\n          });\n        })\n      );\n    }\n  }]);\n\n  return ListContainer;\n}(_react.PureComponent);\n\nListContainer.propTypes = {\n  maxZoomNum: _propTypes2.default.number.isRequired,\n  changeIndex: _propTypes2.default.func.isRequired,\n  gap: _propTypes2.default.number.isRequired,\n  speed: _propTypes2.default.number.isRequired // Duration of transition between slides (in ms)\n};\nexports.default = ListContainer;"]},"metadata":{},"sourceType":"script"}