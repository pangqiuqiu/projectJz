{"ast":null,"code":"import _regeneratorRuntime from\"D:\\\\myCompany\\\\zhongdianqiche\\\\mobile\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import\"antd-mobile/lib/toast/style/css\";import _Toast from\"antd-mobile/lib/toast\";import _objectSpread from\"D:\\\\myCompany\\\\zhongdianqiche\\\\mobile\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"D:\\\\myCompany\\\\zhongdianqiche\\\\mobile\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import React,{useEffect}from'react';import axios from'../../../untils/axios';import{wexinPay}from'../../../untils/wx';import{useHistory}from'react-router-dom';var Pay=function Pay(props){var u=JSON.parse(props.match.params.u);var history=useHistory();var getPay=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _yield$axios$post,res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.post('/gather/addSign',_objectSpread(_objectSpread({},u),{},{code:window.location.href,gatherId:u.id}));case 2:_yield$axios$post=_context.sent;res=_yield$axios$post.data;wexinPay({appId:res.appId,nonceStr:res.nonceStr,package:res.package,paySign:res.paySign,signType:res.signType,timeStamp:res.timeStamp},function(){_Toast.fail('支付成功',2);history.goBack();});case 5:case\"end\":return _context.stop();}}},_callee);}));return function getPay(){return _ref.apply(this,arguments);};}();useEffect(function(){getPay();},[]);return/*#__PURE__*/React.createElement(React.Fragment,null);};export default Pay;","map":{"version":3,"sources":["D:/myCompany/zhongdianqiche/mobile/src/views/Activity/Pay/index.js"],"names":["React","useEffect","axios","wexinPay","useHistory","Pay","props","u","JSON","parse","match","params","history","getPay","post","code","window","location","href","gatherId","id","res","data","appId","nonceStr","package","paySign","signType","timeStamp","fail","goBack"],"mappings":"+bAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,MAAOC,CAAAA,KAAP,KAAkB,uBAAlB,CAEA,OAASC,QAAT,KAAyB,oBAAzB,CACA,OAASC,UAAT,KAA2B,kBAA3B,CAEA,GAAMC,CAAAA,GAAG,CAAG,QAANA,CAAAA,GAAM,CAACC,KAAD,CAAW,CACrB,GAAMC,CAAAA,CAAC,CAAGC,IAAI,CAACC,KAAL,CAAWH,KAAK,CAACI,KAAN,CAAYC,MAAZ,CAAmBJ,CAA9B,CAAV,CACA,GAAMK,CAAAA,OAAO,CAAGR,UAAU,EAA1B,CACA,GAAMS,CAAAA,MAAM,0FAAG,mLACeX,CAAAA,KAAK,CAACY,IAAN,CAAW,iBAAX,gCAAmCP,CAAnC,MAAsCQ,IAAI,CAAEC,MAAM,CAACC,QAAP,CAAgBC,IAA5D,CAAkEC,QAAQ,CAAEZ,CAAC,CAACa,EAA9E,GADf,wCACCC,GADD,mBACLC,IADK,CAEbnB,QAAQ,CACN,CACEoB,KAAK,CAAEF,GAAG,CAACE,KADb,CAEEC,QAAQ,CAAEH,GAAG,CAACG,QAFhB,CAGEC,OAAO,CAAEJ,GAAG,CAACI,OAHf,CAIEC,OAAO,CAAEL,GAAG,CAACK,OAJf,CAKEC,QAAQ,CAAEN,GAAG,CAACM,QALhB,CAMEC,SAAS,CAAEP,GAAG,CAACO,SANjB,CADM,CASN,UAAM,CACJ,OAAMC,IAAN,CAAW,MAAX,CAAmB,CAAnB,EACAjB,OAAO,CAACkB,MAAR,GACD,CAZK,CAAR,CAFa,sDAAH,kBAANjB,CAAAA,MAAM,0CAAZ,CAiBAZ,SAAS,CAAC,UAAM,CACdY,MAAM,GACP,CAFQ,CAEN,EAFM,CAAT,CAGA,mBACE,wCADF,CAGD,CA1BD,CA4BA,cAAeR,CAAAA,GAAf","sourcesContent":["import React, { useEffect } from 'react'\r\nimport axios from '../../../untils/axios'\r\nimport { Toast } from 'antd-mobile'\r\nimport { wexinPay } from '../../../untils/wx'\r\nimport { useHistory } from 'react-router-dom'\r\n\r\nconst Pay = (props) => {\r\n  const u = JSON.parse(props.match.params.u)\r\n  const history = useHistory()\r\n  const getPay = async () => {\r\n    const { data: res } = await axios.post('/gather/addSign', { ...u, code: window.location.href, gatherId: u.id })\r\n    wexinPay(\r\n      {\r\n        appId: res.appId,\r\n        nonceStr: res.nonceStr,\r\n        package: res.package,\r\n        paySign: res.paySign,\r\n        signType: res.signType,\r\n        timeStamp: res.timeStamp\r\n      },\r\n      () => {\r\n        Toast.fail('支付成功', 2)\r\n        history.goBack()\r\n      }\r\n    )\r\n  }\r\n  useEffect(() => {\r\n    getPay()\r\n  }, [])\r\n  return (\r\n    <></>\r\n  )\r\n}\r\n\r\nexport default Pay\r\n"]},"metadata":{},"sourceType":"module"}