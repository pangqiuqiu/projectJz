{"ast":null,"code":"import _regeneratorRuntime from\"D:\\\\myCompany\\\\zhongdianqiche\\\\mobile\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"D:\\\\myCompany\\\\zhongdianqiche\\\\mobile\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"D:\\\\myCompany\\\\zhongdianqiche\\\\mobile\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"D:\\\\myCompany\\\\zhongdianqiche\\\\mobile\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"D:\\\\myCompany\\\\zhongdianqiche\\\\mobile\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"D:\\\\myCompany\\\\zhongdianqiche\\\\mobile\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from'react';// 样式\nimport styles from'./index.module.css';// axios\nimport axios from'../../../untils/axios';var Library=/*#__PURE__*/function(_React$Component){_inherits(Library,_React$Component);var _super=_createSuper(Library);function Library(props){var _this;_classCallCheck(this,Library);_this=_super.call(this,props);_this.scrollFun=function(){var lessThan=[];// console.log(document.documentElement.scrollTop)\n_this.state.scrollBrand.forEach(function(item,index){if(item.getBoundingClientRect().top<0){lessThan.push(index);}});_this.setState({activeIndex:lessThan[lessThan.length-1]});};_this.state={// 猜你喜欢\nhobbyList:[],// 品牌列表\nbrandList:[],// 索引列表\nindexList:[],// 每个字母的品牌数组\nscrollBrand:[],// 高亮索引\nactiveIndex:0};return _this;}_createClass(Library,[{key:\"componentDidMount\",value:function componentDidMount(){// 获取猜你喜欢列表\nthis.getHobbyList();// 获取品牌列表\nthis.getBrandList();// 监听滚动事件\nwindow.addEventListener('scroll',this.scrollFun);}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){window.removeEventListener('scroll',this.scrollFun);}// 获取猜你喜欢列表\n},{key:\"getHobbyList\",value:function(){var _getHobbyList=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _yield$axios$post,res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.post('/car/xiu');case 2:_yield$axios$post=_context.sent;res=_yield$axios$post.data;this.setState({hobbyList:res});case 5:case\"end\":return _context.stop();}}},_callee,this);}));function getHobbyList(){return _getHobbyList.apply(this,arguments);}return getHobbyList;}()// 获取品牌列表\n},{key:\"getBrandList\",value:function(){var _getBrandList=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var _this2=this;var _yield$axios$post2,res,indexList;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return axios.post('/car/brandSeriesCe');case 2:_yield$axios$post2=_context2.sent;res=_yield$axios$post2.data;indexList=[];this.setState({brandList:res},function(){res.map(function(value){indexList.push(value.label);});_this2.setState({indexList:indexList});});case 6:case\"end\":return _context2.stop();}}},_callee2,this);}));function getBrandList(){return _getBrandList.apply(this,arguments);}return getBrandList;}()// 点击索引列表事件\n},{key:\"scroll\",value:function scroll(index){this.setState({activeIndex:index});document.documentElement.scrollTop=this.state.scrollBrand[index].offsetTop+1;document.body.scrollTop=this.state.scrollBrand[index].offsetTop+1;}// 滚动事件\n},{key:\"render\",value:function render(){var _this3=this;return/*#__PURE__*/React.createElement(\"div\",{style:{paddingBottom:'30px',top:0},className:styles.all,ref:\"all\"},/*#__PURE__*/React.createElement(\"header\",{style:{backgroundColor:'#fff',padding:'15px 15px 0 15px'}},/*#__PURE__*/React.createElement(\"h2\",{style:{marginBottom:'20px',fontWeight:'400'}},\"\\u731C\\u4F60\\u559C\\u6B22\"),/*#__PURE__*/React.createElement(\"ul\",{className:styles.hobbyList},this.state.hobbyList.map(function(item,index){return/*#__PURE__*/React.createElement(\"li\",{key:index,onClick:function onClick(){return _this3.props.history.push(\"/serieslist/seriesdetails?id=\".concat(item.series));}},/*#__PURE__*/React.createElement(\"img\",{style:{width:'70px'},alt:\"\",src:item.carPic}),/*#__PURE__*/React.createElement(\"div\",{style:{width:'70px',whiteSpace:'nowrap',overflow:'hidden',textOverflow:'ellipsis',fontSize:'12px'}},item.series));}))),/*#__PURE__*/React.createElement(\"ul\",{className:styles.indexlist},this.state.indexList.map(function(item,index){return/*#__PURE__*/React.createElement(\"li\",{style:_this3.state.activeIndex===index?{backgroundColor:'#4D8FFF'}:{},onClick:_this3.scroll.bind(_this3,index),className:styles.indexItem,key:item},item);})),/*#__PURE__*/React.createElement(\"ul\",{ref:\"brandAll\",id:\"brandAll\",className:styles.brandAll},this.state.brandList.map(function(item,i){return/*#__PURE__*/React.createElement(\"li\",{className:\"li-item\",key:item.label,ref:function ref(a){_this3.state.scrollBrand[i]=a;}},/*#__PURE__*/React.createElement(\"h2\",{style:{height:'30px',lineHeight:'30px',paddingLeft:'10px',fontWeight:'400'}},item.label),/*#__PURE__*/React.createElement(\"div\",{style:{backgroundColor:'#fff',paddingLeft:'10px'}},item.children.map(function(items){return/*#__PURE__*/React.createElement(\"div\",{onClick:function onClick(){return _this3.props.history.push(\"/library/serieslist?id=\".concat(items));},className:styles.items,key:items},/*#__PURE__*/React.createElement(\"img\",{src:\"https://tupiancar.oss-cn-zhangjiakou.aliyuncs.com/\".concat(items,\".png\"),alt:\"\"}),/*#__PURE__*/React.createElement(\"div\",null,items));})));})));}}]);return Library;}(React.Component);export{Library as default};","map":null,"metadata":{},"sourceType":"module"}