{"ast":null,"code":"import _regeneratorRuntime from\"D:\\\\myCompany\\\\zhongdianqiche\\\\mobile\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _toConsumableArray from\"D:\\\\myCompany\\\\zhongdianqiche\\\\mobile\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _asyncToGenerator from\"D:\\\\myCompany\\\\zhongdianqiche\\\\mobile\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"D:\\\\myCompany\\\\zhongdianqiche\\\\mobile\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"D:\\\\myCompany\\\\zhongdianqiche\\\\mobile\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"D:\\\\myCompany\\\\zhongdianqiche\\\\mobile\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"D:\\\\myCompany\\\\zhongdianqiche\\\\mobile\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from'react';// axios\nimport axios from'../../../untils/axios';// 样式\nimport styles from'./index.module.css';import'./index.css';var tabs=['大咖评车','用车宝典','技术解读','玩车行家','行业分析','自驾旅行','新能源车','热点聚焦','汽车文化','车展'];var Program=/*#__PURE__*/function(_React$Component){_inherits(Program,_React$Component);var _super=_createSuper(Program);function Program(props){var _this;_classCallCheck(this,Program);_this=_super.call(this,props);_this.handle=function(type,id){if(type==='重点号资讯'){_this.props.history.push(\"/infor_details?id=\".concat(id));}else{_this.props.history.push(\"/video_details?id=\".concat(id));}};_this.state={windowHeight:0,label:sessionStorage.getItem('label')||'大咖评车',page:0,currentIndex:JSON.parse(sessionStorage.getItem('index'))||0,list:[]// 处理后的数据\n};return _this;}_createClass(Program,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;if(window.innerHeight>650){this.setState({windowHeight:1});}// 获取数据列表\nthis.getList();// 监听滚动事件\nwindow.onscroll=function(){var winHeight=Math.ceil(window.scrollY+window.innerHeight);if(winHeight>=document.body.scrollHeight-50){setTimeout(function(){_this2.setState({page:_this2.state.page+1},/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _yield$axios$post,res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.post('/keyN/lm',{label:_this2.state.label,pageNo:_this2.state.page,pageSize:2});case 2:_yield$axios$post=_context.sent;res=_yield$axios$post.data;_this2.setState({list:[].concat(_toConsumableArray(_this2.state.list),_toConsumableArray(res))});case 5:case\"end\":return _context.stop();}}},_callee);})));},1000);}};}// 获取列表信息\n},{key:\"getList\",value:function(){var _getList=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var _yield$axios$post2,res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return axios.post('/keyN/lm',{label:this.state.label,pageNo:this.state.page,pageSize:14});case 2:_yield$axios$post2=_context2.sent;res=_yield$axios$post2.data;this.setState({list:res});case 5:case\"end\":return _context2.stop();}}},_callee2,this);}));function getList(){return _getList.apply(this,arguments);}return getList;}()// 切换左侧tab栏\n},{key:\"changeTabItem\",value:function changeTabItem(item,index){var _this3=this;sessionStorage.setItem('label',item);sessionStorage.setItem('index',JSON.stringify(index));this.setState({currentIndex:index,label:item,page:0},function(){_this3.getList();});}// 跳转\n},{key:\"render\",value:function render(){var _this4=this;return/*#__PURE__*/React.createElement(\"div\",{className:styles.contain,style:{paddingBottom:'34px'}},/*#__PURE__*/React.createElement(\"aside\",{className:styles.aside},tabs.map(function(item,index){return/*#__PURE__*/React.createElement(\"div\",{onClick:function onClick(){_this4.changeTabItem(item,index);},className:_this4.state.windowHeight===0?'demo':'demo1',style:_this4.state.currentIndex===index?{backgroundColor:'#fff'}:{},key:item},item);})),/*#__PURE__*/React.createElement(\"ul\",{className:styles.main},this.state.list.map(function(item,index){return/*#__PURE__*/React.createElement(\"li\",{key:index,onClick:function onClick(){_this4.handle(item.type,item.id);}},/*#__PURE__*/React.createElement(\"img\",{alt:\"\",style:{marginRight:'15px',width:'100px',height:'100%'},src:item.object.coverPic}),/*#__PURE__*/React.createElement(\"div\",{className:styles.title,style:{width:'100%'}},/*#__PURE__*/React.createElement(\"div\",{className:styles.one},item.title),/*#__PURE__*/React.createElement(\"div\",{className:styles.two},item.key.name)));})));}}]);return Program;}(React.Component);export default Program;","map":null,"metadata":{},"sourceType":"module"}