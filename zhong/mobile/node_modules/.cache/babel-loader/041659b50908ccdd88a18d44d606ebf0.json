{"ast":null,"code":"var _jsxFileName = \"D:\\\\myCompany\\\\zhongdianqiche\\\\mobile\\\\src\\\\views\\\\Manage\\\\Customer\\\\index.js\";\nimport React, { useState, useEffect } from 'react';\n\nconst ManageCustomer = () => {\n  const [list, setList] = useState([]);\n  const [time, setTime] = useState(0);\n  const [isMore, setIsMore] = useState(true);\n  const [formAlign, setFormAlign] = useState({\n    pageSize: 10,\n    pageNo: 1\n  });\n  useEffect(() => {\n    window.addEventListener('scroll', handleScroll);\n    return () => {\n      window.removeEventListener('scroll', handleScroll);\n    };\n  }, [formAlign.pageNo]);\n  useEffect(() => {\n    getLists();\n  }, [formAlign.pageNo]); // 滚动条事件监听\n\n  const handleScroll = async () => {\n    const s = window.pageYOffset; // 滚动条距离\n\n    const h = document.body.scrollHeight; // 页面整体高度\n\n    const l = document.body.offsetHeight; // 屏幕高度 document.body.clientHeight\n\n    if (h - s - l < 100 && (time === 0 || Date.parse(new Date()) - time > 500) && isMore) {\n      setTime(Date.parse(new Date()));\n      console.log('即将触底');\n      setFormAlign({\n        pageSize: 10,\n        pageNo: formAlign.pageNo++\n      });\n      getLists();\n    }\n  };\n\n  const getLists = () => {\n    setList([...list, ...[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1]]);\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"ul\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 7\n    }\n  }, list.map((item, k) => {\n    return /*#__PURE__*/React.createElement(\"li\", {\n      key: k,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 20\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      style: {\n        fontSize: '100px'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 15\n      }\n    }, item));\n  })), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => console.log(formAlign),\n    style: {\n      position: 'fixed',\n      top: 0\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 7\n    }\n  }));\n};\n\nexport default ManageCustomer;","map":{"version":3,"sources":["D:/myCompany/zhongdianqiche/mobile/src/views/Manage/Customer/index.js"],"names":["React","useState","useEffect","ManageCustomer","list","setList","time","setTime","isMore","setIsMore","formAlign","setFormAlign","pageSize","pageNo","window","addEventListener","handleScroll","removeEventListener","getLists","s","pageYOffset","h","document","body","scrollHeight","l","offsetHeight","Date","parse","console","log","map","item","k","fontSize","position","top"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\r\n\r\nconst ManageCustomer = () => {\r\n  const [list, setList] = useState([])\r\n  const [time, setTime] = useState(0)\r\n  const [isMore, setIsMore] = useState(true)\r\n  const [formAlign, setFormAlign] = useState({\r\n    pageSize: 10,\r\n    pageNo: 1\r\n  })\r\n  useEffect(() => {\r\n    window.addEventListener('scroll', handleScroll)\r\n    return () => {\r\n      window.removeEventListener('scroll', handleScroll)\r\n    }\r\n  }, [formAlign.pageNo])\r\n  useEffect(() => {\r\n    getLists()\r\n  }, [formAlign.pageNo])\r\n  // 滚动条事件监听\r\n  const handleScroll = async () => {\r\n    const s = window.pageYOffset // 滚动条距离\r\n    const h = document.body.scrollHeight // 页面整体高度\r\n    const l = document.body.offsetHeight // 屏幕高度 document.body.clientHeight\r\n    if (h - s - l < 100 && (time === 0 || Date.parse(new Date()) - time > 500) && isMore) {\r\n      setTime(Date.parse(new Date()))\r\n      console.log('即将触底')\r\n      setFormAlign({pageSize: 10, pageNo: formAlign.pageNo++})\r\n      getLists()\r\n    }\r\n  }\r\n  const getLists = () => {\r\n    setList([...list, ...[1,1,1,1,1,1,1,1,1,1,1,1,1,1]])\r\n  }\r\n  return (\r\n    <div>\r\n      <ul>\r\n        {\r\n          list.map((item, k) => {\r\n            return <li key={k}>\r\n              <h1 style={{fontSize: '100px'}}>{item}</h1>\r\n            </li>\r\n          })\r\n        }\r\n      </ul>\r\n      <button onClick={() => console.log(formAlign)} style={{position: 'fixed', top: 0}}></button>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default ManageCustomer"]},"metadata":{},"sourceType":"module"}