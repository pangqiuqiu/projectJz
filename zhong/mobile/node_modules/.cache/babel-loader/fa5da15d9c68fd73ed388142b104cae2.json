{"ast":null,"code":"import _toConsumableArray from\"D:\\\\myCompany\\\\zhongdianqiche\\\\mobile\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _regeneratorRuntime from\"D:\\\\myCompany\\\\zhongdianqiche\\\\mobile\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"D:\\\\myCompany\\\\zhongdianqiche\\\\mobile\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:\\\\myCompany\\\\zhongdianqiche\\\\mobile\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';var ManageCustomer=function ManageCustomer(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),list=_useState2[0],setList=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),time=_useState4[0],setTime=_useState4[1];var _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),isMore=_useState6[0],setIsMore=_useState6[1];var _useState7=useState({pageSize:10,pageNo:1}),_useState8=_slicedToArray(_useState7,2),formAlign=_useState8[0],setFormAlign=_useState8[1];useEffect(function(){getLists();window.addEventListener('scroll',handleScroll);return function(){window.removeEventListener('scroll',handleScroll);};},[formAlign.pageNo]);// 滚动条事件监听\nvar handleScroll=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(document.body.scrollHeight-window.pageYOffset-document.body.offsetHeight<100&&(time===0||Date.parse(new Date())-time>500)&&isMore){setTime(Date.parse(new Date()));setFormAlign({pageSize:10,pageNo:formAlign.pageNo++});getLists();}case 1:case\"end\":return _context.stop();}}},_callee);}));return function handleScroll(){return _ref.apply(this,arguments);};}();// 获取数据列表\nvar getLists=function getLists(){setList([].concat(_toConsumableArray(list),[1,1,1,1,1,1,1,1,1,1,1,1,1,1]));};return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"ul\",null,list.map(function(item,k){return/*#__PURE__*/React.createElement(\"li\",{key:k},/*#__PURE__*/React.createElement(\"h1\",{style:{fontSize:'100px'}},item));})),/*#__PURE__*/React.createElement(\"button\",{onClick:function onClick(){return console.log(formAlign);},style:{position:'fixed',top:0}}));};export default ManageCustomer;","map":{"version":3,"sources":["D:/myCompany/zhongdianqiche/mobile/src/views/Manage/Customer/index.js"],"names":["React","useState","useEffect","ManageCustomer","list","setList","time","setTime","isMore","setIsMore","pageSize","pageNo","formAlign","setFormAlign","getLists","window","addEventListener","handleScroll","removeEventListener","document","body","scrollHeight","pageYOffset","offsetHeight","Date","parse","map","item","k","fontSize","console","log","position","top"],"mappings":"ifAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CAEA,GAAMC,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,EAAM,eACHF,QAAQ,CAAC,EAAD,CADL,wCACpBG,IADoB,eACdC,OADc,8BAEHJ,QAAQ,CAAC,CAAD,CAFL,yCAEpBK,IAFoB,eAEdC,OAFc,8BAGCN,QAAQ,CAAC,IAAD,CAHT,yCAGpBO,MAHoB,eAGZC,SAHY,8BAIOR,QAAQ,CAAC,CACzCS,QAAQ,CAAE,EAD+B,CAEzCC,MAAM,CAAE,CAFiC,CAAD,CAJf,yCAIpBC,SAJoB,eAITC,YAJS,eAQ3BX,SAAS,CAAC,UAAM,CACdY,QAAQ,GACRC,MAAM,CAACC,gBAAP,CAAwB,QAAxB,CAAkCC,YAAlC,EACA,MAAO,WAAM,CACXF,MAAM,CAACG,mBAAP,CAA2B,QAA3B,CAAqCD,YAArC,EACD,CAFD,CAGD,CANQ,CAMN,CAACL,SAAS,CAACD,MAAX,CANM,CAAT,CAOA;AACA,GAAMM,CAAAA,YAAY,0FAAG,mIACnB,GAAIE,QAAQ,CAACC,IAAT,CAAcC,YAAd,CAA6BN,MAAM,CAACO,WAApC,CAAkDH,QAAQ,CAACC,IAAT,CAAcG,YAAhE,CAA+E,GAA/E,GAAuFjB,IAAI,GAAK,CAAT,EAAckB,IAAI,CAACC,KAAL,CAAW,GAAID,CAAAA,IAAJ,EAAX,EAAyBlB,IAAzB,CAAgC,GAArI,GAA6IE,MAAjJ,CAAyJ,CACvJD,OAAO,CAACiB,IAAI,CAACC,KAAL,CAAW,GAAID,CAAAA,IAAJ,EAAX,CAAD,CAAP,CACAX,YAAY,CAAC,CAACH,QAAQ,CAAE,EAAX,CAAeC,MAAM,CAAEC,SAAS,CAACD,MAAV,EAAvB,CAAD,CAAZ,CACAG,QAAQ,GACT,CALkB,sDAAH,kBAAZG,CAAAA,YAAY,0CAAlB,CAOA;AACA,GAAMH,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,EAAM,CACrBT,OAAO,8BAAKD,IAAL,EAAc,CAAC,CAAD,CAAG,CAAH,CAAK,CAAL,CAAO,CAAP,CAAS,CAAT,CAAW,CAAX,CAAa,CAAb,CAAe,CAAf,CAAiB,CAAjB,CAAmB,CAAnB,CAAqB,CAArB,CAAuB,CAAvB,CAAyB,CAAzB,CAA2B,CAA3B,CAAd,EAAP,CACD,CAFD,CAGA,mBACE,4CACE,8BAEIA,IAAI,CAACsB,GAAL,CAAS,SAACC,IAAD,CAAOC,CAAP,CAAa,CACpB,mBAAO,0BAAI,GAAG,CAAEA,CAAT,eACL,0BAAI,KAAK,CAAE,CAACC,QAAQ,CAAE,OAAX,CAAX,EAAiCF,IAAjC,CADK,CAAP,CAGD,CAJD,CAFJ,CADF,cAUE,8BAAQ,OAAO,CAAE,yBAAMG,CAAAA,OAAO,CAACC,GAAR,CAAYnB,SAAZ,CAAN,EAAjB,CAA+C,KAAK,CAAE,CAACoB,QAAQ,CAAE,OAAX,CAAoBC,GAAG,CAAE,CAAzB,CAAtD,EAVF,CADF,CAcD,CAzCD,CA2CA,cAAe9B,CAAAA,cAAf","sourcesContent":["import React, { useState, useEffect } from 'react'\r\n\r\nconst ManageCustomer = () => {\r\n  const [list, setList] = useState([])\r\n  const [time, setTime] = useState(0)\r\n  const [isMore, setIsMore] = useState(true)\r\n  const [formAlign, setFormAlign] = useState({\r\n    pageSize: 10,\r\n    pageNo: 1\r\n  })\r\n  useEffect(() => {\r\n    getLists()\r\n    window.addEventListener('scroll', handleScroll)\r\n    return () => {\r\n      window.removeEventListener('scroll', handleScroll)\r\n    }\r\n  }, [formAlign.pageNo])\r\n  // 滚动条事件监听\r\n  const handleScroll = async () => {\r\n    if (document.body.scrollHeight - window.pageYOffset - document.body.offsetHeight < 100 && (time === 0 || Date.parse(new Date()) - time > 500) && isMore) {\r\n      setTime(Date.parse(new Date()))\r\n      setFormAlign({pageSize: 10, pageNo: formAlign.pageNo++})\r\n      getLists()\r\n    }\r\n  }\r\n  // 获取数据列表\r\n  const getLists = () => {\r\n    setList([...list, ...[1,1,1,1,1,1,1,1,1,1,1,1,1,1]])\r\n  }\r\n  return (\r\n    <div>\r\n      <ul>\r\n        {\r\n          list.map((item, k) => {\r\n            return <li key={k}>\r\n              <h1 style={{fontSize: '100px'}}>{item}</h1>\r\n            </li>\r\n          })\r\n        }\r\n      </ul>\r\n      <button onClick={() => console.log(formAlign)} style={{position: 'fixed', top: 0}}></button>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default ManageCustomer"]},"metadata":{},"sourceType":"module"}