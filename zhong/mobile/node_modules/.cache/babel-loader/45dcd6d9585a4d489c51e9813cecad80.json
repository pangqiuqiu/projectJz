{"ast":null,"code":"import\"antd-mobile/lib/toast/style/css\";import _Toast from\"antd-mobile/lib/toast\";import _regeneratorRuntime from\"D:\\\\myCompany\\\\zhongdianqiche\\\\mobile\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"D:\\\\myCompany\\\\zhongdianqiche\\\\mobile\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"D:\\\\myCompany\\\\zhongdianqiche\\\\mobile\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"D:\\\\myCompany\\\\zhongdianqiche\\\\mobile\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"D:\\\\myCompany\\\\zhongdianqiche\\\\mobile\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"D:\\\\myCompany\\\\zhongdianqiche\\\\mobile\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from'react';import axios from'../../../untils/axios';// 组件\nimport styles from'./index.module.css';var Specialist=/*#__PURE__*/function(_React$Component){_inherits(Specialist,_React$Component);var _super=_createSuper(Specialist);function Specialist(){var _this;_classCallCheck(this,Specialist);_this=_super.call(this);_this.state={city:window.sessionStorage.getItem('city'),headList:[],// 推荐\nspeciList:[],// 特卖\n// 当前项\ncurrent:'',// 用户选择车系\nseries:'',// 车系索引\nseriesIndex:0,seriesIndexList:[]// 构建一个品牌被选中项的数组\n};return _this;}_createClass(Specialist,[{key:\"componentDidMount\",value:function componentDidMount(){// 获取推荐列表\nthis.getHeadList();// 特卖列表\nthis.getSpeciList();}// 获取推荐列表\n},{key:\"getHeadList\",value:function(){var _getHeadList=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _yield$axios$post,res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.post('/sale/getTmBrand',{city:this.state.city});case 2:_yield$axios$post=_context.sent;res=_yield$axios$post.data;this.setState({headList:res});case 5:case\"end\":return _context.stop();}}},_callee,this);}));function getHeadList(){return _getHeadList.apply(this,arguments);}return getHeadList;}()// 特卖列表\n},{key:\"getSpeciList\",value:function(){var _getSpeciList=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(brand){var _yield$axios$post2,res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return axios.post('/sale/getTm',{city:this.state.city,brand:brand});case 2:_yield$axios$post2=_context2.sent;res=_yield$axios$post2.data;this.setState({speciList:res,seriesIndexList:new Array(res.length).fill(0)});case 5:case\"end\":return _context2.stop();}}},_callee2,this);}));function getSpeciList(_x){return _getSpeciList.apply(this,arguments);}return getSpeciList;}()// 选择车系\n},{key:\"changeSeries\",value:function changeSeries(label,index1,index2){// 更新数组中被选中项目\nvar a=this.state.seriesIndexList;a[index1]=index2;this.setState({series:label,current:label,seriesIndex:index2,seriesIndexList:a});}// 我要询价\n},{key:\"btn\",value:function(){var _btn=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(children){var _this2=this;var ary;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:ary=children.filter(function(item){return item.label===_this2.state.series;});if(!(ary.length===0)){_context3.next=3;break;}return _context3.abrupt(\"return\",_Toast.fail('请选择相关车系',1));case 3:this.props.history.push(\"/specialist/myform?id=\".concat(this.state.series));case 4:case\"end\":return _context3.stop();}}},_callee3,this);}));function btn(_x2){return _btn.apply(this,arguments);}return btn;}()},{key:\"render\",value:function render(){var _this3=this;return/*#__PURE__*/React.createElement(\"div\",{style:{height:'100%',paddingBottom:'30px'}},/*#__PURE__*/React.createElement(\"ul\",{className:styles.hobbyList},/*#__PURE__*/React.createElement(\"li\",{onClick:function onClick(){return _this3.getSpeciList();}},\"\\u63A8\\u8350\"),this.state.headList.map(function(item){return/*#__PURE__*/React.createElement(\"li\",{onClick:function onClick(){return _this3.getSpeciList(item);},key:item},item);})),/*#__PURE__*/React.createElement(\"ul\",null,// this.state.speciList.map((item,index1) => {\n//   return <li key={item.label} style={{backgroundColor: '#fff', paddingBottom: '10px', marginBottom: '10px'}}>\n//     <h3 style={{height: '50px', lineHeight: '50px', padding: '0 15px'}}>{item.label}</h3>\n//     <div className={styles.item} style={{padding: '0 15px'}}>\n//       <div>\n//         {\n//           item.children.map((items,index2) => {\n//             return <div key={items.label}>\n//               <img alt=\"\" src={items.pic} style={this.state.seriesIndex === index2 ? {width: '50px', height: '50px', marginRight: '10px'} : {display: 'none', width: '50px', height: '50px', marginRight: '10px'}} />\n//               <span style={this.state.current === items.label ? {backgroundColor: '#108ee9', borderColor: '#108ee9', color: '#fff'} : {}} onClick={this.changeSeries.bind(this, items.label, index2)} size=\"small\" type=\"primary\" inline=\"true\">{items.label}</span>\n//             </div>\n//           })\n//         }\n//       </div>\n//     </div>\n//     <div style={{height: '1px', backgroundColor: '#eee', marginTop: '10px'}}></div>\n//     <div className={styles.btn} style={{width: '90px', height: '30px', backgroundColor: '#108ee9', color: '#fff', lineHeight: '30px', textAlign: 'center', marginRight: '15px', borderRadius: '3px'}} onClick={this.btn.bind(this, item.children)}>询价</div>\n//     <div style={{clear: 'both'}}></div>\n//   </li>\n// })\nthis.state.speciList.map(function(item,index1){return/*#__PURE__*/React.createElement(\"li\",{key:item.label,style:{backgroundColor:'#fff',paddingBottom:'10px',marginBottom:'10px'}},/*#__PURE__*/React.createElement(\"h3\",{style:{height:'50px',lineHeight:'50px',padding:'0 15px'}},item.label),/*#__PURE__*/React.createElement(\"div\",{className:styles.item,style:{padding:'0 15px'}},/*#__PURE__*/React.createElement(\"img\",{alt:\"\",src:item.children[_this3.state.seriesIndexList[index1]].pic}),/*#__PURE__*/React.createElement(\"div\",{className:styles.items},item.children.map(function(items,index2){return/*#__PURE__*/React.createElement(\"div\",{key:items.label},/*#__PURE__*/React.createElement(\"span\",{style:_this3.state.current===items.label?{backgroundColor:'#108ee9',borderColor:'#108ee9',color:'#fff'}:{},onClick:_this3.changeSeries.bind(_this3,items.label,index1,index2),inline:\"true\"},items.label));}))),/*#__PURE__*/React.createElement(\"div\",{style:{height:'1px',backgroundColor:'#eee',marginTop:'10px'}}),/*#__PURE__*/React.createElement(\"div\",{className:styles.btn,style:{width:'90px',height:'30px',backgroundColor:'#108ee9',color:'#fff',lineHeight:'30px',textAlign:'center',marginRight:'15px',borderRadius:'3px'},onClick:_this3.btn.bind(_this3,item.children)},\"\\u8BE2\\u4EF7\"),/*#__PURE__*/React.createElement(\"div\",{style:{clear:'both'}}));})));}}]);return Specialist;}(React.Component);export{Specialist as default};","map":{"version":3,"sources":["D:/myCompany/zhongdianqiche/mobile/src/views/TabFourth/Specialist/index.js"],"names":["React","axios","styles","Specialist","state","city","window","sessionStorage","getItem","headList","speciList","current","series","seriesIndex","seriesIndexList","getHeadList","getSpeciList","post","res","data","setState","brand","Array","length","fill","label","index1","index2","a","children","ary","filter","item","fail","props","history","push","height","paddingBottom","hobbyList","map","backgroundColor","marginBottom","lineHeight","padding","pic","items","borderColor","color","changeSeries","bind","marginTop","btn","width","textAlign","marginRight","borderRadius","clear","Component"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport axios from '../../../untils/axios'\r\n// 组件\r\nimport { Toast } from 'antd-mobile'\r\nimport styles from './index.module.css'\r\n\r\nexport default class Specialist extends React.Component {\r\n  constructor () {\r\n    super()\r\n    this.state = {\r\n      city: window.sessionStorage.getItem('city'),\r\n      headList: [], // 推荐\r\n      speciList: [], // 特卖\r\n      // 当前项\r\n      current: '',\r\n      // 用户选择车系\r\n      series: '',\r\n      // 车系索引\r\n      seriesIndex: 0,\r\n      seriesIndexList: [] // 构建一个品牌被选中项的数组\r\n    }\r\n  }\r\n  componentDidMount () {\r\n    // 获取推荐列表\r\n    this.getHeadList()\r\n    // 特卖列表\r\n    this.getSpeciList()\r\n  }\r\n  // 获取推荐列表\r\n  async getHeadList () {\r\n    const { data: res } = await axios.post('/sale/getTmBrand', {\r\n      city: this.state.city\r\n    })\r\n    this.setState({ headList: res })\r\n  }\r\n  // 特卖列表\r\n  async getSpeciList (brand) {\r\n    const { data: res } = await axios.post('/sale/getTm', {\r\n      city: this.state.city,\r\n      brand: brand\r\n    })\r\n    this.setState({ speciList: res, seriesIndexList: new Array(res.length).fill(0) })\r\n  }\r\n  // 选择车系\r\n  changeSeries (label, index1, index2) {\r\n    // 更新数组中被选中项目\r\n    let a = this.state.seriesIndexList\r\n    a[index1] = index2\r\n    this.setState({ series: label, current: label, seriesIndex: index2, seriesIndexList: a })\r\n  }\r\n  // 我要询价\r\n  async btn (children) {\r\n    const ary = children.filter(item => {\r\n      return item.label === this.state.series\r\n    })\r\n    if (ary.length === 0) return Toast.fail('请选择相关车系', 1)\r\n    this.props.history.push(`/specialist/myform?id=${this.state.series}`)\r\n  }\r\n  render () {\r\n    return (\r\n      <div style={{height: '100%', paddingBottom: '30px'}}>\r\n        {/* 推荐列表 */}\r\n        <ul className={styles.hobbyList}>\r\n          <li onClick={() => this.getSpeciList()}>推荐</li>\r\n          {\r\n            this.state.headList.map(item => {\r\n              return <li onClick={() => this.getSpeciList(item)} key={item}>{item}</li>\r\n            })\r\n          }\r\n        </ul>\r\n        {/* 特卖列表 */}\r\n        <ul>\r\n          {\r\n            // this.state.speciList.map((item,index1) => {\r\n            //   return <li key={item.label} style={{backgroundColor: '#fff', paddingBottom: '10px', marginBottom: '10px'}}>\r\n            //     <h3 style={{height: '50px', lineHeight: '50px', padding: '0 15px'}}>{item.label}</h3>\r\n            //     <div className={styles.item} style={{padding: '0 15px'}}>\r\n            //       <div>\r\n            //         {\r\n            //           item.children.map((items,index2) => {\r\n            //             return <div key={items.label}>\r\n            //               <img alt=\"\" src={items.pic} style={this.state.seriesIndex === index2 ? {width: '50px', height: '50px', marginRight: '10px'} : {display: 'none', width: '50px', height: '50px', marginRight: '10px'}} />\r\n            //               <span style={this.state.current === items.label ? {backgroundColor: '#108ee9', borderColor: '#108ee9', color: '#fff'} : {}} onClick={this.changeSeries.bind(this, items.label, index2)} size=\"small\" type=\"primary\" inline=\"true\">{items.label}</span>\r\n            //             </div>\r\n            //           })\r\n            //         }\r\n            //       </div>\r\n            //     </div>\r\n            //     <div style={{height: '1px', backgroundColor: '#eee', marginTop: '10px'}}></div>\r\n            //     <div className={styles.btn} style={{width: '90px', height: '30px', backgroundColor: '#108ee9', color: '#fff', lineHeight: '30px', textAlign: 'center', marginRight: '15px', borderRadius: '3px'}} onClick={this.btn.bind(this, item.children)}>询价</div>\r\n            //     <div style={{clear: 'both'}}></div>\r\n            //   </li>\r\n            // })\r\n            this.state.speciList.map((item,index1) => {\r\n              return <li key={item.label} style={{backgroundColor: '#fff', paddingBottom: '10px', marginBottom: '10px'}}>\r\n                {/* 品牌标题 */}\r\n                <h3 style={{height: '50px', lineHeight: '50px', padding: '0 15px'}}>{item.label}</h3>\r\n                {/* 每个品牌的图片 */}\r\n                <div className={styles.item} style={{padding: '0 15px'}}>\r\n                  <img alt=\"\" src={item.children[this.state.seriesIndexList[index1]].pic} />\r\n                  <div className={styles.items}>\r\n                    {\r\n                      item.children.map((items,index2) => {\r\n                        return <div key={items.label}>\r\n                          <span style={this.state.current === items.label ? {backgroundColor: '#108ee9', borderColor: '#108ee9', color: '#fff'} : {}} onClick={this.changeSeries.bind(this, items.label, index1, index2)} inline=\"true\">{items.label}</span>\r\n                        </div>\r\n                      })\r\n                    }\r\n                  </div>\r\n                </div>\r\n                <div style={{height: '1px', backgroundColor: '#eee', marginTop: '10px'}}></div>\r\n                <div className={styles.btn} style={{width: '90px', height: '30px', backgroundColor: '#108ee9', color: '#fff', lineHeight: '30px', textAlign: 'center', marginRight: '15px', borderRadius: '3px'}} onClick={this.btn.bind(this, item.children)}>询价</div>\r\n                <div style={{clear: 'both'}}></div>\r\n              </li>\r\n            })\r\n          }\r\n        </ul>\r\n      </div>\r\n    )\r\n  }\r\n}"]},"metadata":{},"sourceType":"module"}