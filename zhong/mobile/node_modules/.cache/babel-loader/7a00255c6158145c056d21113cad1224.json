{"ast":null,"code":"import \"antd-mobile/lib/button/style/css\";\nimport _Button from \"antd-mobile/lib/button\";\nvar _jsxFileName = \"H:\\\\jz\\\\\\u524D\\u7AEF\\\\w\\\\zhong\\\\mobile\\\\src\\\\views\\\\Details\\\\Video\\\\index.js\";\nimport React from 'react'; // 组件\n\nimport DownloadApp from '../../../components/DownloadApp';\n// axios\nimport axios from '../../../untils/axios';\nimport url from 'url'; // 样式\n\nimport styles from './index.module.css';\nexport default class VideoDetails extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      // 视频内容\n      detailsObj: {},\n      userObj: {},\n      time: '',\n      label: '',\n      id: url.parse(this.props.location.search, true).query.id,\n      // 相关推荐\n      recommendList: [],\n      // 评论\n      commentList: []\n    };\n\n    this.handle = (type, id) => {\n      if (type === '重点号资讯') {\n        this.props.history.push(`/infor_details?id=${id}`);\n      } else {\n        this.props.history.push(`/video_details?id=${id}`);\n      }\n    };\n  }\n\n  componentDidMount() {\n    // 获取视频详情信息\n    this.getDetails(); // 获取评论列表\n\n    this.getCommentList();\n  } // 组件跟新时的钩子\n\n\n  async componentWillReceiveProps(nextProps) {\n    await this.setState({\n      id: url.parse(nextProps.location.search, true).query.id\n    }); // 获取资讯详情信息\n\n    this.getDetails(); // 获取评论列表\n\n    this.getCommentList();\n  } // 获取视频详情信息\n\n\n  async getDetails() {\n    const {\n      data: res\n    } = await axios.post('/keyN/qx', {\n      id: this.state.id\n    });\n    this.setState({\n      detailsObj: res.object,\n      userObj: res.key,\n      time: res.postDate,\n      label: res.label\n    }, () => {\n      this.getRecommendList();\n    });\n  } // 获取推荐列表\n\n\n  async getRecommendList() {\n    const {\n      data: res\n    } = await axios.post('/keyN/tj', {\n      label: this.state.label\n    });\n    this.setState({\n      recommendList: res\n    });\n  } // 获取评论列表\n\n\n  async getCommentList() {\n    const {\n      data: res\n    } = await axios.post('/keyN/showCom', {\n      id: this.state.id\n    });\n    this.setState({\n      commentList: res\n    });\n  } // 点击相关推荐\n\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        paddingTop: '70px'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(DownloadApp, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.contain,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      style: {\n        'wordWrap': 'break-word',\n        letterSpacing: '3px'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 11\n      }\n    }, this.state.detailsObj.title), /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        color: '#9E9E9E',\n        fontSize: '15px',\n        height: '50px',\n        lineHeight: '50px'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 11\n      }\n    }, this.state.time), /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.user,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      style: {\n        width: '50px',\n        height: '50px',\n        marginRight: '20px'\n      },\n      alt: \"\",\n      src: this.state.userObj.headPic,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        fontSize: '20px',\n        marginBottom: '10px'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 15\n      }\n    }, this.state.userObj.name))), /*#__PURE__*/React.createElement(\"main\", {\n      className: styles.main,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"video\", {\n      src: this.state.detailsObj.src,\n      controls: true,\n      autoPlay: true,\n      loop: true,\n      \"data-setup\": \"{'example_option':true}\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 13\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.recommend,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      style: {\n        fontWeight: 400\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 11\n      }\n    }, \"\\u76F8\\u5173\\u63A8\\u8350\"), /*#__PURE__*/React.createElement(\"ul\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 11\n      }\n    }, this.state.recommendList.map(item => {\n      return /*#__PURE__*/React.createElement(\"li\", {\n        onClick: () => {\n          this.handle(item.type, item.id);\n        },\n        key: item.id,\n        style: {\n          marginTop: '15px'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 24\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        style: {\n          width: '140px',\n          height: '70px'\n        },\n        src: item.object.coverPic,\n        alt: \"\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 19\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          marginLeft: '15px'\n        },\n        className: styles.userTitle,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"h4\", {\n        style: {\n          fontWeight: 400,\n          fontSize: '20x'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 21\n        }\n      }, item.title), /*#__PURE__*/React.createElement(\"span\", {\n        style: {\n          color: '#888',\n          fontSize: '13px'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 21\n        }\n      }, item.key.name)));\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.comment,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      style: {\n        fontWeight: 400,\n        marginBottom: '20px'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 9\n      }\n    }, \"\\u76F8\\u5173\\u8BC4\\u8BBA\"), /*#__PURE__*/React.createElement(\"ul\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 11\n      }\n    }, this.state.commentList.map(item => {\n      return /*#__PURE__*/React.createElement(\"li\", {\n        key: item.id,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 24\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        alt: \"\",\n        src: item.userHeadPic,\n        style: {\n          width: '40px',\n          height: '40px',\n          borderRadius: '50%',\n          marginRight: '10px'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 19\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"h4\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 21\n        }\n      }, item.username), /*#__PURE__*/React.createElement(\"p\", {\n        style: {\n          margin: '5px 0',\n          color: '#888'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 21\n        }\n      }, item.comment)));\n    })), /*#__PURE__*/React.createElement(_Button, {\n      onClick: () => this.props.history.push('/tab/mobile'),\n      style: {\n        marginTop: '10px'\n      },\n      type: \"primary\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 11\n      }\n    }, \"\\u4E0B\\u8F7D\\u91CD\\u70B9APP \\u67E5\\u770B\\u66F4\\u591A\\u8BC4\\u8BBA\")));\n  }\n\n}","map":{"version":3,"sources":["H:/jz/前端/w/zhong/mobile/src/views/Details/Video/index.js"],"names":["React","DownloadApp","axios","url","styles","VideoDetails","Component","state","detailsObj","userObj","time","label","id","parse","props","location","search","query","recommendList","commentList","handle","type","history","push","componentDidMount","getDetails","getCommentList","componentWillReceiveProps","nextProps","setState","data","res","post","object","key","postDate","getRecommendList","render","paddingTop","contain","letterSpacing","title","color","fontSize","height","lineHeight","user","width","marginRight","headPic","marginBottom","name","main","src","recommend","fontWeight","map","item","marginTop","coverPic","marginLeft","userTitle","comment","userHeadPic","borderRadius","username","margin"],"mappings":"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","sourcesContent":["import React from 'react'\r\n// 组件\r\nimport DownloadApp from '../../../components/DownloadApp'\r\nimport { Button } from 'antd-mobile'\r\n// axios\r\nimport axios from '../../../untils/axios'\r\nimport url from 'url'\r\n// 样式\r\nimport styles from './index.module.css'\r\n\r\nexport default class VideoDetails extends React.Component {\r\n  state = {\r\n    // 视频内容\r\n    detailsObj: {},\r\n    userObj: {},\r\n    time: '',\r\n    label: '',\r\n    id: url.parse(this.props.location.search, true).query.id,\r\n    // 相关推荐\r\n    recommendList: [],\r\n    // 评论\r\n    commentList: []\r\n  }\r\n  componentDidMount () {\r\n    // 获取视频详情信息\r\n    this.getDetails()\r\n    // 获取评论列表\r\n    this.getCommentList()\r\n  }\r\n  // 组件跟新时的钩子\r\n  async componentWillReceiveProps (nextProps) {\r\n    await this.setState({\r\n      id: url.parse(nextProps.location.search, true).query.id\r\n    })\r\n    // 获取资讯详情信息\r\n    this.getDetails()\r\n    // 获取评论列表\r\n    this.getCommentList()\r\n  }\r\n  // 获取视频详情信息\r\n  async getDetails () {\r\n    const { data: res } = await axios.post('/keyN/qx', {\r\n      id: this.state.id\r\n    })\r\n    this.setState({\r\n      detailsObj: res.object,\r\n      userObj: res.key,\r\n      time: res.postDate,\r\n      label: res.label\r\n    }, () => {\r\n      this.getRecommendList()\r\n    })\r\n  }\r\n  // 获取推荐列表\r\n  async getRecommendList () {\r\n    const { data: res } = await axios.post('/keyN/tj', {\r\n      label: this.state.label\r\n    })\r\n    this.setState({\r\n      recommendList: res\r\n    })\r\n  }\r\n  // 获取评论列表\r\n  async getCommentList () {\r\n    const { data: res } = await axios.post('/keyN/showCom', {\r\n      id: this.state.id\r\n    })\r\n    this.setState({\r\n      commentList: res\r\n    })\r\n  }\r\n  // 点击相关推荐\r\n  handle = (type, id) => {\r\n    if (type === '重点号资讯') {\r\n      this.props.history.push(`/infor_details?id=${id}`)\r\n    } else {\r\n      this.props.history.push(`/video_details?id=${id}`)\r\n    }\r\n  }\r\n  render () {\r\n    return (\r\n      <div style={{paddingTop: '70px'}}>\r\n        {/* 组件 */}\r\n        <DownloadApp></DownloadApp>\r\n        {/* 视频主体 */}\r\n        <div className={styles.contain}>\r\n          {/* 标题 */}\r\n          <h2 style={{'wordWrap': 'break-word', letterSpacing: '3px'}}>{this.state.detailsObj.title}</h2>\r\n          {/* 时间 */}\r\n          <div style={{color: '#9E9E9E', fontSize: '15px', height: '50px', lineHeight: '50px'}}>{this.state.time}</div>\r\n          {/* 用户 */}\r\n          <div className={styles.user}>\r\n            <img style={{width: '50px', height: '50px', marginRight: '20px'}} alt=\"\" src={this.state.userObj.headPic}></img>\r\n            <div>\r\n              <div style={{fontSize: '20px', marginBottom: '10px'}}>{this.state.userObj.name}</div>\r\n              {/* <div style={{fontSize: '13px'}}>{this.state.userObj.intro}</div> */}\r\n            </div>\r\n          </div>\r\n          {/* 视频内容 */}\r\n          <main className={styles.main}>\r\n            <video src={this.state.detailsObj.src} controls autoPlay loop data-setup=\"{'example_option':true}\"></video>\r\n          </main>\r\n        </div>\r\n        {/* 相关推荐 */}\r\n        <div className={styles.recommend}>\r\n          <h2 style={{fontWeight: 400}}>相关推荐</h2>\r\n          <ul>\r\n            {\r\n              this.state.recommendList.map(item => {\r\n                return <li onClick={() => {this.handle(item.type, item.id)}} key={item.id} style={{marginTop: '15px'}}>\r\n                  <img style={{width: '140px', height: '70px'}} src={item.object.coverPic} alt=\"\" />\r\n                  <div style={{marginLeft: '15px'}} className={styles.userTitle}>\r\n                    <h4 style={{fontWeight: 400, fontSize: '20x'}}>{item.title}</h4>\r\n                    <span style={{color: '#888', fontSize: '13px'}}>{item.key.name}</span>\r\n                  </div>\r\n                </li>\r\n              })\r\n            }\r\n          </ul>\r\n        </div>\r\n        {/* 精彩评论 */}\r\n        <div className={styles.comment}>\r\n        <h2 style={{fontWeight: 400, marginBottom: '20px'}}>相关评论</h2>\r\n          <ul>\r\n            {\r\n              this.state.commentList.map(item => {\r\n                return <li key={item.id}>\r\n                  <img alt=\"\" src={item.userHeadPic} style={{width: '40px', height: '40px', borderRadius: '50%', marginRight: '10px'}} />\r\n                  <div>\r\n                    <h4>{item.username}</h4>\r\n                    <p style={{margin: '5px 0', color: '#888'}}>{item.comment}</p>\r\n                  </div>\r\n                </li>\r\n              })\r\n            }\r\n          </ul>\r\n          {/* 更多评论 */}\r\n          <Button onClick={() => this.props.history.push('/tab/mobile')} style={{marginTop: '10px'}} type=\"primary\">下载重点APP 查看更多评论</Button>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}"]},"metadata":{},"sourceType":"module"}