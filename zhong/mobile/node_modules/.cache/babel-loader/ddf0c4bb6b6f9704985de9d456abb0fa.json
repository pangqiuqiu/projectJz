{"ast":null,"code":"import _regeneratorRuntime from\"D:\\\\myCompany\\\\zhongdianqiche\\\\a\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"D:\\\\myCompany\\\\zhongdianqiche\\\\a\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"D:\\\\myCompany\\\\zhongdianqiche\\\\a\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"D:\\\\myCompany\\\\zhongdianqiche\\\\a\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"D:\\\\myCompany\\\\zhongdianqiche\\\\a\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"D:\\\\myCompany\\\\zhongdianqiche\\\\a\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from'react';// 样式\nimport styles from'./index.module.css';// axios\nimport axios from'../../../untils/axios';var Library=/*#__PURE__*/function(_React$Component){_inherits(Library,_React$Component);var _super=_createSuper(Library);function Library(props){var _this;_classCallCheck(this,Library);_this=_super.call(this,props);_this.scrollFun=function(){var lessThan=[];// console.log(document.documentElement.scrollTop)\n_this.state.scrollBrand.forEach(function(item,index){if(item.getBoundingClientRect().top<0){lessThan.push(index);}});_this.setState({activeIndex:lessThan[lessThan.length-1]});};_this.state={// 猜你喜欢\nhobbyList:[],// 品牌列表\nbrandList:[],// 索引列表\nindexList:[],// 每个字母的品牌数组\nscrollBrand:[],// 高亮索引\nactiveIndex:0};return _this;}_createClass(Library,[{key:\"componentDidMount\",value:function componentDidMount(){// 获取猜你喜欢列表\nthis.getHobbyList();// 获取品牌列表\nthis.getBrandList();// 监听滚动事件\nwindow.addEventListener('scroll',this.scrollFun);}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){window.removeEventListener('scroll',this.scrollFun);}// 获取猜你喜欢列表\n},{key:\"getHobbyList\",value:function(){var _getHobbyList=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _yield$axios$post,res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.post('/car/xiu');case 2:_yield$axios$post=_context.sent;res=_yield$axios$post.data;this.setState({hobbyList:res});case 5:case\"end\":return _context.stop();}}},_callee,this);}));function getHobbyList(){return _getHobbyList.apply(this,arguments);}return getHobbyList;}()// 获取品牌列表\n},{key:\"getBrandList\",value:function(){var _getBrandList=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var _this2=this;var _yield$axios$post2,res,indexList;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return axios.post('/car/brandSeriesCe');case 2:_yield$axios$post2=_context2.sent;res=_yield$axios$post2.data;indexList=[];this.setState({brandList:res},function(){res.map(function(value){indexList.push(value.label);});_this2.setState({indexList:indexList});});case 6:case\"end\":return _context2.stop();}}},_callee2,this);}));function getBrandList(){return _getBrandList.apply(this,arguments);}return getBrandList;}()// 点击索引列表事件\n},{key:\"scroll\",value:function scroll(index){this.setState({activeIndex:index});document.documentElement.scrollTop=this.state.scrollBrand[index].offsetTop+1;document.body.scrollTop=this.state.scrollBrand[index].offsetTop+1;}// 滚动事件\n},{key:\"render\",value:function render(){var _this3=this;return/*#__PURE__*/React.createElement(\"div\",{style:{paddingBottom:'30px',top:0},className:styles.all,ref:\"all\"},/*#__PURE__*/React.createElement(\"header\",{style:{backgroundColor:'#fff',padding:'15px 15px 0 15px'}},/*#__PURE__*/React.createElement(\"h2\",{style:{marginBottom:'20px',fontWeight:'400'}},\"\\u731C\\u4F60\\u559C\\u6B22\"),/*#__PURE__*/React.createElement(\"ul\",{className:styles.hobbyList},this.state.hobbyList.map(function(item,index){return/*#__PURE__*/React.createElement(\"li\",{key:index,onClick:function onClick(){return _this3.props.history.push(\"/serieslist/seriesdetails?id=\".concat(item.series));}},/*#__PURE__*/React.createElement(\"img\",{style:{width:'70px'},alt:\"\",src:item.carPic}),/*#__PURE__*/React.createElement(\"div\",{style:{width:'70px',whiteSpace:'nowrap',overflow:'hidden',textOverflow:'ellipsis',fontSize:'12px'}},item.series));}))),/*#__PURE__*/React.createElement(\"ul\",{className:styles.indexlist},this.state.indexList.map(function(item,index){return/*#__PURE__*/React.createElement(\"li\",{style:_this3.state.activeIndex===index?{backgroundColor:'#4D8FFF'}:{},onClick:_this3.scroll.bind(_this3,index),className:styles.indexItem,key:item},item);})),/*#__PURE__*/React.createElement(\"ul\",{ref:\"brandAll\",id:\"brandAll\",className:styles.brandAll},this.state.brandList.map(function(item,i){return/*#__PURE__*/React.createElement(\"li\",{className:\"li-item\",key:item.label,ref:function ref(a){_this3.state.scrollBrand[i]=a;}},/*#__PURE__*/React.createElement(\"h2\",{style:{height:'30px',lineHeight:'30px',paddingLeft:'10px',fontWeight:'400'}},item.label),/*#__PURE__*/React.createElement(\"div\",{style:{backgroundColor:'#fff',paddingLeft:'10px'}},item.children.map(function(items){return/*#__PURE__*/React.createElement(\"div\",{onClick:function onClick(){return _this3.props.history.push(\"/library/serieslist?id=\".concat(items));},className:styles.items,key:items},/*#__PURE__*/React.createElement(\"img\",{src:\"https://tupiancar.oss-cn-zhangjiakou.aliyuncs.com/\".concat(items,\".png\"),alt:\"\"}),/*#__PURE__*/React.createElement(\"div\",null,items));})));})));}}]);return Library;}(React.Component);export{Library as default};","map":{"version":3,"sources":["D:/myCompany/zhongdianqiche/a/src/views/TabThird/Library/index.js"],"names":["React","styles","axios","Library","props","scrollFun","lessThan","state","scrollBrand","forEach","item","index","getBoundingClientRect","top","push","setState","activeIndex","length","hobbyList","brandList","indexList","getHobbyList","getBrandList","window","addEventListener","removeEventListener","post","res","data","map","value","label","document","documentElement","scrollTop","offsetTop","body","paddingBottom","all","backgroundColor","padding","marginBottom","fontWeight","history","series","width","carPic","whiteSpace","overflow","textOverflow","fontSize","indexlist","scroll","bind","indexItem","brandAll","i","a","height","lineHeight","paddingLeft","children","items","Component"],"mappings":"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","sourcesContent":["import React from 'react'\r\n// 样式\r\nimport styles from './index.module.css'\r\n// axios\r\nimport axios from '../../../untils/axios'\r\n\r\nexport default class Library extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      // 猜你喜欢\r\n      hobbyList: [],\r\n      // 品牌列表\r\n      brandList: [],\r\n      // 索引列表\r\n      indexList: [],\r\n      // 每个字母的品牌数组\r\n      scrollBrand: [],\r\n      // 高亮索引\r\n      activeIndex: 0\r\n    }\r\n  }\r\n  componentDidMount () {\r\n    // 获取猜你喜欢列表\r\n    this.getHobbyList()\r\n    // 获取品牌列表\r\n    this.getBrandList()\r\n    // 监听滚动事件\r\n    window.addEventListener('scroll', this.scrollFun)\r\n  }\r\n  componentWillUnmount () {\r\n    window.removeEventListener('scroll', this.scrollFun)\r\n  }\r\n  // 获取猜你喜欢列表\r\n  async getHobbyList () {\r\n    const { data: res } = await axios.post('/car/xiu')\r\n    this.setState({ hobbyList: res })\r\n  }\r\n  // 获取品牌列表\r\n  async getBrandList () {\r\n    const { data: res } = await axios.post('/car/brandSeriesCe')\r\n    const indexList = []\r\n    this.setState({ brandList: res }, () => {\r\n      res.map(value => {\r\n        indexList.push(value.label)\r\n      })\r\n      this.setState({ indexList })\r\n    })\r\n  }\r\n  // 点击索引列表事件\r\n  scroll (index) {\r\n    this.setState({ activeIndex: index })\r\n    document.documentElement.scrollTop = this.state.scrollBrand[index].offsetTop + 1\r\n    document.body.scrollTop = this.state.scrollBrand[index].offsetTop + 1\r\n  }\r\n  // 滚动事件\r\n  scrollFun = () => {\r\n    let lessThan = []\r\n    // console.log(document.documentElement.scrollTop)\r\n    this.state.scrollBrand.forEach((item,index) => {\r\n      if (item.getBoundingClientRect().top < 0) {\r\n        lessThan.push(index)\r\n      }\r\n    })\r\n    this.setState({ activeIndex: lessThan[lessThan.length - 1] })\r\n  }\r\n  render () {\r\n    return (\r\n      <div style={{paddingBottom: '30px', top: 0}} className={styles.all} ref=\"all\">\r\n        {/* 顶部 */}\r\n        <header style={{backgroundColor: '#fff', padding: '15px 15px 0 15px' }}>\r\n          <h2 style={{marginBottom: '20px', fontWeight: '400'}}>猜你喜欢</h2>\r\n          <ul className={styles.hobbyList}>\r\n            {\r\n              this.state.hobbyList.map((item,index) => {\r\n                return <li key={index} onClick={() => this.props.history.push(`/serieslist/seriesdetails?id=${item.series}`)}>\r\n                  <img style={{width: '70px'}} alt=\"\" src={item.carPic}></img>\r\n                  <div style={{width: '70px', whiteSpace: 'nowrap', overflow: 'hidden', textOverflow: 'ellipsis', fontSize: '12px'}}>{item.series}</div>\r\n                </li>\r\n              })\r\n            }\r\n          </ul>\r\n        </header>\r\n        {/* 索引列表 */}\r\n        <ul className={styles.indexlist}>\r\n          {\r\n            this.state.indexList.map((item,index) => {\r\n              return <li style={this.state.activeIndex === index ? {backgroundColor: '#4D8FFF'} : {}} onClick={this.scroll.bind(this, index)} className={styles.indexItem} key={item}>{item}</li>\r\n            })\r\n          }\r\n        </ul>\r\n        {/* 品牌列表 */}\r\n        <ul ref=\"brandAll\" id=\"brandAll\" className={styles.brandAll}>\r\n          {\r\n            this.state.brandList.map((item,i) => {\r\n              return <li className=\"li-item\" key={item.label} ref={a => {this.state.scrollBrand[i] = a}}>\r\n                {/* 首字符 */}\r\n                <h2 style={{height: '30px', lineHeight: '30px', paddingLeft: '10px', fontWeight: '400'}}>{item.label}</h2>\r\n                {/* 品牌 */}\r\n                <div style={{backgroundColor: '#fff', paddingLeft: '10px'}}>\r\n                  {\r\n                    item.children.map(items => {\r\n                      return <div onClick={() => this.props.history.push(`/library/serieslist?id=${items}`)} className={styles.items} key={items}>\r\n                        <img src={`https://tupiancar.oss-cn-zhangjiakou.aliyuncs.com/${items}.png`} alt=\"\"></img>\r\n                        <div>{items}</div>\r\n                      </div>\r\n                    })\r\n                  }\r\n                </div>\r\n              </li>\r\n            })\r\n          }\r\n        </ul>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}