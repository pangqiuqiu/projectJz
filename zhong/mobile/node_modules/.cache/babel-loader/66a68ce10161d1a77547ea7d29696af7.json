{"ast":null,"code":"import\"antd-mobile/lib/button/style/css\";import _Button from\"antd-mobile/lib/button\";import\"antd-mobile/lib/input-item/style/css\";import _InputItem from\"antd-mobile/lib/input-item\";import _regeneratorRuntime from\"D:\\\\myCompany\\\\zhongdianqiche\\\\mobile\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import\"antd-mobile/lib/toast/style/css\";import _Toast from\"antd-mobile/lib/toast\";import _asyncToGenerator from\"D:\\\\myCompany\\\\zhongdianqiche\\\\mobile\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"D:\\\\myCompany\\\\zhongdianqiche\\\\mobile\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"D:\\\\myCompany\\\\zhongdianqiche\\\\mobile\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"D:\\\\myCompany\\\\zhongdianqiche\\\\mobile\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"D:\\\\myCompany\\\\zhongdianqiche\\\\mobile\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from'react';import styles from'./index.module.css';import url from'url';import axios from'../../../untils/axios';var Myform=/*#__PURE__*/function(_React$Component){_inherits(Myform,_React$Component);var _super=_createSuper(Myform);function Myform(){var _this;_classCallCheck(this,Myform);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={series:url.parse(_this.props.location.search,true).query.id,name:'',phone:'',city:sessionStorage.getItem('city')};return _this;}_createClass(Myform,[{key:\"changeName\",// 获取用户姓名\nvalue:function changeName(e){this.setState({name:e});}// 获取用户手机号\n},{key:\"changePhone\",value:function changePhone(e){this.setState({phone:e});}},{key:\"handle\",value:function(){var _handle=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(this.state.name===''||!/^1[3456789]\\d{9}$/.test(this.state.phone))){_context.next=2;break;}return _context.abrupt(\"return\",_Toast.fail('请将信息填写完整',2));case 2:_context.next=4;return axios.post('/sale/addEnquiry',this.state);case 4:res=_context.sent;if(!(res.data!==true||res.status!==200)){_context.next=7;break;}return _context.abrupt(\"return\",_Toast.fail('提交失败',1));case 7:_Toast.success('提交成功',1);this.props.history.goBack();case 9:case\"end\":return _context.stop();}}},_callee,this);}));function handle(){return _handle.apply(this,arguments);}return handle;}()},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",{style:{padding:'15px'}},/*#__PURE__*/React.createElement(\"ul\",{className:styles.ul},/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"div\",null,\"\\u9009\\u62E9\\u7684\\u8F66\\u7CFB:\"),/*#__PURE__*/React.createElement(_InputItem,{type:\"text\",value:this.state.series,style:{width:'100%'}})),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"div\",null,\"\\u5BF9\\u60A8\\u7684\\u79F0\\u547C:\"),/*#__PURE__*/React.createElement(_InputItem,{type:\"text\",value:this.state.name,onChange:this.changeName.bind(this),style:{width:'100%'}})),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"div\",null,\"\\u60A8\\u7684\\u8054\\u7CFB\\u65B9\\u5F0F:\"),/*#__PURE__*/React.createElement(_InputItem,{type:\"text\",value:this.state.phone,onChange:this.changePhone.bind(this),style:{width:'100%'}}))),/*#__PURE__*/React.createElement(_Button,{type:\"primary\",onClick:this.handle.bind(this),style:{marginTop:'20px'}},\"\\u63D0\\u4EA4\\u4FE1\\u606F\"));}}]);return Myform;}(React.Component);export{Myform as default};","map":{"version":3,"sources":["D:/myCompany/zhongdianqiche/mobile/src/views/TabFourth/Myform/index.js"],"names":["React","styles","url","axios","Myform","state","series","parse","props","location","search","query","id","name","phone","city","sessionStorage","getItem","e","setState","test","fail","post","res","data","status","success","history","goBack","padding","ul","width","changeName","bind","changePhone","handle","marginTop","Component"],"mappings":"s9BAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CAEA,MAAOC,CAAAA,MAAP,KAAmB,oBAAnB,CACA,MAAOC,CAAAA,GAAP,KAAgB,KAAhB,CACA,MAAOC,CAAAA,KAAP,KAAkB,uBAAlB,C,GAEqBC,CAAAA,M,uUACnBC,K,CAAQ,CACNC,MAAM,CAAEJ,GAAG,CAACK,KAAJ,CAAU,MAAKC,KAAL,CAAWC,QAAX,CAAoBC,MAA9B,CAAsC,IAAtC,EAA4CC,KAA5C,CAAkDC,EADpD,CAENC,IAAI,CAAE,EAFA,CAGNC,KAAK,CAAE,EAHD,CAINC,IAAI,CAAEC,cAAc,CAACC,OAAf,CAAuB,MAAvB,CAJA,C,sDAMR;0BACYC,C,CAAG,CACb,KAAKC,QAAL,CAAc,CAAEN,IAAI,CAAEK,CAAR,CAAd,EACD,CACD;gDACaA,C,CAAG,CACd,KAAKC,QAAL,CAAc,CAAEL,KAAK,CAAEI,CAAT,CAAd,EACD,C,qPAEK,KAAKb,KAAL,CAAWQ,IAAX,GAAoB,EAApB,EAA0B,CAAE,oBAAoBO,IAApB,CAAyB,KAAKf,KAAL,CAAWS,KAApC,C,0DAAoD,OAAMO,IAAN,CAAW,UAAX,CAAuB,CAAvB,C,+BAClElB,CAAAA,KAAK,CAACmB,IAAN,CAAW,kBAAX,CAA+B,KAAKjB,KAApC,C,QAAZkB,G,oBACFA,GAAG,CAACC,IAAJ,GAAa,IAAb,EAAqBD,GAAG,CAACE,MAAJ,GAAe,G,0DAAY,OAAMJ,IAAN,CAAW,MAAX,CAAmB,CAAnB,C,SACpD,OAAMK,OAAN,CAAc,MAAd,CAAsB,CAAtB,EACA,KAAKlB,KAAL,CAAWmB,OAAX,CAAmBC,MAAnB,G,8KAEQ,CACR,mBACE,2BAAK,KAAK,CAAE,CAACC,OAAO,CAAE,MAAV,CAAZ,eAEE,0BAAI,SAAS,CAAE5B,MAAM,CAAC6B,EAAtB,eACE,2CACE,iEADF,cAEE,gCAAW,IAAI,CAAC,MAAhB,CAAuB,KAAK,CAAE,KAAKzB,KAAL,CAAWC,MAAzC,CAAiD,KAAK,CAAE,CAACyB,KAAK,CAAE,MAAR,CAAxD,EAFF,CADF,cAKE,2CACE,iEADF,cAEE,gCAAW,IAAI,CAAC,MAAhB,CAAuB,KAAK,CAAE,KAAK1B,KAAL,CAAWQ,IAAzC,CAA+C,QAAQ,CAAE,KAAKmB,UAAL,CAAgBC,IAAhB,CAAqB,IAArB,CAAzD,CAAqF,KAAK,CAAE,CAACF,KAAK,CAAE,MAAR,CAA5F,EAFF,CALF,cASE,2CACE,uEADF,cAEE,gCAAW,IAAI,CAAC,MAAhB,CAAuB,KAAK,CAAE,KAAK1B,KAAL,CAAWS,KAAzC,CAAgD,QAAQ,CAAE,KAAKoB,WAAL,CAAiBD,IAAjB,CAAsB,IAAtB,CAA1D,CAAuF,KAAK,CAAE,CAACF,KAAK,CAAE,MAAR,CAA9F,EAFF,CATF,CAFF,cAiBE,6BAAQ,IAAI,CAAC,SAAb,CAAuB,OAAO,CAAE,KAAKI,MAAL,CAAYF,IAAZ,CAAiB,IAAjB,CAAhC,CAAwD,KAAK,CAAE,CAACG,SAAS,CAAE,MAAZ,CAA/D,6BAjBF,CADF,CAqBD,C,oBA5CiCpC,KAAK,CAACqC,S,SAArBjC,M","sourcesContent":["import React from 'react'\r\nimport { InputItem, Button, Toast } from 'antd-mobile'\r\nimport styles from './index.module.css'\r\nimport url from 'url'\r\nimport axios from '../../../untils/axios'\r\n\r\nexport default class Myform extends React.Component {\r\n  state = {\r\n    series: url.parse(this.props.location.search, true).query.id,\r\n    name: '',\r\n    phone: '',\r\n    city: sessionStorage.getItem('city')\r\n  }\r\n  // 获取用户姓名\r\n  changeName (e) {\r\n    this.setState({ name: e })\r\n  }\r\n  // 获取用户手机号\r\n  changePhone (e) {\r\n    this.setState({ phone: e })\r\n  }\r\n  async handle () {\r\n    if (this.state.name === '' || !(/^1[3456789]\\d{9}$/.test(this.state.phone))) return Toast.fail('请将信息填写完整', 2)\r\n    const res = await axios.post('/sale/addEnquiry', this.state)\r\n    if (res.data !== true || res.status !== 200) return Toast.fail('提交失败', 1)\r\n    Toast.success('提交成功', 1)\r\n    this.props.history.goBack()\r\n  }\r\n  render () {\r\n    return (\r\n      <div style={{padding: '15px'}}>\r\n        {/* 表单 */}\r\n        <ul className={styles.ul}>\r\n          <li>\r\n            <div>选择的车系:</div>\r\n            <InputItem type=\"text\" value={this.state.series} style={{width: '100%'}}></InputItem>\r\n          </li>\r\n          <li>\r\n            <div>对您的称呼:</div>\r\n            <InputItem type=\"text\" value={this.state.name} onChange={this.changeName.bind(this)} style={{width: '100%'}}></InputItem>\r\n          </li>\r\n          <li>\r\n            <div>您的联系方式:</div>\r\n            <InputItem type=\"text\" value={this.state.phone} onChange={this.changePhone.bind(this)} style={{width: '100%'}}></InputItem>\r\n          </li>\r\n        </ul>\r\n        {/* 提交 */}\r\n        <Button type=\"primary\" onClick={this.handle.bind(this)} style={{marginTop: '20px'}}>提交信息</Button>\r\n      </div>\r\n    )\r\n  }\r\n}"]},"metadata":{},"sourceType":"module"}