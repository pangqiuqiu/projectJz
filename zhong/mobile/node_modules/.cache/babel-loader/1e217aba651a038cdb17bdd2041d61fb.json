{"ast":null,"code":"import _regeneratorRuntime from\"D:\\\\myCompany\\\\zhongdianqiche\\\\mobile\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"D:\\\\myCompany\\\\zhongdianqiche\\\\mobile\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"D:\\\\myCompany\\\\zhongdianqiche\\\\mobile\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"D:\\\\myCompany\\\\zhongdianqiche\\\\mobile\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"D:\\\\myCompany\\\\zhongdianqiche\\\\mobile\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"D:\\\\myCompany\\\\zhongdianqiche\\\\mobile\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from'react';import url from'url';// 组件\nimport DownloadApp from'../../../../components/DownloadApp';// 样式\nimport styles from'./index.module.css';import axios from'../../../../untils/axios';var CarType=/*#__PURE__*/function(_React$Component){_inherits(CarType,_React$Component);var _super=_createSuper(CarType);function CarType(){var _this;_classCallCheck(this,CarType);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={id:url.parse(_this.props.location.search,true).query.id,// 年限\nallYear:[],years:'',currentIndex:0,// 车型\ntypeList:[]};return _this;}_createClass(CarType,[{key:\"componentDidMount\",value:function componentDidMount(){// 获取年限\nthis.getYearList();// 获取车型列表\nthis.getTypeList();}// 获取年限\n},{key:\"getYearList\",value:function(){var _getYearList=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _yield$axios$post,res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.post('/car/years',{series:this.state.id});case 2:_yield$axios$post=_context.sent;res=_yield$axios$post.data;res.unshift('全部在售');this.setState({allYear:res});case 6:case\"end\":return _context.stop();}}},_callee,this);}));function getYearList(){return _getYearList.apply(this,arguments);}return getYearList;}()// 获取车型列表\n},{key:\"getTypeList\",value:function(){var _getTypeList=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var _yield$axios$post2,res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return axios.post('/car/showCarType',{series:this.state.id,years:this.state.years});case 2:_yield$axios$post2=_context2.sent;res=_yield$axios$post2.data;this.setState({typeList:res});case 5:case\"end\":return _context2.stop();}}},_callee2,this);}));function getTypeList(){return _getTypeList.apply(this,arguments);}return getTypeList;}()// 切换年限\n},{key:\"changeYear\",value:function changeYear(item,index){var _this2=this;this.setState({currentIndex:index,years:item},function(){_this2.getTypeList();});}},{key:\"render\",value:function render(){var _this3=this;return/*#__PURE__*/React.createElement(\"div\",{style:{paddingTop:'80px'}},/*#__PURE__*/React.createElement(DownloadApp,null),/*#__PURE__*/React.createElement(\"h2\",{style:{height:'45px',lineHeight:'45px',paddingLeft:'15px',fontSize:'15px'}},\"\\u8F66\\u578B\\u5217\\u8868\"),/*#__PURE__*/React.createElement(\"ul\",{className:styles.year},this.state.allYear.map(function(item,index){return/*#__PURE__*/React.createElement(\"li\",{onClick:function onClick(){_this3.changeYear(item,index);},style:_this3.state.currentIndex===index?{\"color\":'#000',fontSize:'15px'}:{},key:item},item);})),/*#__PURE__*/React.createElement(\"ul\",{className:styles.type},this.state.typeList.map(function(item){return/*#__PURE__*/React.createElement(\"li\",{key:item.id},/*#__PURE__*/React.createElement(\"h3\",{style:{marginBottom:'15px',fontSize:'15px'}},item.type),/*#__PURE__*/React.createElement(\"div\",{style:{marginBottom:'10px'}},/*#__PURE__*/React.createElement(\"span\",{style:{color:'#9E9E9E',fontSize:'12px'}},\"\\u6307\\u5BFC\\u4EF7: \"),/*#__PURE__*/React.createElement(\"span\",{style:{color:'#000',fontWeight:'700',fontSize:'12px'}},\" \",item.guidePrice,\"\\u4E07\\u5143\")),/*#__PURE__*/React.createElement(\"div\",{className:styles.btn,onClick:function onClick(){return _this3.props.history.push(\"/icon/parameter?id=\".concat(item.id));},style:{color:'#2B79FF',textAlign:'center',height:'50px',lineHeight:'50px'}},\"\\u67E5\\u770B\\u914D\\u7F6E\"));})));}}]);return CarType;}(React.Component);export{CarType as default};","map":{"version":3,"sources":["D:/myCompany/zhongdianqiche/mobile/src/views/TabThird/Icon/Cartype/index.js"],"names":["React","url","DownloadApp","styles","axios","CarType","state","id","parse","props","location","search","query","allYear","years","currentIndex","typeList","getYearList","getTypeList","post","series","res","data","unshift","setState","item","index","paddingTop","height","lineHeight","paddingLeft","fontSize","year","map","changeYear","type","marginBottom","color","fontWeight","guidePrice","btn","history","push","textAlign","Component"],"mappings":"+sBAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,GAAP,KAAgB,KAAhB,CACA;AACA,MAAOC,CAAAA,WAAP,KAAwB,oCAAxB,CACA;AACA,MAAOC,CAAAA,MAAP,KAAmB,oBAAnB,CACA,MAAOC,CAAAA,KAAP,KAAkB,0BAAlB,C,GAEqBC,CAAAA,O,2UACnBC,K,CAAQ,CACNC,EAAE,CAAEN,GAAG,CAACO,KAAJ,CAAU,MAAKC,KAAL,CAAWC,QAAX,CAAoBC,MAA9B,CAAsC,IAAtC,EAA4CC,KAA5C,CAAkDL,EADhD,CAEN;AACAM,OAAO,CAAE,EAHH,CAINC,KAAK,CAAE,EAJD,CAKNC,YAAY,CAAE,CALR,CAMN;AACAC,QAAQ,CAAE,EAPJ,C,gGASa,CACnB;AACA,KAAKC,WAAL,GACA;AACA,KAAKC,WAAL,GACD,CACD;kSAE8Bd,CAAAA,KAAK,CAACe,IAAN,CAAW,YAAX,CAAyB,CACnDC,MAAM,CAAE,KAAKd,KAAL,CAAWC,EADgC,CAAzB,C,wCAAdc,G,mBAANC,I,CAGRD,GAAG,CAACE,OAAJ,CAAY,MAAZ,EACA,KAAKC,QAAL,CAAc,CAAEX,OAAO,CAAEQ,GAAX,CAAd,E,sJAEF;ySAE8BjB,CAAAA,KAAK,CAACe,IAAN,CAAW,kBAAX,CAA+B,CACzDC,MAAM,CAAE,KAAKd,KAAL,CAAWC,EADsC,CAEzDO,KAAK,CAAE,KAAKR,KAAL,CAAWQ,KAFuC,CAA/B,C,0CAAdO,G,oBAANC,I,CAIR,KAAKE,QAAL,CAAc,CAAER,QAAQ,CAAEK,GAAZ,CAAd,E,wJAEF;8CACYI,I,CAAKC,K,CAAO,iBACtB,KAAKF,QAAL,CAAc,CAAET,YAAY,CAAEW,KAAhB,CAAuBZ,KAAK,CAAEW,IAA9B,CAAd,CAAoD,UAAM,CACxD,MAAI,CAACP,WAAL,GACD,CAFD,EAGD,C,uCACS,iBACR,mBACE,2BAAK,KAAK,CAAE,CAACS,UAAU,CAAE,MAAb,CAAZ,eAEE,oBAAC,WAAD,MAFF,cAIE,0BAAI,KAAK,CAAE,CAACC,MAAM,CAAE,MAAT,CAAiBC,UAAU,CAAE,MAA7B,CAAqCC,WAAW,CAAE,MAAlD,CAA0DC,QAAQ,CAAE,MAApE,CAAX,6BAJF,cAME,0BAAI,SAAS,CAAE5B,MAAM,CAAC6B,IAAtB,EAEI,KAAK1B,KAAL,CAAWO,OAAX,CAAmBoB,GAAnB,CAAuB,SAACR,IAAD,CAAMC,KAAN,CAAgB,CACrC,mBAAO,0BAAI,OAAO,CAAE,kBAAM,CAAC,MAAI,CAACQ,UAAL,CAAgBT,IAAhB,CAAqBC,KAArB,EAA4B,CAAhD,CAAkD,KAAK,CAAE,MAAI,CAACpB,KAAL,CAAWS,YAAX,GAA4BW,KAA5B,CAAoC,CAAE,QAAS,MAAX,CAAmBK,QAAQ,CAAE,MAA7B,CAApC,CAA2E,EAApI,CAAwI,GAAG,CAAEN,IAA7I,EAAoJA,IAApJ,CAAP,CACD,CAFD,CAFJ,CANF,cAcE,0BAAI,SAAS,CAAEtB,MAAM,CAACgC,IAAtB,EAEI,KAAK7B,KAAL,CAAWU,QAAX,CAAoBiB,GAApB,CAAwB,SAAAR,IAAI,CAAI,CAC9B,mBAAO,0BAAI,GAAG,CAAEA,IAAI,CAAClB,EAAd,eACL,0BAAI,KAAK,CAAE,CAAC6B,YAAY,CAAE,MAAf,CAAuBL,QAAQ,CAAE,MAAjC,CAAX,EAAsDN,IAAI,CAACU,IAA3D,CADK,cAEL,2BAAK,KAAK,CAAE,CAACC,YAAY,CAAE,MAAf,CAAZ,eACE,4BAAM,KAAK,CAAE,CAACC,KAAK,CAAE,SAAR,CAAmBN,QAAQ,CAAE,MAA7B,CAAb,yBADF,cAEE,4BAAM,KAAK,CAAE,CAACM,KAAK,CAAE,MAAR,CAAgBC,UAAU,CAAE,KAA5B,CAAmCP,QAAQ,CAAE,MAA7C,CAAb,MAAqEN,IAAI,CAACc,UAA1E,gBAFF,CAFK,cAML,2BAAK,SAAS,CAAEpC,MAAM,CAACqC,GAAvB,CAA4B,OAAO,CAAE,yBAAM,CAAA,MAAI,CAAC/B,KAAL,CAAWgC,OAAX,CAAmBC,IAAnB,8BAA8CjB,IAAI,CAAClB,EAAnD,EAAN,EAArC,CAAqG,KAAK,CAAE,CAAC8B,KAAK,CAAE,SAAR,CAAmBM,SAAS,CAAE,QAA9B,CAAwCf,MAAM,CAAE,MAAhD,CAAwDC,UAAU,CAAE,MAApE,CAA5G,6BANK,CAAP,CAQD,CATD,CAFJ,CAdF,CADF,CA+BD,C,qBAtEkC7B,KAAK,CAAC4C,S,SAAtBvC,O","sourcesContent":["import React from 'react'\r\nimport url from 'url'\r\n// 组件\r\nimport DownloadApp from '../../../../components/DownloadApp'\r\n// 样式\r\nimport styles from './index.module.css'\r\nimport axios from '../../../../untils/axios'\r\n\r\nexport default class CarType extends React.Component {\r\n  state = {\r\n    id: url.parse(this.props.location.search, true).query.id,\r\n    // 年限\r\n    allYear: [],\r\n    years: '',\r\n    currentIndex: 0,\r\n    // 车型\r\n    typeList: []\r\n  }\r\n  componentDidMount () {\r\n    // 获取年限\r\n    this.getYearList()\r\n    // 获取车型列表\r\n    this.getTypeList()\r\n  }\r\n  // 获取年限\r\n  async getYearList () {\r\n    const { data: res } = await axios.post('/car/years', {\r\n      series: this.state.id\r\n    })\r\n    res.unshift('全部在售')\r\n    this.setState({ allYear: res })\r\n  }\r\n  // 获取车型列表\r\n  async getTypeList () {\r\n    const { data: res } = await axios.post('/car/showCarType', {\r\n      series: this.state.id,\r\n      years: this.state.years \r\n    })\r\n    this.setState({ typeList: res })\r\n  }\r\n  // 切换年限\r\n  changeYear (item,index) {\r\n    this.setState({ currentIndex: index, years: item }, () => {\r\n      this.getTypeList()\r\n    })\r\n  }\r\n  render () {\r\n    return (\r\n      <div style={{paddingTop: '80px'}}>\r\n        {/* 下载APP */}\r\n        <DownloadApp></DownloadApp>\r\n        {/* 车型列表 */}\r\n        <h2 style={{height: '45px', lineHeight: '45px', paddingLeft: '15px', fontSize: '15px'}}>车型列表</h2>\r\n        {/* 全部在售 */}\r\n        <ul className={styles.year}>\r\n          {\r\n            this.state.allYear.map((item,index) => {\r\n              return <li onClick={() => {this.changeYear(item,index)}} style={this.state.currentIndex === index ? { \"color\": '#000', fontSize: '15px'} : {}} key={item}>{item}</li>\r\n            })\r\n          }\r\n        </ul>\r\n        {/* 车型列表 */}\r\n        <ul className={styles.type}>\r\n          {\r\n            this.state.typeList.map(item => {\r\n              return <li key={item.id}>\r\n                <h3 style={{marginBottom: '15px', fontSize: '15px'}}>{item.type}</h3>\r\n                <div style={{marginBottom: '10px'}}>\r\n                  <span style={{color: '#9E9E9E', fontSize: '12px'}}>指导价: </span>\r\n                  <span style={{color: '#000', fontWeight: '700', fontSize: '12px'}}> {item.guidePrice}万元</span>\r\n                </div>\r\n                <div className={styles.btn} onClick={() => this.props.history.push(`/icon/parameter?id=${item.id}`)} style={{color: '#2B79FF', textAlign: 'center', height: '50px', lineHeight: '50px'}}>查看配置</div>\r\n              </li>\r\n            })\r\n          }\r\n        </ul>\r\n      </div>\r\n    )\r\n  }\r\n}"]},"metadata":{},"sourceType":"module"}