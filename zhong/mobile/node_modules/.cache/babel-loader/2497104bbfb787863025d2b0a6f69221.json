{"ast":null,"code":"import \"antd-mobile/lib/toast/style/css\";\nimport _Toast from \"antd-mobile/lib/toast\";\nimport React, { useEffect } from 'react';\nimport axios from '../../../untils/axios';\nimport { wexinPay } from '../../../untils/wx';\nimport { useHistory } from 'react-router-dom';\n\nconst Pay = props => {\n  const u = JSON.parse(props.match.params.u);\n  const history = useHistory();\n\n  const getPay = async () => {\n    const {\n      data: res\n    } = await axios.post('/gather/addSign', { ...u,\n      code: window.location.href,\n      gatherId: u.id\n    });\n    wexinPay({\n      appId: res.appId,\n      nonceStr: res.nonceStr,\n      package: res.package,\n      paySign: res.paySign,\n      signType: res.signType,\n      timeStamp: res.timeStamp\n    }, () => {\n      _Toast.fail('支付成功', 2);\n\n      history.goBack();\n    });\n  };\n\n  useEffect(() => {\n    getPay();\n  }, []);\n  return /*#__PURE__*/React.createElement(React.Fragment, null);\n};\n\nexport default Pay;","map":{"version":3,"sources":["D:/myCompany/zhongdianqiche/mobile/src/views/Activity/Pay/index.js"],"names":["React","useEffect","axios","wexinPay","useHistory","Pay","props","u","JSON","parse","match","params","history","getPay","data","res","post","code","window","location","href","gatherId","id","appId","nonceStr","package","paySign","signType","timeStamp","fail","goBack"],"mappings":";;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AAEA,OAAOC,KAAP,MAAkB,uBAAlB;AACA,SAASC,QAAT,QAAyB,oBAAzB;AACA,SAASC,UAAT,QAA2B,kBAA3B;;AAEA,MAAMC,GAAG,GAAIC,KAAD,IAAW;AACrB,QAAMC,CAAC,GAAGC,IAAI,CAACC,KAAL,CAAWH,KAAK,CAACI,KAAN,CAAYC,MAAZ,CAAmBJ,CAA9B,CAAV;AACA,QAAMK,OAAO,GAAGR,UAAU,EAA1B;;AACA,QAAMS,MAAM,GAAG,YAAY;AACzB,UAAM;AAAEC,MAAAA,IAAI,EAAEC;AAAR,QAAgB,MAAMb,KAAK,CAACc,IAAN,CAAW,iBAAX,EAA8B,EAAE,GAAGT,CAAL;AAAQU,MAAAA,IAAI,EAAEC,MAAM,CAACC,QAAP,CAAgBC,IAA9B;AAAoCC,MAAAA,QAAQ,EAAEd,CAAC,CAACe;AAAhD,KAA9B,CAA5B;AACAnB,IAAAA,QAAQ,CACN;AACEoB,MAAAA,KAAK,EAAER,GAAG,CAACQ,KADb;AAEEC,MAAAA,QAAQ,EAAET,GAAG,CAACS,QAFhB;AAGEC,MAAAA,OAAO,EAAEV,GAAG,CAACU,OAHf;AAIEC,MAAAA,OAAO,EAAEX,GAAG,CAACW,OAJf;AAKEC,MAAAA,QAAQ,EAAEZ,GAAG,CAACY,QALhB;AAMEC,MAAAA,SAAS,EAAEb,GAAG,CAACa;AANjB,KADM,EASN,MAAM;AACJ,aAAMC,IAAN,CAAW,MAAX,EAAmB,CAAnB;;AACAjB,MAAAA,OAAO,CAACkB,MAAR;AACD,KAZK,CAAR;AAcD,GAhBD;;AAiBA7B,EAAAA,SAAS,CAAC,MAAM;AACdY,IAAAA,MAAM;AACP,GAFQ,EAEN,EAFM,CAAT;AAGA,sBACE,yCADF;AAGD,CA1BD;;AA4BA,eAAeR,GAAf","sourcesContent":["import React, { useEffect } from 'react'\r\nimport { Toast } from 'antd-mobile'\r\nimport axios from '../../../untils/axios'\r\nimport { wexinPay } from '../../../untils/wx'\r\nimport { useHistory } from 'react-router-dom'\r\n\r\nconst Pay = (props) => {\r\n  const u = JSON.parse(props.match.params.u)\r\n  const history = useHistory()\r\n  const getPay = async () => {\r\n    const { data: res } = await axios.post('/gather/addSign', { ...u, code: window.location.href, gatherId: u.id })\r\n    wexinPay(\r\n      {\r\n        appId: res.appId,\r\n        nonceStr: res.nonceStr,\r\n        package: res.package,\r\n        paySign: res.paySign,\r\n        signType: res.signType,\r\n        timeStamp: res.timeStamp\r\n      },\r\n      () => {\r\n        Toast.fail('支付成功', 2)\r\n        history.goBack()\r\n      }\r\n    )\r\n  }\r\n  useEffect(() => {\r\n    getPay()\r\n  }, [])\r\n  return (\r\n    <></>\r\n  )\r\n}\r\n\r\nexport default Pay\r\n"]},"metadata":{},"sourceType":"module"}