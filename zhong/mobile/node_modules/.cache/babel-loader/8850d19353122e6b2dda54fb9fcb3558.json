{"ast":null,"code":"import\"antd-mobile/lib/button/style/css\";import _Button from\"antd-mobile/lib/button\";import _regeneratorRuntime from\"D:\\\\myCompany\\\\zhongdianqiche\\\\mobile\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"D:\\\\myCompany\\\\zhongdianqiche\\\\mobile\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"D:\\\\myCompany\\\\zhongdianqiche\\\\mobile\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"D:\\\\myCompany\\\\zhongdianqiche\\\\mobile\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"D:\\\\myCompany\\\\zhongdianqiche\\\\mobile\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"D:\\\\myCompany\\\\zhongdianqiche\\\\mobile\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from'react';// 组件\nimport DownloadApp from'../../../components/DownloadApp';// axios\nimport axios from'../../../untils/axios';import url from'url';// 样式\nimport styles from'./index.module.css';var InforDetails=/*#__PURE__*/function(_React$Component){_inherits(InforDetails,_React$Component);var _super=_createSuper(InforDetails);function InforDetails(){var _this;_classCallCheck(this,InforDetails);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={// 视频内容\ndetailsObj:{},userObj:{},time:'',label:'',id:url.parse(_this.props.location.search,true).query.id,// 相关推荐\nrecommendList:[],// 评论\ncommentList:[]};_this.handle=function(type,id){if(type==='重点号资讯'){_this.props.history.push(\"/infor_details?id=\".concat(id));}else{_this.props.history.push(\"/video_details?id=\".concat(id));}};return _this;}_createClass(InforDetails,[{key:\"componentDidMount\",value:function componentDidMount(){// 获取资讯详情信息\nthis.getDetails();// 获取评论列表\nthis.getCommentList();}// 组件跟新时的钩子\n},{key:\"componentWillReceiveProps\",value:function(){var _componentWillReceiveProps=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(nextProps){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return this.setState({id:url.parse(nextProps.location.search,true).query.id});case 2:// 获取资讯详情信息\nthis.getDetails();// 获取评论列表\nthis.getCommentList();case 4:case\"end\":return _context.stop();}}},_callee,this);}));function componentWillReceiveProps(_x){return _componentWillReceiveProps.apply(this,arguments);}return componentWillReceiveProps;}()// 获取资讯详情信息\n},{key:\"getDetails\",value:function(){var _getDetails=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var _this2=this;var _yield$axios$post,res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return axios.post('/keyN/qx',{id:this.state.id});case 2:_yield$axios$post=_context2.sent;res=_yield$axios$post.data;this.setState({detailsObj:res.object,userObj:res.key,time:res.postDate,label:res.label},function(){_this2.getRecommendList();});case 5:case\"end\":return _context2.stop();}}},_callee2,this);}));function getDetails(){return _getDetails.apply(this,arguments);}return getDetails;}()// 获取推荐列表\n},{key:\"getRecommendList\",value:function(){var _getRecommendList=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var _yield$axios$post2,res;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return axios.post('/keyN/tj',{label:this.state.label});case 2:_yield$axios$post2=_context3.sent;res=_yield$axios$post2.data;this.setState({recommendList:res});case 5:case\"end\":return _context3.stop();}}},_callee3,this);}));function getRecommendList(){return _getRecommendList.apply(this,arguments);}return getRecommendList;}()// 获取评论列表\n},{key:\"getCommentList\",value:function(){var _getCommentList=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){var _yield$axios$post3,res;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return axios.post('/keyN/showCom',{id:this.state.id});case 2:_yield$axios$post3=_context4.sent;res=_yield$axios$post3.data;this.setState({commentList:res});case 5:case\"end\":return _context4.stop();}}},_callee4,this);}));function getCommentList(){return _getCommentList.apply(this,arguments);}return getCommentList;}()// 点击相关推荐\n},{key:\"render\",value:function render(){var _this3=this;return/*#__PURE__*/React.createElement(\"div\",{style:{paddingTop:'70px'}},/*#__PURE__*/React.createElement(DownloadApp,null),/*#__PURE__*/React.createElement(\"div\",{className:styles.contain},/*#__PURE__*/React.createElement(\"h2\",{style:{'wordWrap':'break-word',letterSpacing:'3px'}},this.state.detailsObj.title),/*#__PURE__*/React.createElement(\"div\",{style:{color:'#9E9E9E',fontSize:'15px',height:'50px',lineHeight:'50px'}},this.state.time),/*#__PURE__*/React.createElement(\"div\",{className:styles.user},/*#__PURE__*/React.createElement(\"img\",{style:{width:'42px',height:'42px',marginRight:'20px',borderRadius:'50%'},alt:\"\",src:this.state.userObj.headPic}),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{style:{fontSize:'20px',marginBottom:'10px'}},this.state.userObj.name))),/*#__PURE__*/React.createElement(\"main\",{className:styles.main,dangerouslySetInnerHTML:{__html:this.state.detailsObj.text}})),/*#__PURE__*/React.createElement(\"div\",{className:styles.recommend},/*#__PURE__*/React.createElement(\"h2\",{style:{fontWeight:400}},\"\\u76F8\\u5173\\u63A8\\u8350\"),/*#__PURE__*/React.createElement(\"ul\",null,this.state.recommendList.map(function(item){return/*#__PURE__*/React.createElement(\"li\",{onClick:function onClick(){_this3.handle(item.type,item.id);},key:item.id,style:{marginTop:'15px'}},/*#__PURE__*/React.createElement(\"img\",{style:{width:'140px',height:'70px'},src:item.object.coverPic,alt:\"\"}),/*#__PURE__*/React.createElement(\"div\",{style:{marginLeft:'15px'},className:styles.userTitle},/*#__PURE__*/React.createElement(\"h4\",{style:{fontWeight:400,fontSize:'20x'}},item.title),/*#__PURE__*/React.createElement(\"span\",{style:{color:'#888',fontSize:'13px'}},item.key.name)));}))),/*#__PURE__*/React.createElement(\"div\",{className:styles.comment},/*#__PURE__*/React.createElement(\"h2\",{style:{fontWeight:400,marginBottom:'20px'}},\"\\u76F8\\u5173\\u8BC4\\u8BBA\"),/*#__PURE__*/React.createElement(\"ul\",null,this.state.commentList.map(function(item){return/*#__PURE__*/React.createElement(\"li\",{key:item.id},/*#__PURE__*/React.createElement(\"img\",{alt:\"\",src:item.userHeadPic,style:{width:'40px',height:'40px',borderRadius:'50%',marginRight:'10px'}}),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h4\",null,item.username),/*#__PURE__*/React.createElement(\"p\",{style:{margin:'5px 0',color:'#888'}},item.text)));})),/*#__PURE__*/React.createElement(_Button,{onClick:function onClick(){return _this3.props.history.push('/tab/mobile');},style:{marginTop:'10px'},type:\"primary\"},\"\\u4E0B\\u8F7D\\u91CD\\u70B9APP \\u67E5\\u770B\\u66F4\\u591A\\u8BC4\\u8BBA\")));}}]);return InforDetails;}(React.Component);export{InforDetails as default};","map":null,"metadata":{},"sourceType":"module"}