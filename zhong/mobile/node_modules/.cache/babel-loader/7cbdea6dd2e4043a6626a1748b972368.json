{"ast":null,"code":"import _regeneratorRuntime from\"D:\\\\myCompany\\\\zhongdianqiche\\\\mobile\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _toConsumableArray from\"D:\\\\myCompany\\\\zhongdianqiche\\\\mobile\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _asyncToGenerator from\"D:\\\\myCompany\\\\zhongdianqiche\\\\mobile\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"D:\\\\myCompany\\\\zhongdianqiche\\\\mobile\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"D:\\\\myCompany\\\\zhongdianqiche\\\\mobile\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"D:\\\\myCompany\\\\zhongdianqiche\\\\mobile\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"D:\\\\myCompany\\\\zhongdianqiche\\\\mobile\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from'react';// axios\nimport axios from'../../../untils/axios';// 样式\nimport styles from'./index.module.css';import'./index.css';var tabs=['大咖评车','用车宝典','技术解读','玩车行家','行业分析','自驾旅行','新能源车','热点聚焦','汽车文化','车展'];var Program=/*#__PURE__*/function(_React$Component){_inherits(Program,_React$Component);var _super=_createSuper(Program);function Program(props){var _this;_classCallCheck(this,Program);_this=_super.call(this,props);_this.handle=function(type,id){if(type==='重点号资讯'){_this.props.history.push(\"/infor_details?id=\".concat(id));}else{_this.props.history.push(\"/video_details?id=\".concat(id));}};_this.state={windowHeight:0,label:sessionStorage.getItem('label')||'大咖评车',page:0,currentIndex:JSON.parse(sessionStorage.getItem('index'))||0,list:[]// 处理后的数据\n};return _this;}_createClass(Program,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;if(window.innerHeight>650){this.setState({windowHeight:1});}// 获取数据列表\nthis.getList();// 监听滚动事件\nwindow.onscroll=function(){var winHeight=Math.ceil(window.scrollY+window.innerHeight);if(winHeight>=document.body.scrollHeight-50){setTimeout(function(){_this2.setState({page:_this2.state.page+1},/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _yield$axios$post,res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.post('/keyN/lm',{label:_this2.state.label,pageNo:_this2.state.page,pageSize:2});case 2:_yield$axios$post=_context.sent;res=_yield$axios$post.data;_this2.setState({list:[].concat(_toConsumableArray(_this2.state.list),_toConsumableArray(res))});case 5:case\"end\":return _context.stop();}}},_callee);})));},1000);}};}// 获取列表信息\n},{key:\"getList\",value:function(){var _getList=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var _yield$axios$post2,res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return axios.post('/keyN/lm',{label:this.state.label,pageNo:this.state.page,pageSize:14});case 2:_yield$axios$post2=_context2.sent;res=_yield$axios$post2.data;this.setState({list:res});case 5:case\"end\":return _context2.stop();}}},_callee2,this);}));function getList(){return _getList.apply(this,arguments);}return getList;}()// 切换左侧tab栏\n},{key:\"changeTabItem\",value:function changeTabItem(item,index){var _this3=this;sessionStorage.setItem('label',item);sessionStorage.setItem('index',JSON.stringify(index));this.setState({currentIndex:index,label:item,page:0},function(){_this3.getList();});}// 跳转\n},{key:\"render\",value:function render(){var _this4=this;return/*#__PURE__*/React.createElement(\"div\",{className:styles.contain,style:{paddingBottom:'34px'}},/*#__PURE__*/React.createElement(\"aside\",{className:styles.aside},tabs.map(function(item,index){return/*#__PURE__*/React.createElement(\"div\",{onClick:function onClick(){_this4.changeTabItem(item,index);},className:_this4.state.windowHeight===0?'demo':'demo1',style:_this4.state.currentIndex===index?{backgroundColor:'#fff'}:{},key:item},item);})),/*#__PURE__*/React.createElement(\"ul\",{className:styles.main},this.state.list.map(function(item,index){return/*#__PURE__*/React.createElement(\"li\",{key:index,onClick:function onClick(){_this4.handle(item.type,item.id);}},/*#__PURE__*/React.createElement(\"img\",{alt:\"\",style:{marginRight:'15px',width:'100px',height:'100%'},src:item.object.coverPic}),/*#__PURE__*/React.createElement(\"div\",{className:styles.title,style:{width:'100%'}},/*#__PURE__*/React.createElement(\"div\",{className:styles.one},item.title),/*#__PURE__*/React.createElement(\"div\",{className:styles.two},item.key.name)));})));}}]);return Program;}(React.Component);export default Program;","map":{"version":3,"sources":["D:/myCompany/zhongdianqiche/mobile/src/views/TabSecond/Program/index.js"],"names":["React","axios","styles","tabs","Program","props","handle","type","id","history","push","state","windowHeight","label","sessionStorage","getItem","page","currentIndex","JSON","parse","list","window","innerHeight","setState","getList","onscroll","winHeight","Math","ceil","scrollY","document","body","scrollHeight","setTimeout","post","pageNo","pageSize","res","data","item","index","setItem","stringify","contain","paddingBottom","aside","map","changeTabItem","backgroundColor","main","marginRight","width","height","object","coverPic","title","one","two","key","name","Component"],"mappings":"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","sourcesContent":["import React from 'react'\r\n// axios\r\nimport axios from '../../../untils/axios'\r\n// 样式\r\nimport styles from './index.module.css'\r\nimport './index.css'\r\n\r\nconst tabs = ['大咖评车', '用车宝典', '技术解读', '玩车行家', '行业分析', '自驾旅行', '新能源车', '热点聚焦', '汽车文化', '车展']\r\n\r\nclass Program extends React.Component {\r\n  constructor (props) {\r\n    super(props)\r\n    this.state = {\r\n      windowHeight: 0,\r\n      label: sessionStorage.getItem('label') || '大咖评车',\r\n      page: 0,\r\n      currentIndex: JSON.parse(sessionStorage.getItem('index')) || 0,\r\n      list: [] // 处理后的数据\r\n    }\r\n  }\r\n  componentDidMount () {\r\n    if (window.innerHeight > 650) {\r\n      this.setState({ windowHeight: 1 })\r\n    }\r\n    // 获取数据列表\r\n    this.getList()\r\n    // 监听滚动事件\r\n    window.onscroll = () => {\r\n      let winHeight = Math.ceil(window.scrollY + window.innerHeight)\r\n      if (winHeight >= document.body.scrollHeight - 50) {\r\n        setTimeout(() => {\r\n          this.setState({ page: this.state.page + 1 }, async () => {\r\n            const { data: res } = await axios.post('/keyN/lm', {\r\n              label: this.state.label,\r\n              pageNo: this.state.page,\r\n              pageSize: 2\r\n            })\r\n            this.setState({ list: [...this.state.list,...res] })\r\n          })\r\n        }, 1000)\r\n      }\r\n    }\r\n  }\r\n  // 获取列表信息\r\n  async getList () {\r\n    const { data: res } = await axios.post('/keyN/lm', {\r\n      label: this.state.label,\r\n      pageNo: this.state.page,\r\n      pageSize: 14\r\n    })\r\n    this.setState({ list: res })\r\n  }\r\n  // 切换左侧tab栏\r\n  changeTabItem (item, index) {\r\n    sessionStorage.setItem('label', item)\r\n    sessionStorage.setItem('index', JSON.stringify(index))\r\n    this.setState({\r\n      currentIndex: index,\r\n      label: item,\r\n      page: 0\r\n    }, () => {\r\n      this.getList()\r\n    })\r\n  }\r\n  // 跳转\r\n  handle = (type, id) => {\r\n    if (type === '重点号资讯') {\r\n      this.props.history.push(`/infor_details?id=${id}`)\r\n    } else {\r\n      this.props.history.push(`/video_details?id=${id}`)\r\n    }\r\n  }\r\n  render () {\r\n    return (\r\n      <div className={styles.contain} style={{paddingBottom: '34px'}}>\r\n        <aside className={styles.aside}>\r\n          {\r\n            tabs.map((item,index) => {\r\n              return <div onClick={() => {this.changeTabItem(item,index)}} className={this.state.windowHeight === 0 ? 'demo' : 'demo1'}  style={this.state.currentIndex === index ? {backgroundColor: '#fff'} : {}} key={item}>{item}</div>\r\n            })\r\n          }\r\n        </aside>\r\n        <ul className={styles.main}>\r\n          {\r\n            this.state.list.map((item,index) => {\r\n              return <li key={index} onClick={() => {this.handle(item.type, item.id)}}>\r\n                <img alt=\"\" style={{marginRight: '15px', width: '100px', height: '100%'}} src={item.object.coverPic} />\r\n                <div className={styles.title} style={{width: '100%'}}>\r\n                  <div className={styles.one}>{item.title}</div>\r\n                  <div className={styles.two}>{item.key.name}</div>\r\n                </div>\r\n              </li>\r\n            })\r\n          }\r\n        </ul>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Program"]},"metadata":{},"sourceType":"module"}