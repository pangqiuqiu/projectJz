{"ast":null,"code":"import _regeneratorRuntime from\"D:\\\\myCompany\\\\zhongdianqiche\\\\mobile\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"D:\\\\myCompany\\\\zhongdianqiche\\\\mobile\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"D:\\\\myCompany\\\\zhongdianqiche\\\\mobile\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"D:\\\\myCompany\\\\zhongdianqiche\\\\mobile\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"D:\\\\myCompany\\\\zhongdianqiche\\\\mobile\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"D:\\\\myCompany\\\\zhongdianqiche\\\\mobile\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from'react';import url from'url';// 图片预览和懒加载\nimport WxImageViewer from'react-wx-images-viewer';// axios\nimport axios from'../../../../untils/axios';// 样式\nimport styles from'./index.module.css';var Picture=/*#__PURE__*/function(_React$Component){_inherits(Picture,_React$Component);var _super=_createSuper(Picture);function Picture(){var _this;_classCallCheck(this,Picture);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={id:url.parse(_this.props.location.search,true).query.id,type:['外观','内饰','空间'],// 标题\ncurrentIndex:0,place:'外观',picList:[],// 图片数组\nindex:0,isOpen:false};_this.onClose=function(){_this.setState({isOpen:false});};return _this;}_createClass(Picture,[{key:\"componentDidMount\",value:function componentDidMount(){// 获取图片信息\nthis.getPhoto();}// 获取图片信息\n},{key:\"getPhoto\",value:function(){var _getPhoto=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _yield$axios$post,res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.post('/pic/picList',{series:this.state.id,place:this.state.place});case 2:_yield$axios$post=_context.sent;res=_yield$axios$post.data;this.setState({picList:res});case 5:case\"end\":return _context.stop();}}},_callee,this);}));function getPhoto(){return _getPhoto.apply(this,arguments);}return getPhoto;}()// 切换图片分类\n},{key:\"changePicture\",value:function changePicture(item,index){var _this2=this;this.setState({currentIndex:index,place:item},function(){_this2.getPhoto();});}},{key:\"openViewer\",value:function openViewer(index){this.setState({index:index,isOpen:true});}},{key:\"render\",value:function render(){var _this3=this;var _this$state=this.state,index=_this$state.index,isOpen=_this$state.isOpen;return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h2\",{style:{height:'50px',lineHeight:'50px',backgroundColor:'#fff',padding:'0 20px',position:'fixed',width:'100%'}},this.state.id),/*#__PURE__*/React.createElement(\"ul\",{className:styles.typeList},this.state.type.map(function(item,index){return/*#__PURE__*/React.createElement(\"li\",{onClick:_this3.changePicture.bind(_this3,item,index),style:_this3.state.currentIndex===index?{'color':'rgb(43, 121, 255)'}:{},key:item},item);})),/*#__PURE__*/React.createElement(\"div\",{style:{overflow:'hidden'}},/*#__PURE__*/React.createElement(\"div\",{className:styles.image,style:{marginTop:'100px'}},this.state.picList.map(function(item,index){return/*#__PURE__*/React.createElement(\"img\",{src:item,className:styles.itemImage,key:item,style:{width:'30%'},alt:\"\",onClick:_this3.openViewer.bind(_this3,index)});}))),isOpen?/*#__PURE__*/React.createElement(WxImageViewer,{onClose:this.onClose,urls:this.state.picList,index:index}):\"\");}}]);return Picture;}(React.Component);export{Picture as default};","map":{"version":3,"sources":["D:/myCompany/zhongdianqiche/mobile/src/views/TabThird/Icon/Picture/index.js"],"names":["React","url","WxImageViewer","axios","styles","Picture","state","id","parse","props","location","search","query","type","currentIndex","place","picList","index","isOpen","onClose","setState","getPhoto","post","series","res","data","item","height","lineHeight","backgroundColor","padding","position","width","typeList","map","changePicture","bind","overflow","image","marginTop","itemImage","openViewer","Component"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport url from 'url'\r\n// 图片预览和懒加载\r\nimport WxImageViewer from 'react-wx-images-viewer'\r\n// axios\r\nimport axios from '../../../../untils/axios'\r\n// 样式\r\nimport styles from './index.module.css'\r\n\r\nexport default class Picture extends React.Component {\r\n  state = {\r\n    id: url.parse(this.props.location.search, true).query.id,\r\n    type: ['外观', '内饰', '空间'], // 标题\r\n    currentIndex: 0,\r\n    place: '外观',\r\n    picList: [], // 图片数组\r\n    index: 0,\r\n    isOpen: false\r\n  }\r\n  componentDidMount () {\r\n    // 获取图片信息\r\n    this.getPhoto()\r\n  }\r\n  // 获取图片信息\r\n  async getPhoto() {\r\n    const { data: res } = await axios.post('/pic/picList', {\r\n      series: this.state.id,\r\n      place: this.state.place\r\n    })\r\n    this.setState({ picList: res })\r\n  }\r\n  // 切换图片分类\r\n  changePicture (item,index) {\r\n    this.setState({ currentIndex: index, place: item }, () => {\r\n      this.getPhoto()\r\n    })\r\n  }\r\n  onClose = () => {\r\n    this.setState({ isOpen: false })\r\n  }\r\n  openViewer (index) {\r\n    this.setState({ index, isOpen: true })\r\n  }\r\n  render () {\r\n    const { index, isOpen } = this.state\r\n    return (\r\n      <div>\r\n        {/* 车系 */}\r\n        <h2 style={{height: '50px', lineHeight: '50px', backgroundColor: '#fff', padding: '0 20px', position: 'fixed', width: '100%'}}>{this.state.id}</h2>\r\n        {/* 分类 */}\r\n        <ul className={styles.typeList}>\r\n          {\r\n            this.state.type.map((item,index) => {\r\n              return <li onClick={this.changePicture.bind(this,item,index)} style={this.state.currentIndex === index ? {'color': 'rgb(43, 121, 255)'} : {}} key={item}>{item}</li>\r\n            })\r\n          }\r\n        </ul>\r\n        {/* 图片 */}\r\n        <div style={{overflow: 'hidden'}}>\r\n          <div className={styles.image} style={{marginTop: '100px'}}>\r\n            {\r\n              this.state.picList.map((item, index) => {\r\n                return <img src={item} className={styles.itemImage} key={item} style={{width: '30%'}} alt=\"\" onClick={this.openViewer.bind(this, index)} />\r\n              })\r\n            }\r\n          </div>\r\n        </div>\r\n        {\r\n          isOpen ? <WxImageViewer onClose={this.onClose} urls={this.state.picList} index={index} /> : \"\"\r\n        }\r\n      </div>\r\n    )\r\n  }\r\n}"]},"metadata":{},"sourceType":"module"}