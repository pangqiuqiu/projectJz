{"ast":null,"code":"import _regeneratorRuntime from\"D:\\\\myCompany\\\\zhongdianqiche\\\\mobile\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"D:\\\\myCompany\\\\zhongdianqiche\\\\mobile\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"D:\\\\myCompany\\\\zhongdianqiche\\\\mobile\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"D:\\\\myCompany\\\\zhongdianqiche\\\\mobile\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"D:\\\\myCompany\\\\zhongdianqiche\\\\mobile\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"D:\\\\myCompany\\\\zhongdianqiche\\\\mobile\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from'react';import url from'url';// 图片预览和懒加载\nimport WxImageViewer from'react-wx-images-viewer';// axios\nimport axios from'../../../../untils/axios';// 样式\nimport styles from'./index.module.css';var Picture=/*#__PURE__*/function(_React$Component){_inherits(Picture,_React$Component);var _super=_createSuper(Picture);function Picture(){var _this;_classCallCheck(this,Picture);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={id:url.parse(_this.props.location.search,true).query.id,type:['外观','内饰','空间'],// 标题\ncurrentIndex:0,place:'外观',picList:[],// 图片数组\nindex:0,isOpen:false};_this.onClose=function(){_this.setState({isOpen:false});};return _this;}_createClass(Picture,[{key:\"componentDidMount\",value:function componentDidMount(){// 获取图片信息\nthis.getPhoto();}// 获取图片信息\n},{key:\"getPhoto\",value:function(){var _getPhoto=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _yield$axios$post,res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.post('/pic/picList',{series:this.state.id,place:this.state.place});case 2:_yield$axios$post=_context.sent;res=_yield$axios$post.data;this.setState({picList:res});case 5:case\"end\":return _context.stop();}}},_callee,this);}));function getPhoto(){return _getPhoto.apply(this,arguments);}return getPhoto;}()// 切换图片分类\n},{key:\"changePicture\",value:function changePicture(item,index){var _this2=this;this.setState({currentIndex:index,place:item},function(){_this2.getPhoto();});}},{key:\"openViewer\",value:function openViewer(index){this.setState({index:index,isOpen:true});}},{key:\"render\",value:function render(){var _this3=this;var _this$state=this.state,index=_this$state.index,isOpen=_this$state.isOpen;return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h2\",{style:{height:'50px',lineHeight:'50px',backgroundColor:'#fff',padding:'0 20px',position:'fixed',width:'100%'}},this.state.id),/*#__PURE__*/React.createElement(\"ul\",{className:styles.typeList},this.state.type.map(function(item,index){return/*#__PURE__*/React.createElement(\"li\",{onClick:_this3.changePicture.bind(_this3,item,index),style:_this3.state.currentIndex===index?{'color':'rgb(43, 121, 255)'}:{},key:item},item);})),/*#__PURE__*/React.createElement(\"div\",{style:{overflow:'hidden'}},/*#__PURE__*/React.createElement(\"div\",{className:styles.image,style:{marginTop:'100px'}},this.state.picList.map(function(item,index){return/*#__PURE__*/React.createElement(\"img\",{src:item,className:styles.itemImage,key:item,style:{width:'30%'},alt:\"\",onClick:_this3.openViewer.bind(_this3,index)});}))),isOpen?/*#__PURE__*/React.createElement(WxImageViewer,{onClose:this.onClose,urls:this.state.picList,index:index}):\"\");}}]);return Picture;}(React.Component);export{Picture as default};","map":null,"metadata":{},"sourceType":"module"}