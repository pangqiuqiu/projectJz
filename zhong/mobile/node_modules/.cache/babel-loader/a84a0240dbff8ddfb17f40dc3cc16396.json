{"ast":null,"code":"import\"antd-mobile/lib/toast/style/css\";import _Toast from\"antd-mobile/lib/toast\";import _regeneratorRuntime from\"D:\\\\myCompany\\\\zhongdianqiche\\\\mobile\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"D:\\\\myCompany\\\\zhongdianqiche\\\\mobile\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"D:\\\\myCompany\\\\zhongdianqiche\\\\mobile\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"D:\\\\myCompany\\\\zhongdianqiche\\\\mobile\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"D:\\\\myCompany\\\\zhongdianqiche\\\\mobile\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"D:\\\\myCompany\\\\zhongdianqiche\\\\mobile\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from'react';import axios from'../../../untils/axios';// 组件\nimport styles from'./index.module.css';var Specialist=/*#__PURE__*/function(_React$Component){_inherits(Specialist,_React$Component);var _super=_createSuper(Specialist);function Specialist(){var _this;_classCallCheck(this,Specialist);_this=_super.call(this);_this.state={city:window.sessionStorage.getItem('city'),headList:[],// 推荐\nspeciList:[],// 特卖\n// 当前项\ncurrent:'',// 用户选择车系\nseries:'',// 车系索引\nseriesIndex:0,seriesIndexList:[]// 构建一个品牌被选中项的数组\n};return _this;}_createClass(Specialist,[{key:\"componentDidMount\",value:function componentDidMount(){// 获取推荐列表\nthis.getHeadList();// 特卖列表\nthis.getSpeciList();}// 获取推荐列表\n},{key:\"getHeadList\",value:function(){var _getHeadList=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _yield$axios$post,res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.post('/sale/getTmBrand',{city:this.state.city});case 2:_yield$axios$post=_context.sent;res=_yield$axios$post.data;this.setState({headList:res});case 5:case\"end\":return _context.stop();}}},_callee,this);}));function getHeadList(){return _getHeadList.apply(this,arguments);}return getHeadList;}()// 特卖列表\n},{key:\"getSpeciList\",value:function(){var _getSpeciList=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(brand){var _yield$axios$post2,res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return axios.post('/sale/getTm',{city:this.state.city,brand:brand});case 2:_yield$axios$post2=_context2.sent;res=_yield$axios$post2.data;this.setState({speciList:res,seriesIndexList:new Array(res.length).fill(0)});case 5:case\"end\":return _context2.stop();}}},_callee2,this);}));function getSpeciList(_x){return _getSpeciList.apply(this,arguments);}return getSpeciList;}()// 选择车系\n},{key:\"changeSeries\",value:function changeSeries(label,index1,index2){// 更新数组中被选中项目\nvar a=this.state.seriesIndexList;a[index1]=index2;this.setState({series:label,current:label,seriesIndex:index2,seriesIndexList:a});}// 我要询价\n},{key:\"btn\",value:function(){var _btn=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(children){var _this2=this;var ary;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:ary=children.filter(function(item){return item.label===_this2.state.series;});if(!(ary.length===0)){_context3.next=3;break;}return _context3.abrupt(\"return\",_Toast.fail('请选择相关车系',1));case 3:this.props.history.push(\"/specialist/myform?id=\".concat(this.state.series));case 4:case\"end\":return _context3.stop();}}},_callee3,this);}));function btn(_x2){return _btn.apply(this,arguments);}return btn;}()},{key:\"render\",value:function render(){var _this3=this;return/*#__PURE__*/React.createElement(\"div\",{style:{height:'100%',paddingBottom:'30px'}},/*#__PURE__*/React.createElement(\"ul\",{className:styles.hobbyList},/*#__PURE__*/React.createElement(\"li\",{onClick:function onClick(){return _this3.getSpeciList();}},\"\\u63A8\\u8350\"),this.state.headList.map(function(item){return/*#__PURE__*/React.createElement(\"li\",{onClick:function onClick(){return _this3.getSpeciList(item);},key:item},item);})),/*#__PURE__*/React.createElement(\"ul\",null,// this.state.speciList.map((item,index1) => {\n//   return <li key={item.label} style={{backgroundColor: '#fff', paddingBottom: '10px', marginBottom: '10px'}}>\n//     <h3 style={{height: '50px', lineHeight: '50px', padding: '0 15px'}}>{item.label}</h3>\n//     <div className={styles.item} style={{padding: '0 15px'}}>\n//       <div>\n//         {\n//           item.children.map((items,index2) => {\n//             return <div key={items.label}>\n//               <img alt=\"\" src={items.pic} style={this.state.seriesIndex === index2 ? {width: '50px', height: '50px', marginRight: '10px'} : {display: 'none', width: '50px', height: '50px', marginRight: '10px'}} />\n//               <span style={this.state.current === items.label ? {backgroundColor: '#108ee9', borderColor: '#108ee9', color: '#fff'} : {}} onClick={this.changeSeries.bind(this, items.label, index2)} size=\"small\" type=\"primary\" inline=\"true\">{items.label}</span>\n//             </div>\n//           })\n//         }\n//       </div>\n//     </div>\n//     <div style={{height: '1px', backgroundColor: '#eee', marginTop: '10px'}}></div>\n//     <div className={styles.btn} style={{width: '90px', height: '30px', backgroundColor: '#108ee9', color: '#fff', lineHeight: '30px', textAlign: 'center', marginRight: '15px', borderRadius: '3px'}} onClick={this.btn.bind(this, item.children)}>询价</div>\n//     <div style={{clear: 'both'}}></div>\n//   </li>\n// })\nthis.state.speciList.map(function(item,index1){return/*#__PURE__*/React.createElement(\"li\",{key:item.label,style:{backgroundColor:'#fff',paddingBottom:'10px',marginBottom:'10px'}},/*#__PURE__*/React.createElement(\"h3\",{style:{height:'50px',lineHeight:'50px',padding:'0 15px'}},item.label),/*#__PURE__*/React.createElement(\"div\",{className:styles.item,style:{padding:'0 15px'}},/*#__PURE__*/React.createElement(\"img\",{alt:\"\",src:item.children[_this3.state.seriesIndexList[index1]].pic}),/*#__PURE__*/React.createElement(\"div\",{className:styles.items},item.children.map(function(items,index2){return/*#__PURE__*/React.createElement(\"div\",{key:items.label},/*#__PURE__*/React.createElement(\"span\",{style:_this3.state.current===items.label?{backgroundColor:'#108ee9',borderColor:'#108ee9',color:'#fff'}:{},onClick:_this3.changeSeries.bind(_this3,items.label,index1,index2),inline:\"true\"},items.label));}))),/*#__PURE__*/React.createElement(\"div\",{style:{height:'1px',backgroundColor:'#eee',marginTop:'10px'}}),/*#__PURE__*/React.createElement(\"div\",{className:styles.btn,style:{width:'90px',height:'30px',backgroundColor:'#108ee9',color:'#fff',lineHeight:'30px',textAlign:'center',marginRight:'15px',borderRadius:'3px'},onClick:_this3.btn.bind(_this3,item.children)},\"\\u8BE2\\u4EF7\"),/*#__PURE__*/React.createElement(\"div\",{style:{clear:'both'}}));})));}}]);return Specialist;}(React.Component);export{Specialist as default};","map":null,"metadata":{},"sourceType":"module"}