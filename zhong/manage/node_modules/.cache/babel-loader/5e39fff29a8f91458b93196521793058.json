{"remainingRequest":"D:\\myCompany\\project\\aaa\\new\\node_modules\\babel-loader\\lib\\index.js!D:\\myCompany\\project\\aaa\\new\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\myCompany\\project\\aaa\\new\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\myCompany\\project\\aaa\\new\\src\\views\\adv\\Edit.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\myCompany\\project\\aaa\\new\\src\\views\\adv\\Edit.vue","mtime":1586828341700},{"path":"D:\\myCompany\\project\\aaa\\new\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\myCompany\\project\\aaa\\new\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\myCompany\\project\\aaa\\new\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\myCompany\\project\\aaa\\new\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiRDpcXG15Q29tcGFueVxccHJvamVjdFxcYWFhXFxuZXdcXG5vZGVfbW9kdWxlc1xcQGJhYmVsXFxydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIC8vIOW5v+WRiuS/oeaBrwogICAgICBhZHZPYmo6IHt9LAogICAgICAvLyDmj5DkuqTlkI7lj7AKICAgICAgZm9ybTogewogICAgICAgIHVybDogJycsCiAgICAgICAgcGljOiAnJywKICAgICAgICBpZDogJycKICAgICAgfQogICAgfTsKICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICAvLyDojrflj5blub/lkYrkv6Hmga8KICAgIHRoaXMuZ2V0QWR2KCk7IC8vIOiOt+WPluWbvueJh+S/oeaBrwoKICAgIHRoaXMuZ2V0UGljKCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICAvLyDojrflj5blub/lkYrkv6Hmga8KICAgIGdldEFkdjogZnVuY3Rpb24gZ2V0QWR2KCkgewogICAgICB2YXIgcm93ID0gSlNPTi5wYXJzZSh0aGlzLiRyb3V0ZS5xdWVyeS5yb3cpOwogICAgICB0aGlzLmFkdk9iaiA9IHJvdzsKICAgICAgdGhpcy5mb3JtLmlkID0gdGhpcy5hZHZPYmouaWQ7CiAgICB9LAogICAgLy8g5Zu+54mH5L+h5oGvCiAgICBnZXRQaWM6IGZ1bmN0aW9uIGdldFBpYygpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgdmFyIHJvdywgX3JlZiwgcmVzOwoKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICByb3cgPSBKU09OLnBhcnNlKF90aGlzLiRyb3V0ZS5xdWVyeS5yb3cpOwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDM7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuJGh0dHAucG9zdCgnL2Fkdi9nZXRBZHYnLCB7CiAgICAgICAgICAgICAgICAgIGlkOiByb3cuaWQKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICBfcmVmID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICAgIHJlcyA9IF9yZWYuZGF0YTsKICAgICAgICAgICAgICAgIF90aGlzLmZvcm0ucGljID0gcmVzLnBpYzsKICAgICAgICAgICAgICAgIF90aGlzLmZvcm0udXJsID0gcmVzLnVybDsKCiAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIC8vIOWIoOmZpOW5v+WRiuWGheWuuQogICAgZGVsZXRlZDogZnVuY3Rpb24gZGVsZXRlZCgpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgICB2YXIgcmVzOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDI7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMyLiRodHRwLnBvc3QoJy9hZHYvdXBkYXRlQWR2JywgewogICAgICAgICAgICAgICAgICBpZDogX3RoaXMyLmZvcm0uaWQKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICByZXMgPSBfY29udGV4dDIuc2VudDsKCiAgICAgICAgICAgICAgICBpZiAoIShyZXMuc3RhdHVzICE9PSAyMDAgfHwgcmVzLmRhdGEgIT09IHRydWUpKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gNTsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoInJldHVybiIsIF90aGlzMi4kbWVzc2FnZS5lcnJvcign5Yig6Zmk5aSx6LSlJykpOwoKICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgICBfdGhpczIuJHJvdXRlci5nbygwKTsKCiAgICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUyKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgLy8g5o+Q5Lqk5paw5bm/5ZGKCiAgICB1cGRhdGE6IGZ1bmN0aW9uIHVwZGF0YSgpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICBpZiAodGhpcy5mb3JtLnVybCA9PT0gbnVsbCkgewogICAgICAgIHJldHVybiB0aGlzLiRtZXNzYWdlLmVycm9yKCfor7floavlhpnlub/lkYrlpJbpk74nKTsKICAgICAgfQoKICAgICAgaWYgKHRoaXMuJHJlZnMubmV3X2ltYWdlLmZpbGVzWzBdID09PSB1bmRlZmluZWQpIHsKICAgICAgICByZXR1cm4gdGhpcy4kbWVzc2FnZS5lcnJvcign6K+35LiK5Lyg5bm/5ZGK5YaF5a655Zu+54mHJyk7CiAgICAgIH0KCiAgICAgIHZhciBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpOwogICAgICBmb3JtRGF0YS5hcHBlbmQoJ2ltYWdlX2RhdGEnLCB0aGlzLiRyZWZzLm5ld19pbWFnZS5maWxlc1swXSk7CiAgICAgIHRoaXMuJGh0dHAucG9zdCgnL3VwbG9hZC91cGxvYWQyJywgZm9ybURhdGEsIHsKICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ211bHRpcGFydC9mb3JtLWRhdGEnCiAgICAgICAgfQogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBpZiAocmVzLmRhdGEgPT09ICflm77niYfkuIrkvKDlpLHotKXvvIEnKSByZXR1cm4gX3RoaXMzLiRtZXNzYWdlLmVycm9yKCflub/lkYrkuIrkvKDlpLHotKUnKTsKICAgICAgICBfdGhpczMuZm9ybS5waWMgPSByZXMuZGF0YTsKCiAgICAgICAgX3RoaXMzLiRodHRwLnBvc3QoJy9hZHYvdXBkYXRlQWR2JywgX3RoaXMzLmZvcm0pLnRoZW4oZnVuY3Rpb24gKHJldykgewogICAgICAgICAgaWYgKHJldy5zdGF0dXMgIT09IDIwMCB8fCByZXcuZGF0YSAhPT0gdHJ1ZSkgcmV0dXJuIF90aGlzMy4kbWVzc2FnZS5lcnJvcign5L+u5pS55aSx6LSlJyk7IC8vIHRoaXMuJHJvdXRlci5nbygwKQogICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChyZXcpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKHJldyk7CiAgICAgICAgfSk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBjb25zb2xlLmxvZyhyZXMpOwogICAgICB9KTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["Edit.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div>\r\n    <!-- 广告位置 -->\r\n    <h2>{{this.advObj.name}}</h2>\r\n    <!-- 广告尺寸 -->\r\n    <el-row :gutter=\"20\">\r\n      <el-col :span=\"3\">尺寸大小</el-col>\r\n      <el-col :span=\"21\">{{this.advObj.size}}</el-col>\r\n    </el-row>\r\n    <!-- 广告链接 -->\r\n    <el-row :gutter=\"20\">\r\n      <el-col :span=\"3\">广告链接</el-col>\r\n      <el-col :span=\"21\">\r\n        <el-input v-model=\"form.url\" style=\"width: 400px\" placeholder=\"请输入广告链接内容\"></el-input>\r\n      </el-col>\r\n    </el-row>\r\n    <!-- 修改内容 -->\r\n    <el-row :gutter=\"20\">\r\n      <el-col :span=\"3\">修改广告内容</el-col>\r\n      <el-col :span=\"21\">\r\n        <input type=\"file\" id=\"saveImage\" name=\"myphoto\" accept=\"image/png,image/gif,image/jpeg\" ref=\"new_image\">\r\n      </el-col>\r\n    </el-row>\r\n    <!-- 广告内容 -->\r\n    <el-row :gutter=\"20\">\r\n      <el-col :span=\"24\">\r\n        <img :src=\"form.pic\" alt=\"\">\r\n      </el-col>\r\n    </el-row>\r\n    <!-- 提交 -->\r\n    <el-row :gutter=\"20\">\r\n      <el-col :span=\"24\">\r\n        <el-button type=\"success\" @click=\"updata\">提交新广告</el-button>\r\n        <el-button type=\"danger\" @click=\"deleted\">删除广告内容</el-button>\r\n      </el-col>\r\n    </el-row>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data () {\r\n    return {\r\n      // 广告信息\r\n      advObj: {},\r\n      // 提交后台\r\n      form: {\r\n        url: '',\r\n        pic: '',\r\n        id: ''\r\n      }\r\n    }\r\n  },\r\n  created () {\r\n    // 获取广告信息\r\n    this.getAdv()\r\n    // 获取图片信息\r\n    this.getPic()\r\n  },\r\n  methods: {\r\n    // 获取广告信息\r\n    getAdv () {\r\n      const row = JSON.parse(this.$route.query.row)\r\n      this.advObj = row\r\n      this.form.id = this.advObj.id\r\n    },\r\n    // 图片信息\r\n    async getPic () {\r\n      const row = JSON.parse(this.$route.query.row)\r\n      const { data: res } = await this.$http.post('/adv/getAdv', {\r\n        id: row.id\r\n      })\r\n      this.form.pic = res.pic\r\n      this.form.url = res.url\r\n    },\r\n    // 删除广告内容\r\n    async deleted () {\r\n      const res = await this.$http.post('/adv/updateAdv', {\r\n        id: this.form.id\r\n      })\r\n      if (res.status !== 200 || res.data !== true) {\r\n        return this.$message.error('删除失败')\r\n      }\r\n      this.$router.go(0)\r\n    },\r\n    // 提交新广告\r\n    updata () {\r\n      if (this.form.url === null) {\r\n        return this.$message.error('请填写广告外链')\r\n      }\r\n      if (this.$refs.new_image.files[0] === undefined) {\r\n        return this.$message.error('请上传广告内容图片')\r\n      }\r\n      const formData = new FormData()\r\n      formData.append('image_data', this.$refs.new_image.files[0])\r\n      this.$http.post('/upload/upload2', formData, {\r\n        headers: {\r\n          'Content-Type': 'multipart/form-data'\r\n        }\r\n      }).then(res => {\r\n        if (res.data === '图片上传失败！') return this.$message.error('广告上传失败')\r\n        this.form.pic = res.data\r\n        this.$http.post('/adv/updateAdv', this.form).then(rew => {\r\n          if (rew.status !== 200 || rew.data !== true) return this.$message.error('修改失败')\r\n          // this.$router.go(0)\r\n        }).catch(rew => {\r\n          console.log(rew)\r\n        })\r\n      }).catch(res => {\r\n        console.log(res)\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\nh2 {\r\n  text-align: center;\r\n  margin-bottom: 30px;\r\n}\r\n.el-row {\r\n  margin-bottom: 30px;\r\n}\r\n</style>\r\n"],"sourceRoot":"src/views/adv"}]}