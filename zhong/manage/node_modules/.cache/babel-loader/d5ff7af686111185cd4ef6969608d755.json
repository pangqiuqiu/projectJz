{"remainingRequest":"D:\\myCompany\\project\\aaa\\new\\node_modules\\babel-loader\\lib\\index.js!D:\\myCompany\\project\\aaa\\new\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\myCompany\\project\\aaa\\new\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\myCompany\\project\\aaa\\new\\src\\components\\photo\\Picup.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\myCompany\\project\\aaa\\new\\src\\components\\photo\\Picup.vue","mtime":1586870112938},{"path":"D:\\myCompany\\project\\aaa\\new\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\myCompany\\project\\aaa\\new\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\myCompany\\project\\aaa\\new\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\myCompany\\project\\aaa\\new\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5kZXgtb2YiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zcGxpY2UiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgUHViU3ViIGZyb20gJ3B1YnN1Yi1qcyc7CmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgaW1nTGlzdDogW10sCiAgICAgIHNpemU6IDAsCiAgICAgIGxpbWl0OiB1bmRlZmluZWQKICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICAvLyDorr7nva4KICAgIC8vIGxpbWl0Q2xpY2soc3RhdGUpIHsKICAgIC8vICAgdGhpcy5pbWdMaXN0ID0gW107CiAgICAvLyAgIGlmIChzdGF0ZSkKICAgIC8vICAgICB0aGlzLmxpbWl0ID0gMjsKICAgIC8vICAgZWxzZQogICAgLy8gICAgIHRoaXMubGltaXQgPSB1bmRlZmluZWQ7CiAgICAvLyB9LAogICAgZmlsZUNsaWNrOiBmdW5jdGlvbiBmaWxlQ2xpY2soKSB7CiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1cGxvYWRfZmlsZScpLmNsaWNrKCk7CiAgICB9LAogICAgZmlsZUNoYW5nZTogZnVuY3Rpb24gZmlsZUNoYW5nZShlbCkgewogICAgICBpZiAoIWVsLnRhcmdldC5maWxlc1swXS5zaXplKSByZXR1cm47CiAgICAgIHRoaXMuZmlsZUxpc3QoZWwudGFyZ2V0KTsKICAgICAgZWwudGFyZ2V0LnZhbHVlID0gJyc7CiAgICB9LAogICAgZmlsZUxpc3Q6IGZ1bmN0aW9uIGZpbGVMaXN0KF9maWxlTGlzdCkgewogICAgICB2YXIgZmlsZXMgPSBfZmlsZUxpc3QuZmlsZXM7CgogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGZpbGVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgLy8g5Yik5pat5piv5ZCm5Li65paH5Lu25aS5CiAgICAgICAgaWYgKGZpbGVzW2ldLnR5cGUgIT09ICcnKSB7CiAgICAgICAgICB0aGlzLmZpbGVBZGQoZmlsZXNbaV0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAvLyDmlofku7blpLnlpITnkIYKICAgICAgICAgIHRoaXMuZm9sZGVycyhfZmlsZUxpc3QuaXRlbXNbaV0pOwogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIC8vIOaWh+S7tuWkueWkhOeQhgogICAgZm9sZGVyczogZnVuY3Rpb24gZm9sZGVycyhmaWxlcykgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOyAvLyDliKTmlq3mmK/lkKbkuLrljp/nlJ9maWxlCgoKICAgICAgaWYgKGZpbGVzLmtpbmQpIHsKICAgICAgICBmaWxlcyA9IGZpbGVzLndlYmtpdEdldEFzRW50cnkoKTsKICAgICAgfQoKICAgICAgZmlsZXMuY3JlYXRlUmVhZGVyKCkucmVhZEVudHJpZXMoZnVuY3Rpb24gKGZpbGUpIHsKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGZpbGUubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIGlmIChmaWxlW2ldLmlzRmlsZSkgewogICAgICAgICAgICBfdGhpcy5mb2xkZXJzQWRkKGZpbGVbaV0pOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgX3RoaXMuZm9sZGVycyhmaWxlW2ldKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIGZvbGRlcnNBZGQ6IGZ1bmN0aW9uIGZvbGRlcnNBZGQoZW50cnkpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIGVudHJ5LmZpbGUoZnVuY3Rpb24gKGZpbGUpIHsKICAgICAgICBfdGhpcy5maWxlQWRkKGZpbGUpOwogICAgICB9KTsKICAgIH0sCiAgICBmaWxlQWRkOiBmdW5jdGlvbiBmaWxlQWRkKGZpbGUpIHsKICAgICAgaWYgKHRoaXMubGltaXQgIT09IHVuZGVmaW5lZCkgdGhpcy5saW1pdC0tOwogICAgICBpZiAodGhpcy5saW1pdCAhPT0gdW5kZWZpbmVkICYmIHRoaXMubGltaXQgPCAwKSByZXR1cm47IC8vIOaAu+Wkp+WwjwoKICAgICAgdGhpcy5zaXplID0gdGhpcy5zaXplICsgZmlsZS5zaXplOyAvLyDliKTmlq3mmK/lkKbkuLrlm77niYfmlofku7YKCiAgICAgIGlmIChmaWxlLnR5cGUuaW5kZXhPZignaW1hZ2UnKSA9PT0gLTEpIHsKICAgICAgICBmaWxlLnNyYyA9ICd3ZW5qaWFuLnBuZyc7CiAgICAgICAgdGhpcy5pbWdMaXN0LnB1c2goewogICAgICAgICAgZmlsZTogZmlsZQogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIHZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpOwogICAgICAgIHZhciBpbWFnZSA9IG5ldyBJbWFnZSgpOwoKICAgICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgICByZWFkZXIucmVhZEFzRGF0YVVSTChmaWxlKTsKCiAgICAgICAgcmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIGZpbGUuc3JjID0gdGhpcy5yZXN1bHQ7CgogICAgICAgICAgaW1hZ2Uub25sb2FkID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgd2lkdGggPSBpbWFnZS53aWR0aDsKICAgICAgICAgICAgdmFyIGhlaWdodCA9IGltYWdlLmhlaWdodDsKICAgICAgICAgICAgZmlsZS53aWR0aCA9IHdpZHRoOwogICAgICAgICAgICBmaWxlLmhlaWdodCA9IGhlaWdodDsKCiAgICAgICAgICAgIF90aGlzLmltZ0xpc3QucHVzaCh7CiAgICAgICAgICAgICAgZmlsZTogZmlsZQogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIFB1YlN1Yi5wdWJsaXNoKCduYW1lJywgX3RoaXMuaW1nTGlzdCk7CiAgICAgICAgICB9OwoKICAgICAgICAgIGltYWdlLnNyYyA9IGZpbGUuc3JjOwogICAgICAgIH07CiAgICAgIH0KICAgIH0sCiAgICBmaWxlRGVsOiBmdW5jdGlvbiBmaWxlRGVsKGluZGV4KSB7CiAgICAgIHRoaXMuc2l6ZSA9IHRoaXMuc2l6ZSAtIHRoaXMuaW1nTGlzdFtpbmRleF0uZmlsZS5zaXplOyAvLyDmgLvlpKflsI8KCiAgICAgIHRoaXMuaW1nTGlzdC5zcGxpY2UoaW5kZXgsIDEpOwogICAgICBpZiAodGhpcy5saW1pdCAhPT0gdW5kZWZpbmVkKSB0aGlzLmxpbWl0ID0gdGhpcy5pbWdMaXN0Lmxlbmd0aDsKICAgIH0sCiAgICBieXRlc1RvU2l6ZTogZnVuY3Rpb24gYnl0ZXNUb1NpemUoYnl0ZXMpIHsKICAgICAgaWYgKGJ5dGVzID09PSAwKSByZXR1cm4gJzAgQic7CiAgICAgIHZhciBrID0gMTAwMDsgLy8gb3IgMTAyNAoKICAgICAgdmFyIHNpemVzID0gWydCJywgJ0tCJywgJ01CJywgJ0dCJywgJ1RCJywgJ1BCJywgJ0VCJywgJ1pCJywgJ1lCJ107CiAgICAgIHZhciBpID0gTWF0aC5mbG9vcihNYXRoLmxvZyhieXRlcykgLyBNYXRoLmxvZyhrKSk7CiAgICAgIHJldHVybiAoYnl0ZXMgLyBNYXRoLnBvdyhrLCBpKSkudG9QcmVjaXNpb24oMykgKyAnICcgKyBzaXplc1tpXTsKICAgIH0sCiAgICBkcmFnZW50ZXI6IGZ1bmN0aW9uIGRyYWdlbnRlcihlbCkgewogICAgICBlbC5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgZWwucHJldmVudERlZmF1bHQoKTsKICAgIH0sCiAgICBkcmFnb3ZlcjogZnVuY3Rpb24gZHJhZ292ZXIoZWwpIHsKICAgICAgZWwuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgIGVsLnByZXZlbnREZWZhdWx0KCk7CiAgICB9LAogICAgZHJvcDogZnVuY3Rpb24gZHJvcChlbCkgewogICAgICBlbC5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgZWwucHJldmVudERlZmF1bHQoKTsKICAgICAgdGhpcy5maWxlTGlzdChlbC5kYXRhVHJhbnNmZXIpOwogICAgfQogIH0KfTs="},{"version":3,"sources":["Picup.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div class=\"hello\">\r\n    <!-- <button @click=\"limitClick(1)\">点击设置上传数量：2</button>\r\n    <button @click=\"limitClick(0)\">点击取消上传数量</button> -->\r\n    <!-- <div>目前可上传数量限制：<span v-if=\"!limit\">无</span><span v-if=\"limit\">{{limit}}</span></div> -->\r\n    <div class=\"upload\">\r\n      <div class=\"upload_warp\">\r\n        <div class=\"upload_warp_left\" @click=\"fileClick\">\r\n          <img src=\"../../assets/logo.png\" />\r\n        </div>\r\n        <div\r\n          class=\"upload_warp_right\"\r\n          @drop=\"drop($event)\"\r\n          @dragenter=\"dragenter($event)\"\r\n          @dragover=\"dragover($event)\"\r\n        >\r\n          或者将文件拖到此处\r\n        </div>\r\n      </div>\r\n      <div class=\"upload_warp_text\">\r\n        选中{{ imgList.length }}张文件，共{{ bytesToSize(this.size) }}\r\n      </div>\r\n      <input\r\n        @change=\"fileChange($event)\"\r\n        type=\"file\"\r\n        id=\"upload_file\"\r\n        multiple\r\n        style=\"display: none\"\r\n      />\r\n      <div class=\"upload_warp_img\" v-show=\"imgList.length != 0\">\r\n        <div\r\n          class=\"upload_warp_img_div\"\r\n          v-for=\"(item, index) in imgList\"\r\n          v-dragging=\"{ item: item, list: imgList, group: 'color' }\"\r\n          :key=\"index\"\r\n        >\r\n          <div class=\"upload_warp_img_div_top\">\r\n            <div class=\"upload_warp_img_div_text\">\r\n              {{ item.file.name }}\r\n            </div>\r\n            <img\r\n              src=\"../../assets/logo.png\"\r\n              class=\"upload_warp_img_div_del\"\r\n              @click=\"fileDel(index)\"\r\n            />\r\n          </div>\r\n          <img :src=\"item.file.src\" />\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div v-for=\"(item, index) in imgList\" :key=\"index\" style=\"text-align: left\">\r\n      {{ index }}：{{ item.file.name }}\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport PubSub from 'pubsub-js'\r\nexport default {\r\n  data () {\r\n    return {\r\n      imgList: [],\r\n      size: 0,\r\n      limit: undefined\r\n    }\r\n  },\r\n  methods: {\r\n    // 设置\r\n    // limitClick(state) {\r\n    //   this.imgList = [];\r\n    //   if (state)\r\n    //     this.limit = 2;\r\n    //   else\r\n    //     this.limit = undefined;\r\n    // },\r\n    fileClick () {\r\n      document.getElementById('upload_file').click()\r\n    },\r\n    fileChange (el) {\r\n      if (!el.target.files[0].size) return\r\n      this.fileList(el.target)\r\n      el.target.value = ''\r\n    },\r\n    fileList (fileList) {\r\n      const files = fileList.files\r\n      for (let i = 0; i < files.length; i++) {\r\n        // 判断是否为文件夹\r\n        if (files[i].type !== '') {\r\n          this.fileAdd(files[i])\r\n        } else {\r\n          // 文件夹处理\r\n          this.folders(fileList.items[i])\r\n        }\r\n      }\r\n    },\r\n    // 文件夹处理\r\n    folders (files) {\r\n      const _this = this\r\n      // 判断是否为原生file\r\n      if (files.kind) {\r\n        files = files.webkitGetAsEntry()\r\n      }\r\n      files.createReader().readEntries(function (file) {\r\n        for (let i = 0; i < file.length; i++) {\r\n          if (file[i].isFile) {\r\n            _this.foldersAdd(file[i])\r\n          } else {\r\n            _this.folders(file[i])\r\n          }\r\n        }\r\n      })\r\n    },\r\n    foldersAdd (entry) {\r\n      const _this = this\r\n      entry.file(function (file) {\r\n        _this.fileAdd(file)\r\n      })\r\n    },\r\n    fileAdd (file) {\r\n      if (this.limit !== undefined) this.limit--\r\n      if (this.limit !== undefined && this.limit < 0) return\r\n      // 总大小\r\n      this.size = this.size + file.size\r\n      // 判断是否为图片文件\r\n      if (file.type.indexOf('image') === -1) {\r\n        file.src = 'wenjian.png'\r\n        this.imgList.push({\r\n          file\r\n        })\r\n      } else {\r\n        const reader = new FileReader()\r\n        const image = new Image()\r\n        const _this = this\r\n        reader.readAsDataURL(file)\r\n        reader.onload = function () {\r\n          file.src = this.result\r\n          image.onload = function () {\r\n            const width = image.width\r\n            const height = image.height\r\n            file.width = width\r\n            file.height = height\r\n            _this.imgList.push({\r\n              file\r\n            })\r\n            PubSub.publish('name', _this.imgList)\r\n          }\r\n          image.src = file.src\r\n        }\r\n      }\r\n    },\r\n    fileDel (index) {\r\n      this.size = this.size - this.imgList[index].file.size // 总大小\r\n      this.imgList.splice(index, 1)\r\n      if (this.limit !== undefined) this.limit = this.imgList.length\r\n    },\r\n    bytesToSize (bytes) {\r\n      if (bytes === 0) return '0 B'\r\n      const k = 1000 // or 1024\r\n      const sizes = ['B', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB']\r\n      const i = Math.floor(Math.log(bytes) / Math.log(k))\r\n      return (bytes / Math.pow(k, i)).toPrecision(3) + ' ' + sizes[i]\r\n    },\r\n    dragenter (el) {\r\n      el.stopPropagation()\r\n      el.preventDefault()\r\n    },\r\n    dragover (el) {\r\n      el.stopPropagation()\r\n      el.preventDefault()\r\n    },\r\n    drop (el) {\r\n      el.stopPropagation()\r\n      el.preventDefault()\r\n      this.fileList(el.dataTransfer)\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style scoped>\r\n.upload_warp_img_div_del {\r\n  position: absolute;\r\n  top: 6px;\r\n  width: 16px;\r\n  right: 4px;\r\n}\r\n\r\n.upload_warp_img_div_top {\r\n  position: absolute;\r\n  top: 0;\r\n  width: 100%;\r\n  height: 30px;\r\n  background-color: rgba(0, 0, 0, 0.4);\r\n  line-height: 30px;\r\n  text-align: left;\r\n  color: #fff;\r\n  font-size: 12px;\r\n  text-indent: 4px;\r\n}\r\n\r\n.upload_warp_img_div_text {\r\n  white-space: nowrap;\r\n  width: 80%;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n}\r\n\r\n.upload_warp_img_div img {\r\n  max-width: 100%;\r\n  max-height: 100%;\r\n  vertical-align: middle;\r\n}\r\n\r\n.upload_warp_img_div {\r\n  position: relative;\r\n  height: 100px;\r\n  width: 120px;\r\n  border: 1px solid #ccc;\r\n  margin: 0px 30px 10px 0px;\r\n  float: left;\r\n  line-height: 100px;\r\n  display: table-cell;\r\n  text-align: center;\r\n  background-color: #eee;\r\n  cursor: pointer;\r\n}\r\n\r\n.upload_warp_img {\r\n  border-top: 1px solid #d2d2d2;\r\n  padding: 14px 0 0 14px;\r\n  overflow: hidden;\r\n}\r\n\r\n.upload_warp_text {\r\n  text-align: left;\r\n  margin-bottom: 10px;\r\n  padding-top: 10px;\r\n  text-indent: 14px;\r\n  border-top: 1px solid #ccc;\r\n  font-size: 14px;\r\n}\r\n\r\n.upload_warp_right {\r\n  float: left;\r\n  width: 57%;\r\n  margin-left: 2%;\r\n  height: 100%;\r\n  border: 1px dashed #999;\r\n  border-radius: 4px;\r\n  line-height: 130px;\r\n  color: #999;\r\n}\r\n\r\n.upload_warp_left img {\r\n  margin-top: 32px;\r\n}\r\n\r\n.upload_warp_left {\r\n  float: left;\r\n  width: 40%;\r\n  height: 100%;\r\n  border: 1px dashed #999;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n}\r\n\r\n.upload_warp {\r\n  margin: 14px;\r\n  height: 130px;\r\n}\r\n\r\n.upload {\r\n  border: 1px solid #ccc;\r\n  background-color: #fff;\r\n  width: 650px;\r\n  box-shadow: 0px 1px 0px #ccc;\r\n  border-radius: 4px;\r\n}\r\n\r\n.hello {\r\n  width: 650px;\r\n}\r\n</style>\r\n"],"sourceRoot":"src/components/photo"}]}