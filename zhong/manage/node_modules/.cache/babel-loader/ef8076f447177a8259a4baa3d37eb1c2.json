{"remainingRequest":"D:\\myCompany\\project\\aaa\\new\\node_modules\\babel-loader\\lib\\index.js!D:\\myCompany\\project\\aaa\\new\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\myCompany\\project\\aaa\\new\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\myCompany\\project\\aaa\\new\\src\\views\\adv\\Edit.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\myCompany\\project\\aaa\\new\\src\\views\\adv\\Edit.vue","mtime":1587027509021},{"path":"D:\\myCompany\\project\\aaa\\new\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\myCompany\\project\\aaa\\new\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\myCompany\\project\\aaa\\new\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\myCompany\\project\\aaa\\new\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiRDpcXG15Q29tcGFueVxccHJvamVjdFxcYWFhXFxuZXdcXG5vZGVfbW9kdWxlc1xcQGJhYmVsXFxydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIC8vIOW5v+WRiuS/oeaBrwogICAgICBhZHZPYmo6IHt9LAogICAgICAvLyDmj5DkuqTlkI7lj7AKICAgICAgZm9ybTogewogICAgICAgIHVybDogJycsCiAgICAgICAgcGljOiAnJywKICAgICAgICBpZDogJycsCiAgICAgICAgdGl0bGU6ICcnCiAgICAgIH0KICAgIH07CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgLy8g6I635Y+W5bm/5ZGK5L+h5oGvCiAgICB0aGlzLmdldEFkdigpOyAvLyDojrflj5blm77niYfkv6Hmga8KCiAgICB0aGlzLmdldFBpYygpOwogIH0sCiAgbWV0aG9kczogewogICAgLy8g6I635Y+W5bm/5ZGK5L+h5oGvCiAgICBnZXRBZHY6IGZ1bmN0aW9uIGdldEFkdigpIHsKICAgICAgdmFyIHJvdyA9IEpTT04ucGFyc2UodGhpcy4kcm91dGUucXVlcnkucm93KTsKICAgICAgdGhpcy5hZHZPYmogPSByb3c7CiAgICAgIHRoaXMuZm9ybS5pZCA9IHRoaXMuYWR2T2JqLmlkOwogICAgfSwKICAgIC8vIOWbvueJh+S/oeaBrwogICAgZ2V0UGljOiBmdW5jdGlvbiBnZXRQaWMoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciByb3csIF9yZWYsIHJlczsKCiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgcm93ID0gSlNPTi5wYXJzZShfdGhpcy4kcm91dGUucXVlcnkucm93KTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzOwogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLiRodHRwLnBvc3QoJy9hZHYvZ2V0QWR2JywgewogICAgICAgICAgICAgICAgICBpZDogcm93LmlkCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgX3JlZiA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgICByZXMgPSBfcmVmLmRhdGE7CiAgICAgICAgICAgICAgICBfdGhpcy5mb3JtLnBpYyA9IHJlcy5waWM7CiAgICAgICAgICAgICAgICBfdGhpcy5mb3JtLnVybCA9IHJlcy51cmw7CiAgICAgICAgICAgICAgICBfdGhpcy5mb3JtLnRpdGxlID0gcmVzLnRpdGxlOwoKICAgICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgLy8g5Yig6Zmk5bm/5ZGK5YaF5a65CiAgICBkZWxldGVkOiBmdW5jdGlvbiBkZWxldGVkKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKCkgewogICAgICAgIHZhciByZXM7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMjsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczIuJGh0dHAucG9zdCgnL2Fkdi91cGRhdGVBZHYnLCB7CiAgICAgICAgICAgICAgICAgIGlkOiBfdGhpczIuZm9ybS5pZAogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgIHJlcyA9IF9jb250ZXh0Mi5zZW50OwoKICAgICAgICAgICAgICAgIGlmICghKHJlcy5zdGF0dXMgIT09IDIwMCB8fCByZXMuZGF0YSAhPT0gdHJ1ZSkpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA1OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgicmV0dXJuIiwgX3RoaXMyLiRtZXNzYWdlLmVycm9yKCfliKDpmaTlpLHotKUnKSk7CgogICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgIF90aGlzMi4kcm91dGVyLmdvKDApOwoKICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTIpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICAvLyDmj5DkuqTmlrDlub/lkYoKICAgIHVwZGF0YTogZnVuY3Rpb24gdXBkYXRhKCkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIGlmICh0aGlzLmZvcm0udXJsID09PSBudWxsKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+ivt+Whq+WGmeW5v+WRiuWklumTvicpOwogICAgICB9CgogICAgICBpZiAodGhpcy4kcmVmcy5uZXdfaW1hZ2UuZmlsZXNbMF0gPT09IHVuZGVmaW5lZCkgewogICAgICAgIHJldHVybiB0aGlzLiRtZXNzYWdlLmVycm9yKCfor7fkuIrkvKDlub/lkYrlhoXlrrnlm77niYcnKTsKICAgICAgfQoKICAgICAgdmFyIGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7CiAgICAgIGZvcm1EYXRhLmFwcGVuZCgnaW1hZ2VfZGF0YScsIHRoaXMuJHJlZnMubmV3X2ltYWdlLmZpbGVzWzBdKTsKICAgICAgdGhpcy4kaHR0cC5wb3N0KCcvdXBsb2FkL3VwbG9hZDInLCBmb3JtRGF0YSwgewogICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnbXVsdGlwYXJ0L2Zvcm0tZGF0YScKICAgICAgICB9CiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIGlmIChyZXMuZGF0YSA9PT0gJ+WbvueJh+S4iuS8oOWksei0pe+8gScpIHJldHVybiBfdGhpczMuJG1lc3NhZ2UuZXJyb3IoJ+W5v+WRiuS4iuS8oOWksei0pScpOwogICAgICAgIF90aGlzMy5mb3JtLnBpYyA9IHJlcy5kYXRhOwoKICAgICAgICBfdGhpczMuJGh0dHAucG9zdCgnL2Fkdi91cGRhdGVBZHYnLCBfdGhpczMuZm9ybSkudGhlbihmdW5jdGlvbiAocmV3KSB7CiAgICAgICAgICBpZiAocmV3LnN0YXR1cyAhPT0gMjAwIHx8IHJldy5kYXRhICE9PSB0cnVlKSByZXR1cm4gX3RoaXMzLiRtZXNzYWdlLmVycm9yKCfkv67mlLnlpLHotKUnKTsKCiAgICAgICAgICBfdGhpczMuJHJvdXRlci5wdXNoKCcvYWR2L2hvbWUnKTsKCiAgICAgICAgICBfdGhpczMuJG1lc3NhZ2Uuc3VjY2Vzcygn5L+u5pS55oiQ5YqfJyk7CiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKHJldykgewogICAgICAgICAgY29uc29sZS5sb2cocmV3KTsKICAgICAgICB9KTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKHJlcykgewogICAgICAgIGNvbnNvbGUubG9nKHJlcyk7CiAgICAgIH0pOwogICAgfQogIH0KfTs="},{"version":3,"sources":["Edit.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+CA,eAAA;AACA,EAAA,IADA,kBACA;AACA,WAAA;AACA;AACA,MAAA,MAAA,EAAA,EAFA;AAGA;AACA,MAAA,IAAA,EAAA;AACA,QAAA,GAAA,EAAA,EADA;AAEA,QAAA,GAAA,EAAA,EAFA;AAGA,QAAA,EAAA,EAAA,EAHA;AAIA,QAAA,KAAA,EAAA;AAJA;AAJA,KAAA;AAWA,GAbA;AAcA,EAAA,OAdA,qBAcA;AACA;AACA,SAAA,MAAA,GAFA,CAGA;;AACA,SAAA,MAAA;AACA,GAnBA;AAoBA,EAAA,OAAA,EAAA;AACA;AACA,IAAA,MAFA,oBAEA;AACA,UAAA,GAAA,GAAA,IAAA,CAAA,KAAA,CAAA,KAAA,MAAA,CAAA,KAAA,CAAA,GAAA,CAAA;AACA,WAAA,MAAA,GAAA,GAAA;AACA,WAAA,IAAA,CAAA,EAAA,GAAA,KAAA,MAAA,CAAA,EAAA;AACA,KANA;AAOA;AACA,IAAA,MARA,oBAQA;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AACA,gBAAA,GADA,GACA,IAAA,CAAA,KAAA,CAAA,KAAA,CAAA,MAAA,CAAA,KAAA,CAAA,GAAA,CADA;AAAA;AAAA,uBAEA,KAAA,CAAA,KAAA,CAAA,IAAA,CAAA,aAAA,EAAA;AACA,kBAAA,EAAA,EAAA,GAAA,CAAA;AADA,iBAAA,CAFA;;AAAA;AAAA;AAEA,gBAAA,GAFA,QAEA,IAFA;AAKA,gBAAA,KAAA,CAAA,IAAA,CAAA,GAAA,GAAA,GAAA,CAAA,GAAA;AACA,gBAAA,KAAA,CAAA,IAAA,CAAA,GAAA,GAAA,GAAA,CAAA,GAAA;AACA,gBAAA,KAAA,CAAA,IAAA,CAAA,KAAA,GAAA,GAAA,CAAA,KAAA;;AAPA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQA,KAhBA;AAiBA;AACA,IAAA,OAlBA,qBAkBA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBACA,MAAA,CAAA,KAAA,CAAA,IAAA,CAAA,gBAAA,EAAA;AACA,kBAAA,EAAA,EAAA,MAAA,CAAA,IAAA,CAAA;AADA,iBAAA,CADA;;AAAA;AACA,gBAAA,GADA;;AAAA,sBAIA,GAAA,CAAA,MAAA,KAAA,GAAA,IAAA,GAAA,CAAA,IAAA,KAAA,IAJA;AAAA;AAAA;AAAA;;AAAA,kDAKA,MAAA,CAAA,QAAA,CAAA,KAAA,CAAA,MAAA,CALA;;AAAA;AAOA,gBAAA,MAAA,CAAA,OAAA,CAAA,EAAA,CAAA,CAAA;;AAPA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQA,KA1BA;AA2BA;AACA,IAAA,MA5BA,oBA4BA;AAAA;;AACA,UAAA,KAAA,IAAA,CAAA,GAAA,KAAA,IAAA,EAAA;AACA,eAAA,KAAA,QAAA,CAAA,KAAA,CAAA,SAAA,CAAA;AACA;;AACA,UAAA,KAAA,KAAA,CAAA,SAAA,CAAA,KAAA,CAAA,CAAA,MAAA,SAAA,EAAA;AACA,eAAA,KAAA,QAAA,CAAA,KAAA,CAAA,WAAA,CAAA;AACA;;AACA,UAAA,QAAA,GAAA,IAAA,QAAA,EAAA;AACA,MAAA,QAAA,CAAA,MAAA,CAAA,YAAA,EAAA,KAAA,KAAA,CAAA,SAAA,CAAA,KAAA,CAAA,CAAA,CAAA;AACA,WAAA,KAAA,CAAA,IAAA,CAAA,iBAAA,EAAA,QAAA,EAAA;AACA,QAAA,OAAA,EAAA;AACA,0BAAA;AADA;AADA,OAAA,EAIA,IAJA,CAIA,UAAA,GAAA,EAAA;AACA,YAAA,GAAA,CAAA,IAAA,KAAA,SAAA,EAAA,OAAA,MAAA,CAAA,QAAA,CAAA,KAAA,CAAA,QAAA,CAAA;AACA,QAAA,MAAA,CAAA,IAAA,CAAA,GAAA,GAAA,GAAA,CAAA,IAAA;;AACA,QAAA,MAAA,CAAA,KAAA,CAAA,IAAA,CAAA,gBAAA,EAAA,MAAA,CAAA,IAAA,EAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,cAAA,GAAA,CAAA,MAAA,KAAA,GAAA,IAAA,GAAA,CAAA,IAAA,KAAA,IAAA,EAAA,OAAA,MAAA,CAAA,QAAA,CAAA,KAAA,CAAA,MAAA,CAAA;;AACA,UAAA,MAAA,CAAA,OAAA,CAAA,IAAA,CAAA,WAAA;;AACA,UAAA,MAAA,CAAA,QAAA,CAAA,OAAA,CAAA,MAAA;AACA,SAJA,EAIA,KAJA,CAIA,UAAA,GAAA,EAAA;AACA,UAAA,OAAA,CAAA,GAAA,CAAA,GAAA;AACA,SANA;AAOA,OAdA,EAcA,KAdA,CAcA,UAAA,GAAA,EAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,GAAA;AACA,OAhBA;AAiBA;AAtDA;AApBA,CAAA","sourcesContent":["<template>\r\n  <div>\r\n    <!-- 广告位置 -->\r\n    <h2>{{this.advObj.name}}</h2>\r\n    <!-- 广告尺寸 -->\r\n    <el-row :gutter=\"20\">\r\n      <el-col :span=\"3\">尺寸大小</el-col>\r\n      <el-col :span=\"21\">{{this.advObj.size}}</el-col>\r\n    </el-row>\r\n    <!-- 广告标题 -->\r\n    <el-row :gutter=\"20\">\r\n      <el-col :span=\"3\">广告标题</el-col>\r\n      <el-col :span=\"21\">\r\n        <el-input v-model=\"form.title\" style=\"width: 400px\" placeholder=\"请输入广告标题\"></el-input>\r\n      </el-col>\r\n    </el-row>\r\n    <!-- 广告链接 -->\r\n    <el-row :gutter=\"20\">\r\n      <el-col :span=\"3\">广告链接</el-col>\r\n      <el-col :span=\"21\">\r\n        <el-input v-model=\"form.url\" style=\"width: 400px\" placeholder=\"请输入广告链接内容\"></el-input>\r\n      </el-col>\r\n    </el-row>\r\n    <!-- 修改内容 -->\r\n    <el-row :gutter=\"20\">\r\n      <el-col :span=\"3\">修改广告内容</el-col>\r\n      <el-col :span=\"21\">\r\n        <input type=\"file\" id=\"saveImage\" name=\"myphoto\" accept=\"image/png,image/gif,image/jpeg\" ref=\"new_image\">\r\n      </el-col>\r\n    </el-row>\r\n    <!-- 广告内容 -->\r\n    <el-row :gutter=\"20\">\r\n      <el-col :span=\"24\">\r\n        <img :src=\"form.pic\" alt=\"\">\r\n      </el-col>\r\n    </el-row>\r\n    <!-- 提交 -->\r\n    <el-row :gutter=\"20\">\r\n      <el-col :span=\"24\">\r\n        <el-button type=\"success\" @click=\"updata\">提交新广告</el-button>\r\n        <el-button type=\"danger\" @click=\"deleted\">删除广告内容</el-button>\r\n      </el-col>\r\n    </el-row>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data () {\r\n    return {\r\n      // 广告信息\r\n      advObj: {},\r\n      // 提交后台\r\n      form: {\r\n        url: '',\r\n        pic: '',\r\n        id: '',\r\n        title: ''\r\n      }\r\n    }\r\n  },\r\n  created () {\r\n    // 获取广告信息\r\n    this.getAdv()\r\n    // 获取图片信息\r\n    this.getPic()\r\n  },\r\n  methods: {\r\n    // 获取广告信息\r\n    getAdv () {\r\n      const row = JSON.parse(this.$route.query.row)\r\n      this.advObj = row\r\n      this.form.id = this.advObj.id\r\n    },\r\n    // 图片信息\r\n    async getPic () {\r\n      const row = JSON.parse(this.$route.query.row)\r\n      const { data: res } = await this.$http.post('/adv/getAdv', {\r\n        id: row.id\r\n      })\r\n      this.form.pic = res.pic\r\n      this.form.url = res.url\r\n      this.form.title = res.title\r\n    },\r\n    // 删除广告内容\r\n    async deleted () {\r\n      const res = await this.$http.post('/adv/updateAdv', {\r\n        id: this.form.id\r\n      })\r\n      if (res.status !== 200 || res.data !== true) {\r\n        return this.$message.error('删除失败')\r\n      }\r\n      this.$router.go(0)\r\n    },\r\n    // 提交新广告\r\n    updata () {\r\n      if (this.form.url === null) {\r\n        return this.$message.error('请填写广告外链')\r\n      }\r\n      if (this.$refs.new_image.files[0] === undefined) {\r\n        return this.$message.error('请上传广告内容图片')\r\n      }\r\n      const formData = new FormData()\r\n      formData.append('image_data', this.$refs.new_image.files[0])\r\n      this.$http.post('/upload/upload2', formData, {\r\n        headers: {\r\n          'Content-Type': 'multipart/form-data'\r\n        }\r\n      }).then(res => {\r\n        if (res.data === '图片上传失败！') return this.$message.error('广告上传失败')\r\n        this.form.pic = res.data\r\n        this.$http.post('/adv/updateAdv', this.form).then(rew => {\r\n          if (rew.status !== 200 || rew.data !== true) return this.$message.error('修改失败')\r\n          this.$router.push('/adv/home')\r\n          this.$message.success('修改成功')\r\n        }).catch(rew => {\r\n          console.log(rew)\r\n        })\r\n      }).catch(res => {\r\n        console.log(res)\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\nh2 {\r\n  text-align: center;\r\n  margin-bottom: 30px;\r\n}\r\n.el-row {\r\n  margin-bottom: 30px;\r\n}\r\n</style>\r\n"],"sourceRoot":"src/views/adv"}]}