{"remainingRequest":"D:\\myCompany\\project\\aaa\\new\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\myCompany\\project\\aaa\\new\\src\\views\\pic\\Addcarpic.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\myCompany\\project\\aaa\\new\\src\\views\\pic\\Addcarpic.vue","mtime":1592471754768},{"path":"D:\\myCompany\\project\\aaa\\new\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\myCompany\\project\\aaa\\new\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\myCompany\\project\\aaa\\new\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\myCompany\\project\\aaa\\new\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQpleHBvcnQgZGVmYXVsdCB7DQogIGRhdGEgKCkgew0KICAgIHJldHVybiB7DQogICAgICBzZXJpZXM6IFtdLA0KICAgICAgLy8g6KGo5Y2VDQogICAgICBmb3JtSW5saW5lOiB7DQogICAgICAgIHNlcmllczogJycsDQogICAgICAgIHR5cGU6ICcnLA0KICAgICAgICBjb2xvcjogJycsDQogICAgICAgIHBsYWNlOiAnJywNCiAgICAgICAgbGlzdDogW10NCiAgICAgIH0sDQogICAgICAvLyDovabns7sNCiAgICAgIG9wdGlvbnM6IFtdLA0KICAgICAgLy8g6L2m5Z6LDQogICAgICB0eXBlTGlzdDogW10sDQogICAgICAvLyDpopzoibINCiAgICAgIGNvbG9yTGlzdDogW10sDQogICAgICAvLyDlm77niYfpm4blkIgNCiAgICAgIGltZ0xpc3Q6IFtdDQogICAgfQ0KICB9LA0KICBjb21wdXRlZDogew0KICAgIGRpc2FibGVkVHlwZSAoKSB7DQogICAgICBpZiAodGhpcy5zZXJpZXMubGVuZ3RoID09PSAwKSB7DQogICAgICAgIHJldHVybiB0cnVlDQogICAgICB9DQogICAgICByZXR1cm4gZmFsc2UNCiAgICB9LA0KICAgIGRpc2FibGVkQ29sb3IgKCkgew0KICAgICAgaWYgKHRoaXMuZm9ybUlubGluZS5zZXJpZXMgPT09ICcnKSB7DQogICAgICAgIHJldHVybiB0cnVlDQogICAgICB9DQogICAgICByZXR1cm4gZmFsc2UNCiAgICB9LA0KICB9LA0KICBtZXRob2RzOiB7DQogICAgLy8g6I635Y+W6L2m57O7DQogICAgYXN5bmMgZ2V0U2VyaWVzICgpIHsNCiAgICAgIGNvbnN0IHsgZGF0YTogcmVzIH0gPSBhd2FpdCB0aGlzLiRodHRwLnBvc3QoJy9jYXIvamlsaWFuJykNCiAgICAgIHRoaXMub3B0aW9ucyA9IHJlcw0KICAgIH0sDQogICAgLy8g6I635Y+W6L2m5Z6LDQogICAgYXN5bmMgZ2V0VHlwZSAoY2FsbGJhY2spIHsNCiAgICAgIGlmIChjYWxsYmFjayA9PT0gdHJ1ZSkgew0KICAgICAgICBjb25zdCB7IGRhdGE6IHJlcyB9ID0gYXdhaXQgdGhpcy4kaHR0cC5wb3N0KCcvY2FyL2dldEMnLCB7DQogICAgICAgICAgc2VyaWVzOiB0aGlzLnNlcmllc1sxXQ0KICAgICAgICB9KQ0KICAgICAgICB0aGlzLnR5cGVMaXN0ID0gcmVzDQogICAgICAgIHRoaXMuZm9ybUlubGluZS5zZXJpZXMgPSB0aGlzLnNlcmllc1sxXQ0KICAgICAgfQ0KICAgIH0sDQogICAgLy8g6I635Y+W6aKc6ImyDQogICAgYXN5bmMgZ2V0Q29sb3IgKGNhbGxiYWNrKSB7DQogICAgICBjb25zdCB7IGRhdGE6IHJlcyB9ID0gYXdhaXQgdGhpcy4kaHR0cC5wb3N0KCcvcGljL2dldENvbG9yJywgew0KICAgICAgICBzZXJpZXM6IHRoaXMuZm9ybUlubGluZS5zZXJpZXMsDQogICAgICAgIHR5cGU6IHRoaXMuZm9ybUlubGluZS50eXBlDQogICAgICB9KQ0KICAgICAgdGhpcy5jb2xvckxpc3QgPSByZXMNCiAgICB9LA0KICAgIC8vIOaUueWPmOi9puezuw0KICAgIGNoYW5nZUJyYW5kU2VyaWVzICgpIHsNCiAgICAgIHRoaXMuZm9ybUlubGluZS50eXBlID0gJycsDQogICAgICB0aGlzLmZvcm1JbmxpbmUuY29sb3IgPSAnJw0KICAgIH0sDQogICAgLy8g5pS55Y+Y6aKc6ImyDQogICAgY2hhbmdlVHlwZSAoKSB7DQogICAgICB0aGlzLmZvcm1JbmxpbmUuY29sb3IgPSAnJw0KICAgIH0sDQogICAgLy8g5Zu+54mH5LiK5Lyg5oiQ5Yqf55qE5Zue6LCD5Ye95pWwDQogICAgaGFuZGxlU3VjY2VzcyAocmVzKSB7DQogICAgICB0aGlzLmZvcm1JbmxpbmUubGlzdC5wdXNoKHJlcykNCiAgICB9LA0KICAgIC8vIOS4iuS8oA0KICAgIGFzeW5jIHVwTG9hZCAoKSB7DQogICAgICBpZiAodGhpcy5mb3JtSW5saW5lLnNlcmllcyA9PT0gJycgfHwgdGhpcy5mb3JtSW5saW5lLmNvbG9yID09PSAnJyB8fCB0aGlzLmZvcm1JbmxpbmUudHlwZSA9PT0gJycgfHwgdGhpcy5mb3JtSW5saW5lLnBsYWNlID09PSAnJyB8fCB0aGlzLmZvcm1JbmxpbmUubGlzdC5sZW5ndGggPT09IDApIHsNCiAgICAgICAgcmV0dXJuIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+ivt+WujOWWhOWGheWuuScpDQogICAgICB9DQogICAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLiRodHRwLnBvc3QoJy9waWMvYWRkUGljJywgdGhpcy5mb3JtSW5saW5lKQ0KICAgICAgaWYgKHJlcy5zdGF0dXMgIT09IDIwMCB8fCByZXMuZGF0YSAhPT0gdHJ1ZSkgew0KICAgICAgICByZXR1cm4gdGhpcy4kbWVzc2FnZS5lcnJvcign5o+Q5Lqk5aSx6LSlJykNCiAgICAgIH0NCiAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygn5LiK5Lyg5oiQ5YqfJykNCiAgICAgIHRoaXMuJHJvdXRlci5nbygtMSkNCiAgICB9DQogIH0sDQogIGNyZWF0ZWQgKCkgew0KICAgIC8vIOiOt+WPlui9puezuw0KICAgIHRoaXMuZ2V0U2VyaWVzKCkNCiAgfQ0KfQ0K"},{"version":3,"sources":["Addcarpic.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Addcarpic.vue","sourceRoot":"src/views/pic","sourcesContent":["<template>\r\n  <div>\r\n    <h3>新增汽车图片</h3>\r\n    <ul>\r\n      <li>\r\n        <h4>车系</h4>\r\n        <el-cascader filterable v-model=\"series\" size=\"mini\" :options=\"options\" :props=\"{ value: 'label', label: 'label'}\" @change=\"changeBrandSeries\"></el-cascader>\r\n      </li>\r\n      <li>\r\n        <h4>车型</h4>\r\n        <el-select v-model=\"formInline.type\" @visible-change=\"getType($event)\" placeholder=\"请选择车型\" size=\"mini\" @change=\"changeType\" :disabled=\"disabledType\">\r\n          <el-option v-for=\"item in typeList\" :key=\"item.c\" :label=\"item.c\" :value=\"item.c\"></el-option>\r\n        </el-select>\r\n      </li>\r\n      <li>\r\n        <h4>颜色</h4>\r\n        <el-select v-model=\"formInline.color\" @visible-change=\"getColor($event)\" placeholder=\"请选择颜色\" size=\"mini\" :disabled=\"disabledColor\">\r\n          <el-option v-for=\"item in colorList\" :key=\"item\" :label=\"item\" :value=\"item\"></el-option>\r\n        </el-select>\r\n      </li>\r\n      <li>\r\n        <h4>位置</h4>\r\n        <el-select v-model=\"formInline.place\" placeholder=\"请选择图片位置\" size=\"mini\">\r\n          <el-option label=\"外观\" value=\"外观\"></el-option>\r\n          <el-option label=\"内饰\" value=\"内饰\"></el-option>\r\n          <el-option label=\"空间\" value=\"空间\"></el-option>\r\n        </el-select>\r\n      </li>\r\n    </ul>\r\n    <!-- 图片上传 -->\r\n    <div style=\"margin-top: 50px; font-size: 14px; color: #555\">(建议尺寸: 400 x 200)</div>\r\n    <el-upload\r\n      :on-success=\"handleSuccess\" \r\n      class=\"upload-demo\"\r\n      name=\"image_data\"\r\n      drag\r\n      action=\"https://zhongdianqiche.com:447/upload/upload2\"\r\n      multiple>\r\n      <i class=\"el-icon-upload\"></i>\r\n      <div class=\"el-upload__text\">将文件拖到此处，或<em>点击上传</em></div>\r\n      <div class=\"el-upload__tip\" slot=\"tip\">只能上传jpg/png文件，且不超过500kb</div>\r\n    </el-upload>\r\n    <!-- 提交 -->\r\n    <el-button style=\"width: 650px\" @click=\"upLoad\" type=\"primary\">上传</el-button>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data () {\r\n    return {\r\n      series: [],\r\n      // 表单\r\n      formInline: {\r\n        series: '',\r\n        type: '',\r\n        color: '',\r\n        place: '',\r\n        list: []\r\n      },\r\n      // 车系\r\n      options: [],\r\n      // 车型\r\n      typeList: [],\r\n      // 颜色\r\n      colorList: [],\r\n      // 图片集合\r\n      imgList: []\r\n    }\r\n  },\r\n  computed: {\r\n    disabledType () {\r\n      if (this.series.length === 0) {\r\n        return true\r\n      }\r\n      return false\r\n    },\r\n    disabledColor () {\r\n      if (this.formInline.series === '') {\r\n        return true\r\n      }\r\n      return false\r\n    },\r\n  },\r\n  methods: {\r\n    // 获取车系\r\n    async getSeries () {\r\n      const { data: res } = await this.$http.post('/car/jilian')\r\n      this.options = res\r\n    },\r\n    // 获取车型\r\n    async getType (callback) {\r\n      if (callback === true) {\r\n        const { data: res } = await this.$http.post('/car/getC', {\r\n          series: this.series[1]\r\n        })\r\n        this.typeList = res\r\n        this.formInline.series = this.series[1]\r\n      }\r\n    },\r\n    // 获取颜色\r\n    async getColor (callback) {\r\n      const { data: res } = await this.$http.post('/pic/getColor', {\r\n        series: this.formInline.series,\r\n        type: this.formInline.type\r\n      })\r\n      this.colorList = res\r\n    },\r\n    // 改变车系\r\n    changeBrandSeries () {\r\n      this.formInline.type = '',\r\n      this.formInline.color = ''\r\n    },\r\n    // 改变颜色\r\n    changeType () {\r\n      this.formInline.color = ''\r\n    },\r\n    // 图片上传成功的回调函数\r\n    handleSuccess (res) {\r\n      this.formInline.list.push(res)\r\n    },\r\n    // 上传\r\n    async upLoad () {\r\n      if (this.formInline.series === '' || this.formInline.color === '' || this.formInline.type === '' || this.formInline.place === '' || this.formInline.list.length === 0) {\r\n        return this.$message.error('请完善内容')\r\n      }\r\n      const res = await this.$http.post('/pic/addPic', this.formInline)\r\n      if (res.status !== 200 || res.data !== true) {\r\n        return this.$message.error('提交失败')\r\n      }\r\n      this.$message.success('上传成功')\r\n      this.$router.go(-1)\r\n    }\r\n  },\r\n  created () {\r\n    // 获取车系\r\n    this.getSeries()\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\nul {\r\n  li {\r\n    display: flex;\r\n    justify-content: flex-start;\r\n    margin-bottom: 15px;\r\n    h4 {\r\n      width: 100px;\r\n    }\r\n    .el-cascader, .el-input, .el-select {\r\n      width: 300px;\r\n    }\r\n  }\r\n}\r\n</style>\r\n"]}]}