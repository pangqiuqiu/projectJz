{"remainingRequest":"D:\\myCompany\\zhongdianqiche\\manage\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\myCompany\\zhongdianqiche\\manage\\src\\views\\pic\\Addcarpic.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\myCompany\\zhongdianqiche\\manage\\src\\views\\pic\\Addcarpic.vue","mtime":1602829957249},{"path":"D:\\myCompany\\zhongdianqiche\\manage\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\myCompany\\zhongdianqiche\\manage\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\myCompany\\zhongdianqiche\\manage\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\myCompany\\zhongdianqiche\\manage\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQpleHBvcnQgZGVmYXVsdCB7DQogIGRhdGEgKCkgew0KICAgIHJldHVybiB7DQogICAgICBzZXJpZXM6IFtdLA0KICAgICAgLy8g6KGo5Y2VDQogICAgICBmb3JtSW5saW5lOiB7DQogICAgICAgIHNlcmllczogJycsDQogICAgICAgIHR5cGU6ICcnLA0KICAgICAgICBjb2xvcjogJycsDQogICAgICAgIHBsYWNlOiAnJywNCiAgICAgICAgbGlzdDogW10NCiAgICAgIH0sDQogICAgICAvLyDovabns7sNCiAgICAgIG9wdGlvbnM6IFtdLA0KICAgICAgLy8g6L2m5Z6LDQogICAgICB0eXBlTGlzdDogW10sDQogICAgICAvLyDpopzoibINCiAgICAgIGNvbG9yTGlzdDogW10sDQogICAgICAvLyDlm77niYfpm4blkIgNCiAgICAgIGltZ0xpc3Q6IFtdDQogICAgfQ0KICB9LA0KICBjb21wdXRlZDogew0KICAgIGRpc2FibGVkVHlwZSAoKSB7DQogICAgICBpZiAodGhpcy5zZXJpZXMubGVuZ3RoID09PSAwKSB7DQogICAgICAgIHJldHVybiB0cnVlDQogICAgICB9DQogICAgICByZXR1cm4gZmFsc2UNCiAgICB9LA0KICAgIGRpc2FibGVkQ29sb3IgKCkgew0KICAgICAgaWYgKHRoaXMuZm9ybUlubGluZS5zZXJpZXMgPT09ICcnIHx8IHRoaXMuZm9ybUlubGluZS5wbGFjZSA9PT0gJycpIHsNCiAgICAgICAgcmV0dXJuIHRydWUNCiAgICAgIH0NCiAgICAgIHJldHVybiBmYWxzZQ0KICAgIH0sDQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICAvLyDojrflj5bovabns7sNCiAgICBhc3luYyBnZXRTZXJpZXMgKCkgew0KICAgICAgY29uc3QgeyBkYXRhOiByZXMgfSA9IGF3YWl0IHRoaXMuJGh0dHAucG9zdCgnL2Nhci9qaWxpYW4nKQ0KICAgICAgdGhpcy5vcHRpb25zID0gcmVzDQogICAgfSwNCiAgICAvLyDojrflj5bovablnosNCiAgICBhc3luYyBnZXRUeXBlIChjYWxsYmFjaykgew0KICAgICAgaWYgKGNhbGxiYWNrID09PSB0cnVlKSB7DQogICAgICAgIGNvbnN0IHsgZGF0YTogcmVzIH0gPSBhd2FpdCB0aGlzLiRodHRwLnBvc3QoJy9jYXIvZ2V0QycsIHsNCiAgICAgICAgICBzZXJpZXM6IHRoaXMuc2VyaWVzWzFdDQogICAgICAgIH0pDQogICAgICAgIHRoaXMudHlwZUxpc3QgPSByZXMNCiAgICAgICAgdGhpcy5mb3JtSW5saW5lLnNlcmllcyA9IHRoaXMuc2VyaWVzWzFdDQogICAgICB9DQogICAgfSwNCiAgICAvLyDojrflj5bpopzoibINCiAgICBhc3luYyBnZXRDb2xvciAoY2FsbGJhY2spIHsNCiAgICAgIGlmKGNhbGxiYWNrID09PSB0cnVlKSB7DQogICAgICAgIGNvbnN0IHsgZGF0YTogcmVzIH0gPSBhd2FpdCB0aGlzLiRodHRwLnBvc3QoJy9waWMvZ2V0Q29sb3InLCB7DQogICAgICAgICAgc2VyaWVzOiB0aGlzLmZvcm1JbmxpbmUuc2VyaWVzLA0KICAgICAgICAgIHR5cGU6IHRoaXMuZm9ybUlubGluZS50eXBlLA0KICAgICAgICAgIHBsYWNlOiB0aGlzLmZvcm1JbmxpbmUucGxhY2UNCiAgICAgICAgfSkNCiAgICAgICAgdGhpcy5jb2xvckxpc3QgPSByZXMNCiAgICAgIH0NCiAgICB9LA0KICAgIC8vIOaUueWPmOi9puezuw0KICAgIGNoYW5nZUJyYW5kU2VyaWVzICgpIHsNCiAgICAgIHRoaXMuZm9ybUlubGluZS50eXBlID0gJycsDQogICAgICB0aGlzLmZvcm1JbmxpbmUuY29sb3IgPSAnJw0KICAgIH0sDQogICAgLy8g5pS55Y+Y6L2m5Z6LDQogICAgY2hhbmdlVHlwZSAoKSB7DQogICAgICB0aGlzLmZvcm1JbmxpbmUuY29sb3IgPSAnJw0KICAgIH0sDQogICAgLy8g5pS55Y+Y5L2N572uDQogICAgY2hhbmdlUGxhY2UgKCkgew0KICAgICAgdGhpcy5mb3JtSW5saW5lLmNvbG9yID0gJycNCiAgICB9LA0KICAgIC8vIOWbvueJh+S4iuS8oOaIkOWKn+eahOWbnuiwg+WHveaVsA0KICAgIGhhbmRsZVN1Y2Nlc3MgKHJlcykgew0KICAgICAgdGhpcy5mb3JtSW5saW5lLmxpc3QucHVzaChyZXMpDQogICAgfSwNCiAgICAvLyDkuIrkvKANCiAgICBhc3luYyB1cExvYWQgKCkgew0KICAgICAgaWYgKHRoaXMuZm9ybUlubGluZS5zZXJpZXMgPT09ICcnIHx8IHRoaXMuZm9ybUlubGluZS5jb2xvciA9PT0gJycgfHwgdGhpcy5mb3JtSW5saW5lLnR5cGUgPT09ICcnIHx8IHRoaXMuZm9ybUlubGluZS5wbGFjZSA9PT0gJycgfHwgdGhpcy5mb3JtSW5saW5lLmxpc3QubGVuZ3RoID09PSAwKSB7DQogICAgICAgIHJldHVybiB0aGlzLiRtZXNzYWdlLmVycm9yKCfor7flrozlloTlhoXlrrknKQ0KICAgICAgfQ0KICAgICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy4kaHR0cC5wb3N0KCcvcGljL2FkZFBpYycsIHRoaXMuZm9ybUlubGluZSkNCiAgICAgIGlmIChyZXMuc3RhdHVzICE9PSAyMDAgfHwgcmVzLmRhdGEgIT09IHRydWUpIHsNCiAgICAgICAgcmV0dXJuIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+aPkOS6pOWksei0pScpDQogICAgICB9DQogICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+S4iuS8oOaIkOWKnycpDQogICAgICB0aGlzLiRyb3V0ZXIuZ28oLTEpDQogICAgfQ0KICB9LA0KICBjcmVhdGVkICgpIHsNCiAgICAvLyDojrflj5bovabns7sNCiAgICB0aGlzLmdldFNlcmllcygpDQogIH0NCn0NCg=="},{"version":3,"sources":["Addcarpic.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Addcarpic.vue","sourceRoot":"src/views/pic","sourcesContent":["<template>\r\n  <div>\r\n    <h3>新增汽车图片</h3>\r\n    <ul>\r\n      <li>\r\n        <h4>车系</h4>\r\n        <el-cascader filterable v-model=\"series\" size=\"mini\" :options=\"options\" :props=\"{ value: 'label', label: 'label'}\" @change=\"changeBrandSeries\"></el-cascader>\r\n      </li>\r\n      <li>\r\n        <h4>车型</h4>\r\n        <el-select v-model=\"formInline.type\" @visible-change=\"getType($event)\" placeholder=\"请选择车型\" size=\"mini\" @change=\"changeType\" :disabled=\"disabledType\">\r\n          <el-option v-for=\"item in typeList\" :key=\"item.c\" :label=\"item.c\" :value=\"item.c\"></el-option>\r\n        </el-select>\r\n      </li>\r\n      <li>\r\n        <h4>位置</h4>\r\n        <el-select v-model=\"formInline.place\" placeholder=\"请选择图片位置\" size=\"mini\" @change=\"changePlace\">\r\n          <el-option label=\"外观\" value=\"外观\"></el-option>\r\n          <el-option label=\"内饰\" value=\"内饰\"></el-option>\r\n          <el-option label=\"空间\" value=\"空间\"></el-option>\r\n        </el-select>\r\n      </li>\r\n      <li>\r\n        <h4>颜色</h4>\r\n        <el-select v-model=\"formInline.color\" @visible-change=\"getColor($event)\" placeholder=\"请选择颜色\" size=\"mini\" :disabled=\"disabledColor\">\r\n          <el-option v-for=\"item in colorList\" :key=\"item\" :label=\"item\" :value=\"item\"></el-option>\r\n        </el-select>\r\n      </li>\r\n    </ul>\r\n    <!-- 图片上传 -->\r\n    <div style=\"margin-top: 50px; font-size: 14px; color: #555\">(建议尺寸: 400 x 200)</div>\r\n    <el-upload\r\n      :on-success=\"handleSuccess\"\r\n      class=\"upload-demo\"\r\n      name=\"image_data\"\r\n      drag\r\n      action=\"https://zhongdianqiche.com:447/upload/upload2\"\r\n      multiple>\r\n      <i class=\"el-icon-upload\"></i>\r\n      <div class=\"el-upload__text\">将文件拖到此处，或<em>点击上传</em></div>\r\n    </el-upload>\r\n    <!-- 提交 -->\r\n    <el-button style=\"width: 650px\" @click=\"upLoad\" type=\"primary\">上传</el-button>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data () {\r\n    return {\r\n      series: [],\r\n      // 表单\r\n      formInline: {\r\n        series: '',\r\n        type: '',\r\n        color: '',\r\n        place: '',\r\n        list: []\r\n      },\r\n      // 车系\r\n      options: [],\r\n      // 车型\r\n      typeList: [],\r\n      // 颜色\r\n      colorList: [],\r\n      // 图片集合\r\n      imgList: []\r\n    }\r\n  },\r\n  computed: {\r\n    disabledType () {\r\n      if (this.series.length === 0) {\r\n        return true\r\n      }\r\n      return false\r\n    },\r\n    disabledColor () {\r\n      if (this.formInline.series === '' || this.formInline.place === '') {\r\n        return true\r\n      }\r\n      return false\r\n    },\r\n  },\r\n  methods: {\r\n    // 获取车系\r\n    async getSeries () {\r\n      const { data: res } = await this.$http.post('/car/jilian')\r\n      this.options = res\r\n    },\r\n    // 获取车型\r\n    async getType (callback) {\r\n      if (callback === true) {\r\n        const { data: res } = await this.$http.post('/car/getC', {\r\n          series: this.series[1]\r\n        })\r\n        this.typeList = res\r\n        this.formInline.series = this.series[1]\r\n      }\r\n    },\r\n    // 获取颜色\r\n    async getColor (callback) {\r\n      if(callback === true) {\r\n        const { data: res } = await this.$http.post('/pic/getColor', {\r\n          series: this.formInline.series,\r\n          type: this.formInline.type,\r\n          place: this.formInline.place\r\n        })\r\n        this.colorList = res\r\n      }\r\n    },\r\n    // 改变车系\r\n    changeBrandSeries () {\r\n      this.formInline.type = '',\r\n      this.formInline.color = ''\r\n    },\r\n    // 改变车型\r\n    changeType () {\r\n      this.formInline.color = ''\r\n    },\r\n    // 改变位置\r\n    changePlace () {\r\n      this.formInline.color = ''\r\n    },\r\n    // 图片上传成功的回调函数\r\n    handleSuccess (res) {\r\n      this.formInline.list.push(res)\r\n    },\r\n    // 上传\r\n    async upLoad () {\r\n      if (this.formInline.series === '' || this.formInline.color === '' || this.formInline.type === '' || this.formInline.place === '' || this.formInline.list.length === 0) {\r\n        return this.$message.error('请完善内容')\r\n      }\r\n      const res = await this.$http.post('/pic/addPic', this.formInline)\r\n      if (res.status !== 200 || res.data !== true) {\r\n        return this.$message.error('提交失败')\r\n      }\r\n      this.$message.success('上传成功')\r\n      this.$router.go(-1)\r\n    }\r\n  },\r\n  created () {\r\n    // 获取车系\r\n    this.getSeries()\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\nul {\r\n  li {\r\n    display: flex;\r\n    justify-content: flex-start;\r\n    margin-bottom: 15px;\r\n    h4 {\r\n      width: 100px;\r\n    }\r\n    .el-cascader, .el-input, .el-select {\r\n      width: 300px;\r\n    }\r\n  }\r\n}\r\n</style>\r\n"]}]}