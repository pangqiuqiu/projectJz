{"remainingRequest":"D:\\myCompany\\project\\aaa\\new\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\myCompany\\project\\aaa\\new\\src\\views\\pic\\Add.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\myCompany\\project\\aaa\\new\\src\\views\\pic\\Add.vue","mtime":1590141162608},{"path":"D:\\myCompany\\project\\aaa\\new\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\myCompany\\project\\aaa\\new\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\myCompany\\project\\aaa\\new\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\myCompany\\project\\aaa\\new\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQpleHBvcnQgZGVmYXVsdCB7DQogIGRhdGEgKCkgew0KICAgIHJldHVybiB7DQogICAgICAvLyDooajljZUNCiAgICAgIGZvcm1JbmxpbmU6IHsNCiAgICAgICAgdGl0bGU6ICcnLA0KICAgICAgICB0eXBlOiAnJywNCiAgICAgICAgc2VyaWVzOiAnJywNCiAgICAgICAgcGljOiAnJw0KICAgICAgfSwNCiAgICAgIC8vIOi9puezuw0KICAgICAgdmFsdWU6IFtdLA0KICAgICAgb3B0aW9uczogW10NCiAgICB9DQogIH0sDQogIGNyZWF0ZWQgKCkgew0KICAgIHRoaXMuZ2V0U2VyaWVzKCkNCiAgfSwNCiAgbWV0aG9kczogew0KICAgIC8vIOWTgeeJjOi9puezuw0KICAgIGFzeW5jIGdldFNlcmllcyAoKSB7DQogICAgICBjb25zdCB7IGRhdGE6IHJlcyB9ID0gYXdhaXQgdGhpcy4kaHR0cC5wb3N0KCcvY2FyL2ppbGlhbicpDQogICAgICB0aGlzLm9wdGlvbnMgPSByZXMNCiAgICB9LA0KICAgIC8vIOS4iuS8oA0KICAgIGFzeW5jIHN1Ym1pdCAoKSB7DQogICAgICBpZiAodGhpcy5mb3JtSW5saW5lLnRpdGxlID09PSAnJyB8fCB0aGlzLmZvcm1JbmxpbmUudHlwZSA9PT0gJycgfHwgdGhpcy52YWx1ZS5sZW5ndGggPT09IDAgfHwgdGhpcy4kcmVmcy5uZXdfaW1hZ2UuZmlsZXNbMF0gPT09IHVuZGVmaW5lZCkgew0KICAgICAgICByZXR1cm4gdGhpcy4kbWVzc2FnZS5lcnJvcign6K+35a6M5ZaE5YaF5a65JykNCiAgICAgIH0NCiAgICAgIHRoaXMuZm9ybUlubGluZS5zZXJpZXMgPSB0aGlzLnZhbHVlWzFdDQogICAgICAvLyDkuIrkvKDlm77niYcNCiAgICAgIGNvbnN0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCkNCiAgICAgIGZvcm1EYXRhLmFwcGVuZCgnaW1hZ2VfZGF0YScsIHRoaXMuJHJlZnMubmV3X2ltYWdlLmZpbGVzWzBdKQ0KICAgICAgY29uc3QgcmV3ID0gYXdhaXQgdGhpcy4kaHR0cC5wb3N0KCcvdXBsb2FkL3VwbG9hZDUnLCBmb3JtRGF0YSwgew0KICAgICAgICBoZWFkZXJzOiB7DQogICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdtdWx0aXBhcnQvZm9ybS1kYXRhJw0KICAgICAgICB9DQogICAgICB9KQ0KICAgICAgaWYgKHJldy5zdGF0dXMgIT09IDIwMCB8fCByZXcuZGF0YSA9PT0gJ+WbvueJh+S4iuS8oOWksei0pe+8gScpIHsNCiAgICAgICAgcmV0dXJuIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+WbvueJh+S4iuS8oOWksei0pSwg6K+36YeN5paw5LiK5LygJykNCiAgICAgIH0NCiAgICAgIHRoaXMuZm9ybUlubGluZS5waWMgPSByZXcuZGF0YQ0KICAgICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy4kaHR0cC5wb3N0KCcvcGljL2FkZEhvdFNlcmllcycsIHRoaXMuZm9ybUlubGluZSkNCiAgICAgIGlmIChyZXMuc3RhdHVzICE9PSAyMDAgfHwgcmVzLmRhdGEgIT09IHRydWUpIHsNCiAgICAgICAgcmV0dXJuIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+aPkOS6pOWksei0pScpDQogICAgICB9DQogICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+aPkOS6pOaIkOWKnycpDQogICAgICB0aGlzLiRyb3V0ZXIuZ28oLTEpDQogICAgfQ0KICB9DQp9DQo="},{"version":3,"sources":["Add.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;AA2BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Add.vue","sourceRoot":"src/views/pic","sourcesContent":["<template>\r\n  <ul>\r\n    <li>\r\n      <h4>标题</h4>\r\n      <el-input placeholder=\"请输入标题\" v-model=\"formInline.title\" size=\"mini\"></el-input>\r\n    </li>\r\n    <li>\r\n      <h4>车系</h4>\r\n      <el-cascader v-model=\"value\" filterable size=\"mini\" :options=\"options\" :props=\"{ value: 'label', label: 'label'}\"></el-cascader>\r\n    </li>\r\n    <li>\r\n      <h4>位置</h4>\r\n      <el-select v-model=\"formInline.type\" placeholder=\"请选择位置\" size=\"mini\">\r\n        <el-option label=\"图片1\" value=\"图片1\"></el-option>\r\n        <el-option label=\"图片2-7\" value=\"图片2-7\"></el-option>\r\n      </el-select>\r\n    </li>\r\n    <li>\r\n      <h4>图片上传</h4>\r\n      <input type=\"file\" id=\"saveImage\" name=\"myphoto\" accept=\"image/png,image/gif,image/jpeg\" ref=\"new_image\">\r\n      <div style=\"color: #999; font-size: 12px; line-height: 26px;margin-left: 20px\">图片尺寸：建议上传 500 x 300, 图片格式为png/gif/jpeg, 大小不大于2M</div>\r\n    </li>\r\n    <el-button type=\"primary\" size=\"mini\" @click=\"submit\">上传</el-button>\r\n  </ul>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data () {\r\n    return {\r\n      // 表单\r\n      formInline: {\r\n        title: '',\r\n        type: '',\r\n        series: '',\r\n        pic: ''\r\n      },\r\n      // 车系\r\n      value: [],\r\n      options: []\r\n    }\r\n  },\r\n  created () {\r\n    this.getSeries()\r\n  },\r\n  methods: {\r\n    // 品牌车系\r\n    async getSeries () {\r\n      const { data: res } = await this.$http.post('/car/jilian')\r\n      this.options = res\r\n    },\r\n    // 上传\r\n    async submit () {\r\n      if (this.formInline.title === '' || this.formInline.type === '' || this.value.length === 0 || this.$refs.new_image.files[0] === undefined) {\r\n        return this.$message.error('请完善内容')\r\n      }\r\n      this.formInline.series = this.value[1]\r\n      // 上传图片\r\n      const formData = new FormData()\r\n      formData.append('image_data', this.$refs.new_image.files[0])\r\n      const rew = await this.$http.post('/upload/upload5', formData, {\r\n        headers: {\r\n          'Content-Type': 'multipart/form-data'\r\n        }\r\n      })\r\n      if (rew.status !== 200 || rew.data === '图片上传失败！') {\r\n        return this.$message.error('图片上传失败, 请重新上传')\r\n      }\r\n      this.formInline.pic = rew.data\r\n      const res = await this.$http.post('/pic/addHotSeries', this.formInline)\r\n      if (res.status !== 200 || res.data !== true) {\r\n        return this.$message.error('提交失败')\r\n      }\r\n      this.$message.success('提交成功')\r\n      this.$router.go(-1)\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n.el-input, .el-cascader, .el-select, .el-button {\r\n  width: 300px;\r\n}\r\n\r\n.el-button {\r\n  margin-top: 30px;\r\n}\r\n\r\nul {\r\n  li {\r\n    display: flex;\r\n    justify-content: flex-start;\r\n    margin-bottom: 20px;\r\n    h4 {\r\n      width: 100px;\r\n    }\r\n  }\r\n}\r\n</style>\r\n"]}]}