{"remainingRequest":"D:\\myCompany\\zhongdianqiche\\manage\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\myCompany\\zhongdianqiche\\manage\\src\\views\\app\\AddRelease.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\myCompany\\zhongdianqiche\\manage\\src\\views\\app\\AddRelease.vue","mtime":1602815598344},{"path":"D:\\myCompany\\zhongdianqiche\\manage\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\myCompany\\zhongdianqiche\\manage\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\myCompany\\zhongdianqiche\\manage\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\myCompany\\zhongdianqiche\\manage\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\myCompany\\zhongdianqiche\\manage\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBkYXRlQ29udmVyc2lvbk1vbnRoIH0gZnJvbSAnLi4vLi4vYXNzZXRzL2pzL3RpbWVyLmpzJw0KZXhwb3J0IGRlZmF1bHQgew0KICBkYXRhICgpIHsNCiAgICByZXR1cm4gew0KICAgICAgLy8g5ZOB54mMDQogICAgICBicmFuZExpc3Q6IFtdLA0KICAgICAgLy8g6L2m57O7DQogICAgICBzZXJpZXNMaXN0OiBbXSwNCiAgICAgIC8vIOaVsOaNrg0KICAgICAgZm9ybUFsaWduOiB7DQogICAgICAgIGJyYW5kOiAnJywNCiAgICAgICAgc2VyaWVzOiAnJywNCiAgICAgICAgbW9udGhzOiAnJywNCiAgICAgICAgbGFiZWw6ICcnDQogICAgICB9DQogICAgfQ0KICB9LA0KICBjb21wdXRlZDogew0KICAgIGRpc2FibGVkICgpIHsNCiAgICAgIGlmICh0aGlzLmZvcm1BbGlnbi5icmFuZCAmJiB0aGlzLmZvcm1BbGlnbi5zZXJpZXMgJiYgdGhpcy5mb3JtQWxpZ24ubW9udGhzICYmIHRoaXMuZm9ybUFsaWduLmxhYmVsKSByZXR1cm4gZmFsc2UNCiAgICAgIHJldHVybiB0cnVlDQogICAgfQ0KICB9LA0KICBtZXRob2RzOiB7DQogICAgLy8g6I635Y+W5ZOB54mMDQogICAgYXN5bmMgZ2V0QnJhbmQgKCkgew0KICAgICAgY29uc3QgeyBkYXRhOiByZXMgfSA9IGF3YWl0IHRoaXMuJGh0dHAucG9zdCgnL2Nhci9zaG93QWxsQnJhbmQnKQ0KICAgICAgdGhpcy5icmFuZExpc3QgPSByZXMNCiAgICB9LA0KICAgIC8vIOiOt+WPlui9puezuw0KICAgIGFzeW5jIHZpc2libGUgKGNhbGxiYWNrKSB7DQogICAgICBpZiAoY2FsbGJhY2spIHsNCiAgICAgICAgY29uc3QgeyBkYXRhOiByZXMgfSA9IGF3YWl0IHRoaXMuJGh0dHAucG9zdCgnL2Nhci9zaG93U2VyaWVzJywgew0KICAgICAgICAgIGJyYW5kOiB0aGlzLmZvcm1BbGlnbi5icmFuZA0KICAgICAgICB9KQ0KICAgICAgICB0aGlzLnNlcmllc0xpc3QgPSByZXMNCiAgICAgIH0NCiAgICB9LA0KICAgIC8vIOaUueWPmOWTgeeJjA0KICAgIGNoYW5nZSAoKSB7DQogICAgICB0aGlzLmZvcm1BbGlnbi5zZXJpZXMgPSAnJw0KICAgIH0sDQogICAgLy8g5Y+R5biDDQogICAgYXN5bmMgYWRkICgpIHsNCiAgICAgIHRoaXMuZm9ybUFsaWduLm1vbnRocyA9IGRhdGVDb252ZXJzaW9uTW9udGgodGhpcy5mb3JtQWxpZ24ubW9udGhzKQ0KICAgICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy4kaHR0cC5wb3N0KCcvcmFuay9hZGROZXdDYXInLCB0aGlzLmZvcm1BbGlnbikNCiAgICAgIGlmIChyZXMuZGF0YSAhPT0gdHJ1ZSB8fCByZXMuc3RhdHVzICE9PSAyMDApIHJldHVybiB0aGlzLiRtZXNzYWdlLmVycm9yKCflj5HluIPlpLHotKUnKQ0KICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCflj5HluIPmiJDlip8nKQ0KICAgICAgZm9yKGxldCBrIGluIHRoaXMuZm9ybUFsaWduKSB7DQogICAgICAgIHRoaXMuZm9ybUFsaWduW2tdID0gJycNCiAgICAgIH0NCiAgICB9DQogIH0sDQogIGNyZWF0ZWQgKCkgew0KICAgIHRoaXMuZ2V0QnJhbmQoKQ0KICB9DQp9DQo="},{"version":3,"sources":["AddRelease.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"AddRelease.vue","sourceRoot":"src/views/app","sourcesContent":["<template>\r\n  <div>\r\n    <h3>发布新车</h3>\r\n    <ul>\r\n      <li>\r\n        <h4>选择品牌</h4>\r\n        <el-select v-model=\"formAlign.brand\" placeholder=\"请选择\" filterable size=\"mini\" style=\"width: 400px\" @change=\"change\">\r\n          <el-option v-for=\"item in brandList\" :key=\"item\" :label=\"item\" :value=\"item\"></el-option>\r\n        </el-select>\r\n      </li>\r\n      <div class=\"h\"></div>\r\n      <li>\r\n        <h4>选择车系</h4>\r\n        <el-select v-model=\"formAlign.series\" placeholder=\"请选择\" filterable size=\"mini\" style=\"width: 400px\" @visible-change=\"visible($event)\">\r\n          <el-option v-for=\"item in seriesList\" :key=\"item\" :label=\"item\" :value=\"item\"></el-option>\r\n        </el-select>\r\n      </li>\r\n      <div class=\"h\"></div>\r\n      <li>\r\n        <h4>选择时间</h4>\r\n        <el-date-picker v-model=\"formAlign.months\" type=\"month\" placeholder=\"选择月\" size=\"mini\" style=\"width: 400px\"></el-date-picker>\r\n      </li>\r\n      <div class=\"h\"></div>\r\n      <li>\r\n        <h4>选择类型</h4>\r\n        <el-select v-model=\"formAlign.label\" placeholder=\"请选择\" size=\"mini\" style=\"width: 400px\">\r\n          <el-option label=\"新加车型\" value=\"新加车型\"></el-option>\r\n          <el-option label=\"全新车系\" value=\"全新车系\"></el-option>\r\n          <el-option label=\"车系换代\" value=\"车系换代\"></el-option>\r\n          <el-option label=\"小改款\" value=\"小改款\"></el-option>\r\n          <el-option label=\"中期改款\" value=\"中期改款\"></el-option>\r\n        </el-select>\r\n      </li>\r\n      <div class=\"h\"></div>\r\n    </ul>\r\n    <el-button :disabled=\"disabled\" type=\"primary\" @click=\"add\" style=\"width: 300px; margin-left: 50px\">确认发布</el-button>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { dateConversionMonth } from '../../assets/js/timer.js'\r\nexport default {\r\n  data () {\r\n    return {\r\n      // 品牌\r\n      brandList: [],\r\n      // 车系\r\n      seriesList: [],\r\n      // 数据\r\n      formAlign: {\r\n        brand: '',\r\n        series: '',\r\n        months: '',\r\n        label: ''\r\n      }\r\n    }\r\n  },\r\n  computed: {\r\n    disabled () {\r\n      if (this.formAlign.brand && this.formAlign.series && this.formAlign.months && this.formAlign.label) return false\r\n      return true\r\n    }\r\n  },\r\n  methods: {\r\n    // 获取品牌\r\n    async getBrand () {\r\n      const { data: res } = await this.$http.post('/car/showAllBrand')\r\n      this.brandList = res\r\n    },\r\n    // 获取车系\r\n    async visible (callback) {\r\n      if (callback) {\r\n        const { data: res } = await this.$http.post('/car/showSeries', {\r\n          brand: this.formAlign.brand\r\n        })\r\n        this.seriesList = res\r\n      }\r\n    },\r\n    // 改变品牌\r\n    change () {\r\n      this.formAlign.series = ''\r\n    },\r\n    // 发布\r\n    async add () {\r\n      this.formAlign.months = dateConversionMonth(this.formAlign.months)\r\n      const res = await this.$http.post('/rank/addNewCar', this.formAlign)\r\n      if (res.data !== true || res.status !== 200) return this.$message.error('发布失败')\r\n      this.$message.success('发布成功')\r\n      for(let k in this.formAlign) {\r\n        this.formAlign[k] = ''\r\n      }\r\n    }\r\n  },\r\n  created () {\r\n    this.getBrand()\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\nh3 {\r\n  margin-bottom: 20px;\r\n}\r\nul {\r\n  li {\r\n    display: flex;\r\n    justify-content: flex-start;\r\n    h4 {\r\n      font-weight: normal;\r\n      margin-right: 40px;\r\n    }\r\n  }\r\n  .h {\r\n    height: 30px;\r\n  }\r\n}\r\n</style>\r\n"]}]}