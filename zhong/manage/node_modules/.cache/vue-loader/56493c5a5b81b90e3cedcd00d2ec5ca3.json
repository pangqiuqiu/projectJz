{"remainingRequest":"D:\\myCompany\\project\\aaa\\new\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\myCompany\\project\\aaa\\new\\src\\views\\pic\\Addcarpic.vue?vue&type=style&index=0&id=0efdfe08&lang=less&scoped=true&","dependencies":[{"path":"D:\\myCompany\\project\\aaa\\new\\src\\views\\pic\\Addcarpic.vue","mtime":1592471754768},{"path":"D:\\myCompany\\project\\aaa\\new\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\myCompany\\project\\aaa\\new\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\myCompany\\project\\aaa\\new\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\myCompany\\project\\aaa\\new\\node_modules\\less-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\myCompany\\project\\aaa\\new\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\myCompany\\project\\aaa\\new\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKDQp1bCB7DQogIGxpIHsNCiAgICBkaXNwbGF5OiBmbGV4Ow0KICAgIGp1c3RpZnktY29udGVudDogZmxleC1zdGFydDsNCiAgICBtYXJnaW4tYm90dG9tOiAxNXB4Ow0KICAgIGg0IHsNCiAgICAgIHdpZHRoOiAxMDBweDsNCiAgICB9DQogICAgLmVsLWNhc2NhZGVyLCAuZWwtaW5wdXQsIC5lbC1zZWxlY3Qgew0KICAgICAgd2lkdGg6IDMwMHB4Ow0KICAgIH0NCiAgfQ0KfQ0K"},{"version":3,"sources":["Addcarpic.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Addcarpic.vue","sourceRoot":"src/views/pic","sourcesContent":["<template>\r\n  <div>\r\n    <h3>新增汽车图片</h3>\r\n    <ul>\r\n      <li>\r\n        <h4>车系</h4>\r\n        <el-cascader filterable v-model=\"series\" size=\"mini\" :options=\"options\" :props=\"{ value: 'label', label: 'label'}\" @change=\"changeBrandSeries\"></el-cascader>\r\n      </li>\r\n      <li>\r\n        <h4>车型</h4>\r\n        <el-select v-model=\"formInline.type\" @visible-change=\"getType($event)\" placeholder=\"请选择车型\" size=\"mini\" @change=\"changeType\" :disabled=\"disabledType\">\r\n          <el-option v-for=\"item in typeList\" :key=\"item.c\" :label=\"item.c\" :value=\"item.c\"></el-option>\r\n        </el-select>\r\n      </li>\r\n      <li>\r\n        <h4>颜色</h4>\r\n        <el-select v-model=\"formInline.color\" @visible-change=\"getColor($event)\" placeholder=\"请选择颜色\" size=\"mini\" :disabled=\"disabledColor\">\r\n          <el-option v-for=\"item in colorList\" :key=\"item\" :label=\"item\" :value=\"item\"></el-option>\r\n        </el-select>\r\n      </li>\r\n      <li>\r\n        <h4>位置</h4>\r\n        <el-select v-model=\"formInline.place\" placeholder=\"请选择图片位置\" size=\"mini\">\r\n          <el-option label=\"外观\" value=\"外观\"></el-option>\r\n          <el-option label=\"内饰\" value=\"内饰\"></el-option>\r\n          <el-option label=\"空间\" value=\"空间\"></el-option>\r\n        </el-select>\r\n      </li>\r\n    </ul>\r\n    <!-- 图片上传 -->\r\n    <div style=\"margin-top: 50px; font-size: 14px; color: #555\">(建议尺寸: 400 x 200)</div>\r\n    <el-upload\r\n      :on-success=\"handleSuccess\" \r\n      class=\"upload-demo\"\r\n      name=\"image_data\"\r\n      drag\r\n      action=\"https://zhongdianqiche.com:447/upload/upload2\"\r\n      multiple>\r\n      <i class=\"el-icon-upload\"></i>\r\n      <div class=\"el-upload__text\">将文件拖到此处，或<em>点击上传</em></div>\r\n      <div class=\"el-upload__tip\" slot=\"tip\">只能上传jpg/png文件，且不超过500kb</div>\r\n    </el-upload>\r\n    <!-- 提交 -->\r\n    <el-button style=\"width: 650px\" @click=\"upLoad\" type=\"primary\">上传</el-button>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data () {\r\n    return {\r\n      series: [],\r\n      // 表单\r\n      formInline: {\r\n        series: '',\r\n        type: '',\r\n        color: '',\r\n        place: '',\r\n        list: []\r\n      },\r\n      // 车系\r\n      options: [],\r\n      // 车型\r\n      typeList: [],\r\n      // 颜色\r\n      colorList: [],\r\n      // 图片集合\r\n      imgList: []\r\n    }\r\n  },\r\n  computed: {\r\n    disabledType () {\r\n      if (this.series.length === 0) {\r\n        return true\r\n      }\r\n      return false\r\n    },\r\n    disabledColor () {\r\n      if (this.formInline.series === '') {\r\n        return true\r\n      }\r\n      return false\r\n    },\r\n  },\r\n  methods: {\r\n    // 获取车系\r\n    async getSeries () {\r\n      const { data: res } = await this.$http.post('/car/jilian')\r\n      this.options = res\r\n    },\r\n    // 获取车型\r\n    async getType (callback) {\r\n      if (callback === true) {\r\n        const { data: res } = await this.$http.post('/car/getC', {\r\n          series: this.series[1]\r\n        })\r\n        this.typeList = res\r\n        this.formInline.series = this.series[1]\r\n      }\r\n    },\r\n    // 获取颜色\r\n    async getColor (callback) {\r\n      const { data: res } = await this.$http.post('/pic/getColor', {\r\n        series: this.formInline.series,\r\n        type: this.formInline.type\r\n      })\r\n      this.colorList = res\r\n    },\r\n    // 改变车系\r\n    changeBrandSeries () {\r\n      this.formInline.type = '',\r\n      this.formInline.color = ''\r\n    },\r\n    // 改变颜色\r\n    changeType () {\r\n      this.formInline.color = ''\r\n    },\r\n    // 图片上传成功的回调函数\r\n    handleSuccess (res) {\r\n      this.formInline.list.push(res)\r\n    },\r\n    // 上传\r\n    async upLoad () {\r\n      if (this.formInline.series === '' || this.formInline.color === '' || this.formInline.type === '' || this.formInline.place === '' || this.formInline.list.length === 0) {\r\n        return this.$message.error('请完善内容')\r\n      }\r\n      const res = await this.$http.post('/pic/addPic', this.formInline)\r\n      if (res.status !== 200 || res.data !== true) {\r\n        return this.$message.error('提交失败')\r\n      }\r\n      this.$message.success('上传成功')\r\n      this.$router.go(-1)\r\n    }\r\n  },\r\n  created () {\r\n    // 获取车系\r\n    this.getSeries()\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\nul {\r\n  li {\r\n    display: flex;\r\n    justify-content: flex-start;\r\n    margin-bottom: 15px;\r\n    h4 {\r\n      width: 100px;\r\n    }\r\n    .el-cascader, .el-input, .el-select {\r\n      width: 300px;\r\n    }\r\n  }\r\n}\r\n</style>\r\n"]}]}