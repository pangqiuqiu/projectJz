{"remainingRequest":"D:\\myCompany\\zhongdianqiche\\manage\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\myCompany\\zhongdianqiche\\manage\\src\\views\\us\\cooperation\\CaseDetails.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\myCompany\\zhongdianqiche\\manage\\src\\views\\us\\cooperation\\CaseDetails.vue","mtime":1605075104750},{"path":"D:\\myCompany\\zhongdianqiche\\manage\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\myCompany\\zhongdianqiche\\manage\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\myCompany\\zhongdianqiche\\manage\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\myCompany\\zhongdianqiche\\manage\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\myCompany\\zhongdianqiche\\manage\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgV2FuZ2VkaXRvciBmcm9tICcuLi8uLi8uLi9jb21wb25lbnRzL2VkaXRvci9XYW5nZWRpdG9yJw0KaW1wb3J0IEUgZnJvbSAnd2FuZ2VkaXRvcicNCmV4cG9ydCBkZWZhdWx0IHsNCiAgY29tcG9uZW50czogew0KICAgIFdhbmdlZGl0b3INCiAgfSwNCiAgZGF0YSAoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIC8vIOmhtemdouagh+mimA0KICAgICAgdGl0bGU6ICcnLA0KICAgICAgLy8g5LiK5Lyg5o6l5Y+jDQogICAgICBhY3Rpb246ICdodHRwczovL3d3dy56aG9uZ2RpYW5xaWNoZS5jb206NDQ3L3VwbG9hZC91cGxvYWQ1JywNCiAgICAgIC8vIOWPguaVsA0KICAgICAgcnVsZUZvcm06IHsNCiAgICAgICAgY29tcGFueU5hbWU6ICcnLCAvLyDlhazlj7jlkI3np7ANCiAgICAgICAgaW50cm86ICcnLCAvLyDnroDov7ANCiAgICAgICAgY29udGVudDogJycsIC8vIOivpuaDhQ0KICAgICAgICBjb3ZlclBpYzogJycgLy8g5bCB6Z2i5Zu+DQogICAgICB9LA0KICAgICAgZWRpdG9yOiBudWxsLA0KICAgICAgLy8g5qCh6aqMDQogICAgICBydWxlczogew0KICAgICAgICBjb21wYW55TmFtZTogWw0KICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fovpPlhaXlhazlj7jlkI3np7AnLCB0cmlnZ2VyOiAnYmx1cicgfSwNCiAgICAgICAgICB7IG1pbjogNSwgbWVzc2FnZTogJ+mVv+W6puS4jeWwkeS6jiA1IOS4quWtl+espicsIHRyaWdnZXI6ICdibHVyJyB9DQogICAgICAgIF0sDQogICAgICAgIGludHJvOiBbDQogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+i+k+WFpeWQiOS9nOeugOi/sCcsIHRyaWdnZXI6ICdibHVyJyB9LA0KICAgICAgICAgIHsgbWluOiA1LCBtYXg6IDMwLCBtZXNzYWdlOiAn6ZW/5bqm5ZyoIDUg5YiwIDMwIOS4quWtl+espicsIHRyaWdnZXI6ICdibHVyJyB9DQogICAgICAgIF0NCiAgICAgIH0NCiAgICB9DQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICAvLyDlm77niYfkuIrkvKANCiAgICBoYW5kbGVBdmF0YXJTdWNjZXNzKHJlcykgew0KICAgICAgdGhpcy5ydWxlRm9ybS5jb3ZlclBpYyA9IHJlcw0KICAgIH0sDQogICAgYmVmb3JlQXZhdGFyVXBsb2FkKGZpbGUpIHsNCiAgICAgIGNvbnN0IGlzTHQyTSA9IGZpbGUuc2l6ZSAvIDEwMjQgLyAxMDI0IDwgMg0KICAgICAgaWYgKCFpc0x0Mk0pIHJldHVybiB0aGlzLiRtZXNzYWdlLmVycm9yKCfkuIrkvKDlpLTlg4/lm77niYflpKflsI/kuI3og73otoXov4cgMk1CIScpDQogICAgfSwNCiAgICAvLyDor6bmg4UNCiAgICBnZXRNc2cgKGRhdGEpIHsNCiAgICAgIHRoaXMucnVsZUZvcm0uY29udGVudCA9IGRhdGENCiAgICB9LA0KICAgIC8vIOaPkOS6pA0KICAgIHN1Ym1pdEZvcm0gKGZvcm1OYW1lKSB7DQogICAgICBpZiAoIXRoaXMucnVsZUZvcm0uY292ZXJQaWMpIHJldHVybiB0aGlzLiRtZXNzYWdlLmVycm9yKCfor7fkuIrkvKDlsIHpnaLlm74nKQ0KICAgICAgaWYgKCF0aGlzLnJ1bGVGb3JtLmNvbnRlbnQpIHJldHVybiB0aGlzLiRtZXNzYWdlLmVycm9yKCfor7floavlhpnlkIjkvZzor6bmg4UnKQ0KICAgICAgdGhpcy4kcmVmc1tmb3JtTmFtZV0udmFsaWRhdGUoYXN5bmMgdmFsaWQgPT4gew0KICAgICAgICBpZiAoIXZhbGlkKSByZXR1cm4gdGhpcy4kbWVzc2FnZS5lcnJvcign6K+35a6M5ZaE55u45YWz5YaF5a65JykNCiAgICAgICAgaWYgKHRoaXMudGl0bGUgPT09ICfmlrDlop7lkIjkvZzmoYjkvosnKSB7DQogICAgICAgICAgY29uc3QgeyBkYXRhOiByZXMgfSA9IGF3YWl0IHRoaXMuJGh0dHAucG9zdCgnL3VzL2FkZENhc2UnLCB0aGlzLnJ1bGVGb3JtKQ0KICAgICAgICAgIGlmICghcmVzKSByZXR1cm4gdGhpcy4kbWVzc2FnZS5lcnJvcign5o+Q5Lqk5aSx6LSlJykNCiAgICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+aPkOS6pOaIkOWKnycpDQogICAgICAgICAgdGhpcy4kcm91dGVyLmdvKC0xKQ0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIGNvbnN0IHsgZGF0YTogcmVzIH0gPSBhd2FpdCB0aGlzLiRodHRwLnBvc3QoJy91cy91cGRhdGVDYXNlJywgdGhpcy5ydWxlRm9ybSkNCiAgICAgICAgICBpZiAoIXJlcykgcmV0dXJuIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+aPkOS6pOWksei0pScpDQogICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCfmj5DkuqTmiJDlip8nKQ0KICAgICAgICAgIHRoaXMuJHJvdXRlci5nbygtMSkNCiAgICAgICAgfQ0KICAgICAgfSkNCiAgICB9DQogIH0sDQogIGFzeW5jIGNyZWF0ZWQgKCkgew0KICAgIGlmICghdGhpcy4kcm91dGUucXVlcnkuaWQpIHsNCiAgICAgIHRoaXMudGl0bGUgPSAn5paw5aKe5ZCI5L2c5qGI5L6LJw0KICAgIH0gZWxzZSB7DQogICAgICB0aGlzLnRpdGxlID0gJ+S/ruaUueWQiOS9nOahiOS+iycNCiAgICAgIGNvbnN0IHsgZGF0YTogcmVzIH0gPSBhd2FpdCB0aGlzLiRodHRwLnBvc3QoJy91cy9nZXRDYXNlJywgeyBpZDogdGhpcy4kcm91dGUucXVlcnkuaWQgfSkNCiAgICAgIHRoaXMucnVsZUZvcm0gPSByZXMNCiAgICAgIHRoaXMuZWRpdG9yLnR4dC5odG1sKHJlcy5jb250ZW50KQ0KICAgIH0NCiAgfSwNCiAgbW91bnRlZCAoKSB7DQogICAgaWYgKHRoaXMudGl0bGUgPT09ICfkv67mlLnlkIjkvZzmoYjkvosnKSB7DQogICAgICB0aGlzLmVkaXRvciA9IG5ldyBFKHRoaXMuJHJlZnMuZWRpdG9yTWVudSwgdGhpcy4kcmVmcy5lZGl0b3JFbGVtKQ0KICAgICAgdGhpcy5lZGl0b3IuY3VzdG9tQ29uZmlnLm9uY2hhbmdlID0gaHRtbCA9PiB7DQogICAgICAgIHRoaXMucnVsZUZvcm0uY29udGVudCA9IGh0bWwNCiAgICAgIH0NCiAgICAgIC8vIOWbvueJh+S4iuS8oA0KICAgICAgdGhpcy5lZGl0b3IuY3VzdG9tQ29uZmlnLnVwbG9hZEltZ01heFNpemUgPSAyICogMTAyNCAqIDEwMjQNCiAgICAgIHRoaXMuZWRpdG9yLmN1c3RvbUNvbmZpZy51cGxvYWRJbWdTZXJ2ZXIgPSAnaHR0cHM6Ly96aG9uZ2RpYW5xaWNoZS5jb206NDQ3L3VwbG9hZC91cGxvYWQzJw0KICAgICAgdGhpcy5lZGl0b3IuY3VzdG9tQ29uZmlnLnVwbG9hZEZpbGVOYW1lID0gImltYWdlX2RhdGEiDQogICAgICB0aGlzLmVkaXRvci5jdXN0b21Db25maWcuZGVidWcgPSB0cnVlDQogICAgICB0aGlzLmVkaXRvci5jdXN0b21Db25maWcudXBsb2FkSW1nSG9va3MgPSB7DQogICAgICAgIGN1c3RvbUluc2VydDogZnVuY3Rpb24gKGluc2VydEltZywgcmVzdWx0LCBlZGl0b3IpIHsNCiAgICAgICAgICBjb25zdCB1cmwgPSByZXN1bHQudXJsDQogICAgICAgICAgdXJsLmZvckVhY2goaXRlbSA9PiB7DQogICAgICAgICAgICBpbnNlcnRJbWcoaXRlbSkNCiAgICAgICAgICB9KQ0KICAgICAgICB9DQogICAgICB9DQogICAgICB0aGlzLmVkaXRvci5jdXN0b21Db25maWcubWVudXMgPSBbDQogICAgICAgIC8vIOiPnOWNlemFjee9rg0KICAgICAgICAnaGVhZCcsIC8vIOagh+mimA0KICAgICAgICAnYm9sZCcsIC8vIOeyl+S9kw0KICAgICAgICAnZm9udFNpemUnLCAvLyDlrZflj7cNCiAgICAgICAgJ2ZvbnROYW1lJywgLy8g5a2X5L2TDQogICAgICAgICdpdGFsaWMnLCAvLyDmlpzkvZMNCiAgICAgICAgJ3VuZGVybGluZScsIC8vIOS4i+WIkue6vw0KICAgICAgICAnc3RyaWtlVGhyb3VnaCcsIC8vIOWIoOmZpOe6vw0KICAgICAgICAnZm9yZUNvbG9yJywgLy8g5paH5a2X6aKc6ImyDQogICAgICAgICdiYWNrQ29sb3InLCAvLyDog4zmma/popzoibINCiAgICAgICAgJ2xpbmsnLCAvLyDmj5LlhaXpk77mjqUNCiAgICAgICAgLy8gJ2xpc3QnLCAvLyDliJfooagNCiAgICAgICAgJ2p1c3RpZnknLCAvLyDlr7npvZDmlrnlvI8NCiAgICAgICAgJ3F1b3RlJywgLy8g5byV55SoDQogICAgICAgIC8vICdlbW90aWNvbicsIC8vIOihqOaDhQ0KICAgICAgICAnaW1hZ2UnLCAvLyDmj5LlhaXlm77niYcNCiAgICAgICAgJ3RhYmxlJywgLy8g6KGo5qC8DQogICAgICAgICdjb2RlJywgLy8g5o+S5YWl5Luj56CBDQogICAgICAgICd1bmRvJywgLy8g5pKk6ZSADQogICAgICAgICdyZWRvJyAvLyDph43lpI0NCiAgICAgIF0NCiAgICAgIHRoaXMuZWRpdG9yLmN1c3RvbUNvbmZpZy5saW5rQ2hlY2sgPSBmdW5jdGlvbiAodGV4dCwgbGluaykgew0KICAgICAgaWYgKGxpbmsgIT09ICIiKSB7DQogICAgICAgIGNvbnN0IHJlZyA9IC8oaHR0cHxmdHB8aHR0cHMpOlwvXC9bXHdcLV9dKyhcLltcd1wtX10rKSsoW1x3XC1cLixAP149JSY6L35cKyNdKltcd1wtXEA/Xj0lJi9+XCsjXSk/Lw0KICAgICAgICAgIGlmICghcmVnLnRlc3QobGluaykpIHsNCiAgICAgICAgICAgIHJldHVybiAn6K+36L6T5YWl5q2j56Gu55qE572R5Z2AKOS+i+WmgiBodHRwOi8vYmFpZHUuY29tKScNCiAgICAgICAgICB9IGVsc2V7DQogICAgICAgICAgICByZXR1cm4gdHJ1ZQ0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgfQ0KICAgICAgdGhpcy5lZGl0b3IuY3JlYXRlKCkgLy8g5Yib5bu65a+M5paH5pys5a6e5L6LDQogICAgfQ0KICB9DQp9DQo="},{"version":3,"sources":["CaseDetails.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"CaseDetails.vue","sourceRoot":"src/views/us/cooperation","sourcesContent":["<template>\r\n  <div>\r\n    <!-- 标题 -->\r\n    <h3>{{title}}</h3>\r\n    <!-- 表单 -->\r\n    <el-form :model=\"ruleForm\" :rules=\"rules\" ref=\"ruleForm\" label-width=\"120px\" class=\"demo-ruleForm\">\r\n      <el-form-item label=\"合作公司名称\" prop=\"companyName\">\r\n        <el-input v-model=\"ruleForm.companyName\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"合作简述\" prop=\"intro\">\r\n        <el-input v-model=\"ruleForm.intro\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"封面图\">\r\n        <el-upload\r\n          class=\"avatar-uploader\"\r\n          :action=\"action\"\r\n          :show-file-list=\"false\"\r\n          name=\"image_data\"\r\n          :on-success=\"handleAvatarSuccess\"\r\n          :before-upload=\"beforeAvatarUpload\">\r\n          <img v-if=\"ruleForm.coverPic\" :src=\"ruleForm.coverPic\" class=\"avatar\">\r\n          <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\r\n        </el-upload>\r\n        <div>尺寸： 180 * 250</div>\r\n      </el-form-item>\r\n      <el-form-item label=\"合作详情\">\r\n        <Wangeditor @func=\"getMsg\" v-if=\"title === '新增合作案例'\"></Wangeditor>\r\n        <!-- 富文本 -->\r\n        <div class=\"edit_container\" v-else>\r\n          <div ref=\"editorMenu\" style=\"width: 1000px;border:1px solid #ccc;\"></div>\r\n          <div ref=\"editorElem\" style=\"text-align: left; width: 1000px; height: 500px; border:1px solid #ccc;\"></div>\r\n        </div>\r\n      </el-form-item>\r\n      <el-form-item>\r\n        <el-button type=\"success\" style=\"width: 400px\" @click=\"submitForm('ruleForm')\">提交</el-button>\r\n      </el-form-item>\r\n    </el-form>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Wangeditor from '../../../components/editor/Wangeditor'\r\nimport E from 'wangeditor'\r\nexport default {\r\n  components: {\r\n    Wangeditor\r\n  },\r\n  data () {\r\n    return {\r\n      // 页面标题\r\n      title: '',\r\n      // 上传接口\r\n      action: 'https://www.zhongdianqiche.com:447/upload/upload5',\r\n      // 参数\r\n      ruleForm: {\r\n        companyName: '', // 公司名称\r\n        intro: '', // 简述\r\n        content: '', // 详情\r\n        coverPic: '' // 封面图\r\n      },\r\n      editor: null,\r\n      // 校验\r\n      rules: {\r\n        companyName: [\r\n          { required: true, message: '请输入公司名称', trigger: 'blur' },\r\n          { min: 5, message: '长度不少于 5 个字符', trigger: 'blur' }\r\n        ],\r\n        intro: [\r\n          { required: true, message: '请输入合作简述', trigger: 'blur' },\r\n          { min: 5, max: 30, message: '长度在 5 到 30 个字符', trigger: 'blur' }\r\n        ]\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    // 图片上传\r\n    handleAvatarSuccess(res) {\r\n      this.ruleForm.coverPic = res\r\n    },\r\n    beforeAvatarUpload(file) {\r\n      const isLt2M = file.size / 1024 / 1024 < 2\r\n      if (!isLt2M) return this.$message.error('上传头像图片大小不能超过 2MB!')\r\n    },\r\n    // 详情\r\n    getMsg (data) {\r\n      this.ruleForm.content = data\r\n    },\r\n    // 提交\r\n    submitForm (formName) {\r\n      if (!this.ruleForm.coverPic) return this.$message.error('请上传封面图')\r\n      if (!this.ruleForm.content) return this.$message.error('请填写合作详情')\r\n      this.$refs[formName].validate(async valid => {\r\n        if (!valid) return this.$message.error('请完善相关内容')\r\n        if (this.title === '新增合作案例') {\r\n          const { data: res } = await this.$http.post('/us/addCase', this.ruleForm)\r\n          if (!res) return this.$message.error('提交失败')\r\n          this.$message.success('提交成功')\r\n          this.$router.go(-1)\r\n        } else {\r\n          const { data: res } = await this.$http.post('/us/updateCase', this.ruleForm)\r\n          if (!res) return this.$message.error('提交失败')\r\n          this.$message.success('提交成功')\r\n          this.$router.go(-1)\r\n        }\r\n      })\r\n    }\r\n  },\r\n  async created () {\r\n    if (!this.$route.query.id) {\r\n      this.title = '新增合作案例'\r\n    } else {\r\n      this.title = '修改合作案例'\r\n      const { data: res } = await this.$http.post('/us/getCase', { id: this.$route.query.id })\r\n      this.ruleForm = res\r\n      this.editor.txt.html(res.content)\r\n    }\r\n  },\r\n  mounted () {\r\n    if (this.title === '修改合作案例') {\r\n      this.editor = new E(this.$refs.editorMenu, this.$refs.editorElem)\r\n      this.editor.customConfig.onchange = html => {\r\n        this.ruleForm.content = html\r\n      }\r\n      // 图片上传\r\n      this.editor.customConfig.uploadImgMaxSize = 2 * 1024 * 1024\r\n      this.editor.customConfig.uploadImgServer = 'https://zhongdianqiche.com:447/upload/upload3'\r\n      this.editor.customConfig.uploadFileName = \"image_data\"\r\n      this.editor.customConfig.debug = true\r\n      this.editor.customConfig.uploadImgHooks = {\r\n        customInsert: function (insertImg, result, editor) {\r\n          const url = result.url\r\n          url.forEach(item => {\r\n            insertImg(item)\r\n          })\r\n        }\r\n      }\r\n      this.editor.customConfig.menus = [\r\n        // 菜单配置\r\n        'head', // 标题\r\n        'bold', // 粗体\r\n        'fontSize', // 字号\r\n        'fontName', // 字体\r\n        'italic', // 斜体\r\n        'underline', // 下划线\r\n        'strikeThrough', // 删除线\r\n        'foreColor', // 文字颜色\r\n        'backColor', // 背景颜色\r\n        'link', // 插入链接\r\n        // 'list', // 列表\r\n        'justify', // 对齐方式\r\n        'quote', // 引用\r\n        // 'emoticon', // 表情\r\n        'image', // 插入图片\r\n        'table', // 表格\r\n        'code', // 插入代码\r\n        'undo', // 撤销\r\n        'redo' // 重复\r\n      ]\r\n      this.editor.customConfig.linkCheck = function (text, link) {\r\n      if (link !== \"\") {\r\n        const reg = /(http|ftp|https):\\/\\/[\\w\\-_]+(\\.[\\w\\-_]+)+([\\w\\-\\.,@?^=%&:/~\\+#]*[\\w\\-\\@?^=%&/~\\+#])?/\r\n          if (!reg.test(link)) {\r\n            return '请输入正确的网址(例如 http://baidu.com)'\r\n          } else{\r\n            return true\r\n          }\r\n        }\r\n      }\r\n      this.editor.create() // 创建富文本实例\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\nh3 {\r\n  margin-bottom: 20px;\r\n}\r\n// 上传图片\r\n.avatar-uploader {\r\n  width: 220px;\r\n  img {\r\n    width: 180px;\r\n    height: 250px;\r\n  }\r\n}\r\n.avatar-uploader-icon {\r\n  font-size: 28px;\r\n  color: #8c939d;\r\n  width: 178px;\r\n  height: 248px;\r\n  line-height: 248px;\r\n  text-align: center;\r\n  border: 1px dashed #d9d9d9;\r\n}\r\n</style>\r\n"]}]}