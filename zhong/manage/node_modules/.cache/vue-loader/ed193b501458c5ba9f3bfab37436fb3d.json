{"remainingRequest":"D:\\myCompany\\project\\aaa\\new\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\myCompany\\project\\aaa\\new\\src\\views\\pic\\Add.vue?vue&type=style&index=0&id=81cc5a9a&scoped=true&lang=less&","dependencies":[{"path":"D:\\myCompany\\project\\aaa\\new\\src\\views\\pic\\Add.vue","mtime":1588075816928},{"path":"D:\\myCompany\\project\\aaa\\new\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\myCompany\\project\\aaa\\new\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\myCompany\\project\\aaa\\new\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\myCompany\\project\\aaa\\new\\node_modules\\less-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\myCompany\\project\\aaa\\new\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\myCompany\\project\\aaa\\new\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoNCi5lbC1pbnB1dCwgLmVsLWNhc2NhZGVyLCAuZWwtc2VsZWN0LCAuZWwtYnV0dG9uIHsNCiAgd2lkdGg6IDMwMHB4Ow0KfQ0KDQouZWwtYnV0dG9uIHsNCiAgbWFyZ2luLXRvcDogMzBweDsNCn0NCg0KdWwgew0KICBsaSB7DQogICAgZGlzcGxheTogZmxleDsNCiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGZsZXgtc3RhcnQ7DQogICAgbWFyZ2luLWJvdHRvbTogMjBweDsNCiAgICBoNCB7DQogICAgICB3aWR0aDogMTAwcHg7DQogICAgfQ0KICB9DQp9DQo="},{"version":3,"sources":["Add.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiFA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Add.vue","sourceRoot":"src/views/pic","sourcesContent":["<template>\r\n  <ul>\r\n    <li>\r\n      <h4>标题</h4>\r\n      <el-input placeholder=\"请输入标题\" v-model=\"formInline.title\" size=\"mini\"></el-input>\r\n    </li>\r\n    <li>\r\n      <h4>车系</h4>\r\n      <el-cascader v-model=\"value\" size=\"mini\" :options=\"options\" :props=\"{ value: 'label', label: 'label'}\"></el-cascader>\r\n    </li>\r\n    <li>\r\n      <h4>位置</h4>\r\n      <el-select v-model=\"formInline.type\" placeholder=\"请选择位置\" size=\"mini\">\r\n        <el-option label=\"图片1\" value=\"图片1\"></el-option>\r\n        <el-option label=\"图片2-7\" value=\"图片2-7\"></el-option>\r\n      </el-select>\r\n    </li>\r\n    <li>\r\n      <h4>图片上传</h4>\r\n      <input type=\"file\" id=\"saveImage\" name=\"myphoto\" accept=\"image/png,image/gif,image/jpeg\" ref=\"new_image\">\r\n      <div style=\"color: #999; font-size: 12px; line-height: 26px;margin-left: 20px\">图片尺寸：建议上传 500 x 300, 图片格式为png/gif/jpeg, 大小不大于2M</div>\r\n    </li>\r\n    <el-button type=\"primary\" size=\"mini\" @click=\"submit\">上传</el-button>\r\n  </ul>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data () {\r\n    return {\r\n      // 表单\r\n      formInline: {\r\n        title: '',\r\n        type: '',\r\n        series: '',\r\n        pic: ''\r\n      },\r\n      // 车系\r\n      value: [],\r\n      options: []\r\n    }\r\n  },\r\n  created () {\r\n    this.getSeries()\r\n  },\r\n  methods: {\r\n    // 品牌车系\r\n    async getSeries () {\r\n      const { data: res } = await this.$http.post('/car/jilian')\r\n      this.options = res\r\n    },\r\n    // 上传\r\n    async submit () {\r\n      if (this.formInline.title === '' || this.formInline.type === '' || this.value.length === 0 || this.$refs.new_image.files[0] === undefined) {\r\n        return this.$message.error('请完善内容')\r\n      }\r\n      this.formInline.series = this.value[1]\r\n      // 上传图片\r\n      const formData = new FormData()\r\n      formData.append('image_data', this.$refs.new_image.files[0])\r\n      const rew = await this.$http.post('/upload/upload2', formData, {\r\n        headers: {\r\n          'Content-Type': 'multipart/form-data'\r\n        }\r\n      })\r\n      if (rew.status !== 200 || rew.data === '图片上传失败！') {\r\n        return this.$message.error('图片上传失败, 请重新上传')\r\n      }\r\n      this.formInline.pic = rew.data\r\n      const res = await this.$http.post('/pic/addHotSeries', this.formInline)\r\n      if (res.status !== 200 || res.data !== true) {\r\n        return this.$message.error('提交失败')\r\n      }\r\n      this.$message.success('提交成功')\r\n      this.$router.go(-1)\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n.el-input, .el-cascader, .el-select, .el-button {\r\n  width: 300px;\r\n}\r\n\r\n.el-button {\r\n  margin-top: 30px;\r\n}\r\n\r\nul {\r\n  li {\r\n    display: flex;\r\n    justify-content: flex-start;\r\n    margin-bottom: 20px;\r\n    h4 {\r\n      width: 100px;\r\n    }\r\n  }\r\n}\r\n</style>\r\n"]}]}