{"remainingRequest":"H:\\jz\\w\\zhong\\manage\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!H:\\jz\\w\\zhong\\manage\\src\\views\\specialSale\\Consultation.vue?vue&type=script&lang=js&","dependencies":[{"path":"H:\\jz\\w\\zhong\\manage\\src\\views\\specialSale\\Consultation.vue","mtime":1594720288073},{"path":"H:\\jz\\w\\zhong\\manage\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"H:\\jz\\w\\zhong\\manage\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"H:\\jz\\w\\zhong\\manage\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"H:\\jz\\w\\zhong\\manage\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBwaWNrZXJPcHRpb25zLCBkYXRlQ29udmVyc2lvbiB9IGZyb20gJy4uLy4uL2Fzc2V0cy9qcy90aW1lcicNCmV4cG9ydCBkZWZhdWx0IHsNCiAgZGF0YSAoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIC8vIOeUqOaIt+etiee6pw0KICAgICAgbGV2ZWw6IDAsDQogICAgICAvLyDml7bpl7Tlv6vmjbfplK4NCiAgICAgIHBpY2tlck9wdGlvbnM6IHBpY2tlck9wdGlvbnMsDQogICAgICB0aW1lOiBbXSwNCiAgICAgIC8vIOihqOWNlQ0KICAgICAgZm9ybUlubGluZTogew0KICAgICAgICBicmFuZDogJycsDQogICAgICAgIHNlcmllczogJycsDQogICAgICAgIGNvbnN1bHREYXRlUzogJycsDQogICAgICAgIGNvbnN1bHREYXRlRTogJycsDQogICAgICAgIHBhZ2VTaXplOiAxNSwNCiAgICAgICAgcGFnZU5vOiAxDQogICAgICB9LA0KICAgICAgYnJhbmRBcnk6IFtdLA0KICAgICAgc2VyaWVzQXJ5OiBbXSwNCiAgICAgIC8vIOihqOagvA0KICAgICAgdGFibGVEYXRhOiBbXSwNCiAgICAgIHRvdGFsOiAwLA0KICAgICAgLy8g5a+56K+d5qGGDQogICAgICBkaWFsb2dGb3JtVmlzaWJsZTogZmFsc2UsDQogICAgICB4aWFvc2hvdUFyeTogW10sIC8vIOmUgOWUrumhvumXruaVsOe7hA0KICAgICAgcm93OiB7fSwNCiAgICAgIHJhZGlvOiAnJyAvLyDooqvpgInmi6nnmoTplIDllK7pob7pl64NCiAgICB9DQogIH0sDQogIGNvbXB1dGVkOiB7DQogICAgZGlzYWJsZWQgKCkgew0KICAgICAgaWYgKHRoaXMuZm9ybUlubGluZS5icmFuZCAhPT0gJycpIHsNCiAgICAgICAgcmV0dXJuIGZhbHNlDQogICAgICB9DQogICAgICByZXR1cm4gdHJ1ZQ0KICAgIH0NCiAgfSwNCiAgbWV0aG9kczogew0KICAgIC8vIOiOt+WPlueUqOaIt+WSqOivouWIl+ihqA0KICAgIGFzeW5jIGdldExpc3QgKCkgew0KICAgICAgaWYgKHRoaXMudGltZSA9PT0gbnVsbCkgew0KICAgICAgICB0aGlzLnRpbWUgPSBbXQ0KICAgICAgfQ0KICAgICAgdGhpcy5mb3JtSW5saW5lLmNvbnN1bHREYXRlUyA9IGRhdGVDb252ZXJzaW9uKHRoaXMudGltZVswXSkNCiAgICAgIHRoaXMuZm9ybUlubGluZS5jb25zdWx0RGF0ZUUgPSBkYXRlQ29udmVyc2lvbih0aGlzLnRpbWVbMV0pDQogICAgICBjb25zdCB7IGRhdGE6IHJlc30gPSBhd2FpdCB0aGlzLiRodHRwLnBvc3QoJy9zYWxlL3NhbGVUYWJsZUxpc3QnLCB0aGlzLmZvcm1JbmxpbmUpDQogICAgICB0aGlzLnRhYmxlRGF0YSA9IHJlcy5sDQogICAgICB0aGlzLnRvdGFsID0gcmVzLm51bQ0KICAgIH0sDQogICAgLy8g5ZOB54mMDQogICAgYXN5bmMgZHJvcERvd25CcmFuZCAoY2FsbGJhY2spIHsNCiAgICAgIGlmIChjYWxsYmFjayA9PT0gdHJ1ZSkgew0KICAgICAgICBjb25zdCB7IGRhdGE6IHJlcyB9ID0gYXdhaXQgdGhpcy4kaHR0cC5wb3N0KCcvc2FsZS9zaG93QWRkU2FsZUJyYW5kJywgew0KICAgICAgICAgIHRva2VuOiB3aW5kb3cuc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgndG9rZW4nKQ0KICAgICAgICB9KQ0KICAgICAgICB0aGlzLmJyYW5kQXJ5ID0gcmVzDQogICAgICB9DQogICAgfSwNCiAgICAvLyDns7vliJcNCiAgICBhc3luYyBkcm9wRG93blNlcmllcyAoY2FsbGJhY2spIHsNCiAgICAgIGlmIChjYWxsYmFjayA9PT0gdHJ1ZSkgew0KICAgICAgICBjb25zdCB7IGRhdGE6IHJlcyB9ID0gYXdhaXQgdGhpcy4kaHR0cC5wb3N0KCcvc2FsZS9zaG93U2FsZVNlcmllcycsIHsNCiAgICAgICAgICBicmFuZDogdGhpcy5mb3JtSW5saW5lLmJyYW5kDQogICAgICAgIH0pDQogICAgICAgIHRoaXMuc2VyaWVzQXJ5ID0gcmVzDQogICAgICB9DQogICAgfSwNCiAgICAvLyDmn6Xor6INCiAgICBzdWJtaXQgKCkgew0KICAgICAgdGhpcy5mb3JtSW5saW5lLnBhZ2VObyA9IDENCiAgICAgIHRoaXMuZ2V0TGlzdCgpDQogICAgfSwNCiAgICAvLyDliIfmjaLpobXmlbANCiAgICBjaGFuZ2VQYWdlIChpbmRleCkgew0KICAgICAgdGhpcy5mb3JtSW5saW5lLnBhZ2VObyA9IGluZGV4DQogICAgICB0aGlzLmdldExpc3QoKQ0KICAgIH0sDQogICAgLy8g6I635Y+W55So5oi3562J57qnDQogICAgYXN5bmMgZ2V0TGV2ZWwgKCkgew0KICAgICAgY29uc3QgeyBkYXRhOiByZXMgfSA9IGF3YWl0IHRoaXMuJGh0dHAucG9zdCgnL3VzZXIvbGV2ZWwnKQ0KICAgICAgdGhpcy5sZXZlbCA9IHJlcw0KICAgIH0sDQogICAgLy8g5YiG6YWNDQogICAgYXN5bmMgaGFuZGxlRWRpdChyb3cpIHsNCiAgICAgIGNvbnN0IHsgZGF0YTogcmVzIH0gPSBhd2FpdCB0aGlzLiRodHRwLnBvc3QoJy9kZWFsZXIveHNndycpDQogICAgICB0aGlzLnhpYW9zaG91QXJ5ID0gcmVzDQogICAgICB0aGlzLnJvdyA9IHJvdw0KICAgICAgdGhpcy5yYWRpbyA9IHJvdy5mcFVzZXJJZA0KICAgICAgdGhpcy5kaWFsb2dGb3JtVmlzaWJsZSA9IHRydWUNCiAgICB9LA0KICAgIC8vIOehruiupOWIhumFjQ0KICAgIGFzeW5jIGRpYWxvZ1JhZGlvICgpIHsNCiAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMuJGh0dHAucG9zdCgnL3NhbGUvZnAnLCB7DQogICAgICAgIHVzZXJJZDogdGhpcy5yYWRpbywNCiAgICAgICAgY2x1ZUlkOiB0aGlzLnJvdy5pZA0KICAgICAgfSkNCiAgICAgIGlmIChyZXMuZGF0YSAhPT0gdHJ1ZSB8fCByZXMuc3RhdHVzICE9PSAyMDApIHJldHVybiB0aGlzLiRtZXNzYWdlLmVycm9yKCfliIbphY3lpLHotKUnKQ0KICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCfliIbphY3miJDlip8nKQ0KICAgICAgdGhpcy5yYWRpbyA9ICcnDQogICAgICB0aGlzLmRpYWxvZ0Zvcm1WaXNpYmxlID0gZmFsc2UNCiAgICAgIHRoaXMuZ2V0TGlzdCgpDQogICAgfQ0KICB9LA0KICBjcmVhdGVkICgpIHsNCiAgICAvLyDojrflj5bnlKjmiLflkqjor6LliJfooagNCiAgICB0aGlzLmdldExpc3QoKQ0KICAgIC8vIOetiee6pw0KICAgIHRoaXMuZ2V0TGV2ZWwoKQ0KICB9DQp9DQo="},{"version":3,"sources":["Consultation.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Consultation.vue","sourceRoot":"src/views/specialSale","sourcesContent":["<template>\r\n  <div>\r\n    <!-- 头部标题 -->\r\n    <h3>特卖咨询</h3>\r\n    <!-- 搜索区域 -->\r\n    <el-card body-style=\"padding: 10px;\">\r\n      <el-form :inline=\"true\" :model=\"formInline\" class=\"demo-form-inline\">\r\n        <el-form-item label=\"品牌\">\r\n          <el-select @visible-change=\"dropDownBrand($event)\" v-model=\"formInline.brand\" placeholder=\"请选择品牌\" size=\"mini\">\r\n            <el-option label=\"不限\" value=\"\"></el-option>\r\n            <el-option v-for=\"item in brandAry\" :key=\"item\" :label=\"item\" :value=\"item\"></el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item label=\"系列\">\r\n          <el-select :disabled=\"disabled\" @visible-change=\"dropDownSeries($event)\" v-model=\"formInline.series\" placeholder=\"请选择系列\" size=\"mini\">\r\n            <el-option label=\"不限\" value=\"\"></el-option>\r\n            <el-option v-for=\"(item,index) in seriesAry\" :key=\"index\" :label=\"item\" :value=\"item\"></el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item label=\"咨询时间\">\r\n          <div class=\"block\">\r\n            <el-date-picker size=\"mini\" v-model=\"time\" type=\"datetimerange\" :picker-options=\"pickerOptions\" range-separator=\"至\" start-placeholder=\"开始日期\" end-placeholder=\"结束日期\" align=\"right\"></el-date-picker>\r\n          </div>\r\n        </el-form-item>\r\n        <el-form-item>\r\n          <el-button type=\"primary\" @click=\"submit\" size=\"mini\">查询</el-button>\r\n        </el-form-item>\r\n      </el-form>\r\n    </el-card>\r\n    <!-- 表格展示 -->\r\n    <el-table\r\n      :header-cell-style=\"{ 'text-align': 'center', 'font-size': '14px', 'color': '#000' }\"\r\n      :cell-style=\"{ 'text-align': 'center' }\"\r\n      :data=\"tableData\" border \r\n      style=\"width: 100%\">\r\n      <el-table-column prop=\"id\" label=\"编号\" width=\"100\"></el-table-column>\r\n      <el-table-column prop=\"name\" label=\"用户姓名\" width=\"180\"></el-table-column>\r\n      <el-table-column prop=\"consultDate\" label=\"咨询时间\" width=\"160\"></el-table-column>\r\n      <el-table-column prop=\"origin\" label=\"来源\"></el-table-column>\r\n      <el-table-column prop=\"phone\" label=\"手机号\" width=\"120\"></el-table-column>\r\n      <el-table-column prop=\"fpUser\" label=\"销售顾问\"></el-table-column>\r\n      <el-table-column prop=\"brand\" label=\"品牌\" width=\"180\"></el-table-column>\r\n      <el-table-column prop=\"series\" label=\"系列\" width=\"220\"></el-table-column>\r\n      <el-table-column label=\"操作\" width=\"80\" v-if=\"level === 5\">\r\n        <template slot-scope=\"scope\">\r\n          <el-button type=\"primary\" size=\"mini\" @click=\"handleEdit(scope.row)\">分配</el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n    <!-- 分页 -->\r\n    <el-pagination\r\n      @current-change=\"changePage\"\r\n      hide-on-single-page\r\n      :current-page=\"this.formInline.pageNo\"\r\n      :page-size=\"this.formInline.pageSize\"\r\n      background\r\n      layout=\"prev, pager, next\"\r\n      :total=\"total\">\r\n    </el-pagination>\r\n    <!-- 分配信息给销售顾问 -->\r\n    <el-dialog title=\"分配\" :visible.sync=\"dialogFormVisible\">\r\n      <el-radio-group v-model=\"radio\">\r\n        <el-radio v-for=\"item in xiaoshouAry\" :key=\"item.id\" :label=\"item.id\">{{item.name}}</el-radio>\r\n      </el-radio-group>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"dialogFormVisible = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"dialogRadio\">确 定</el-button>\r\n      </div>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { pickerOptions, dateConversion } from '../../assets/js/timer'\r\nexport default {\r\n  data () {\r\n    return {\r\n      // 用户等级\r\n      level: 0,\r\n      // 时间快捷键\r\n      pickerOptions: pickerOptions,\r\n      time: [],\r\n      // 表单\r\n      formInline: {\r\n        brand: '',\r\n        series: '',\r\n        consultDateS: '',\r\n        consultDateE: '',\r\n        pageSize: 15,\r\n        pageNo: 1\r\n      },\r\n      brandAry: [],\r\n      seriesAry: [],\r\n      // 表格\r\n      tableData: [],\r\n      total: 0,\r\n      // 对话框\r\n      dialogFormVisible: false,\r\n      xiaoshouAry: [], // 销售顾问数组\r\n      row: {},\r\n      radio: '' // 被选择的销售顾问\r\n    }\r\n  },\r\n  computed: {\r\n    disabled () {\r\n      if (this.formInline.brand !== '') {\r\n        return false\r\n      }\r\n      return true\r\n    }\r\n  },\r\n  methods: {\r\n    // 获取用户咨询列表\r\n    async getList () {\r\n      if (this.time === null) {\r\n        this.time = []\r\n      }\r\n      this.formInline.consultDateS = dateConversion(this.time[0])\r\n      this.formInline.consultDateE = dateConversion(this.time[1])\r\n      const { data: res} = await this.$http.post('/sale/saleTableList', this.formInline)\r\n      this.tableData = res.l\r\n      this.total = res.num\r\n    },\r\n    // 品牌\r\n    async dropDownBrand (callback) {\r\n      if (callback === true) {\r\n        const { data: res } = await this.$http.post('/sale/showAddSaleBrand', {\r\n          token: window.sessionStorage.getItem('token')\r\n        })\r\n        this.brandAry = res\r\n      }\r\n    },\r\n    // 系列\r\n    async dropDownSeries (callback) {\r\n      if (callback === true) {\r\n        const { data: res } = await this.$http.post('/sale/showSaleSeries', {\r\n          brand: this.formInline.brand\r\n        })\r\n        this.seriesAry = res\r\n      }\r\n    },\r\n    // 查询\r\n    submit () {\r\n      this.formInline.pageNo = 1\r\n      this.getList()\r\n    },\r\n    // 切换页数\r\n    changePage (index) {\r\n      this.formInline.pageNo = index\r\n      this.getList()\r\n    },\r\n    // 获取用户等级\r\n    async getLevel () {\r\n      const { data: res } = await this.$http.post('/user/level')\r\n      this.level = res\r\n    },\r\n    // 分配\r\n    async handleEdit(row) {\r\n      const { data: res } = await this.$http.post('/dealer/xsgw')\r\n      this.xiaoshouAry = res\r\n      this.row = row\r\n      this.radio = row.fpUserId\r\n      this.dialogFormVisible = true\r\n    },\r\n    // 确认分配\r\n    async dialogRadio () {\r\n      const res = await this.$http.post('/sale/fp', {\r\n        userId: this.radio,\r\n        clueId: this.row.id\r\n      })\r\n      if (res.data !== true || res.status !== 200) return this.$message.error('分配失败')\r\n      this.$message.success('分配成功')\r\n      this.radio = ''\r\n      this.dialogFormVisible = false\r\n      this.getList()\r\n    }\r\n  },\r\n  created () {\r\n    // 获取用户咨询列表\r\n    this.getList()\r\n    // 等级\r\n    this.getLevel()\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\nh3 {\r\n  margin-bottom: 10px;\r\n}\r\n// 搜索卡片区域\r\n.el-card {\r\n  margin-bottom: 15px;\r\n  .el-form-item {\r\n    margin-right: 20px;\r\n    margin-bottom: 0;\r\n  }\r\n}\r\n// 表格\r\n.el-table {\r\n  margin: 20px 0;\r\n}\r\n// 分页\r\n.el-pagination {\r\n  text-align: center;\r\n}\r\n</style>\r\n"]}]}