{"remainingRequest":"D:\\myCompany\\project\\aaa\\new\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\myCompany\\project\\aaa\\new\\src\\views\\information\\List.vue?vue&type=style&index=0&id=2a892f5b&lang=less&scoped=true&","dependencies":[{"path":"D:\\myCompany\\project\\aaa\\new\\src\\views\\information\\List.vue","mtime":1584429615487},{"path":"D:\\myCompany\\project\\aaa\\new\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\myCompany\\project\\aaa\\new\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\myCompany\\project\\aaa\\new\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\myCompany\\project\\aaa\\new\\node_modules\\less-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\myCompany\\project\\aaa\\new\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\myCompany\\project\\aaa\\new\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCg0KLy8g5paw5bu66LWE6K6vDQouYWRkSW5mb3JtYXRpb24gew0KICBtYXJnaW4tYm90dG9tOiAyMHB4Ow0KICBib3JkZXItcmFkaXVzOiAxMHB4Ow0KfQ0KLy8g5pCc57Si5Y2h54mH5Yy65Z+fDQouZWwtY2FyZCB7DQogIG1hcmdpbi1ib3R0b206IDE1cHg7DQogIC5lbC1mb3JtLWl0ZW0gew0KICAgIG1hcmdpbi1yaWdodDogMjBweDsNCiAgICBtYXJnaW4tYm90dG9tOiAwOw0KICB9DQogIC5lbC1idXR0b24gew0KICAgIHdpZHRoOiAxNTBweDsNCiAgfQ0KfQ0KLy8g5pCc57Si57uT5p6cDQouZWwtdGFicyB7DQogIC8vIOWIhumhtQ0KICAuZWwtcGFnaW5hdGlvbiB7DQogICAgdGV4dC1hbGlnbjogY2VudGVyOw0KICAgIG1hcmdpbi10b3A6IDIwcHg7DQogIH0NCn0NCg=="},{"version":3,"sources":["List.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2YA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"List.vue","sourceRoot":"src/views/information","sourcesContent":["<template>\r\n  <div>\r\n    <!-- 面包屑 -->\r\n    <el-breadcrumb separator-class=\"el-icon-arrow-right\">\r\n      <el-breadcrumb-item :to=\"{ path: '/' }\">首页</el-breadcrumb-item>\r\n      <el-breadcrumb-item>资讯管理</el-breadcrumb-item>\r\n    </el-breadcrumb>\r\n    <!-- 新建资讯 -->\r\n    <el-button type=\"primary\" class=\"addInformation\" @click=\"dialogFormVisible = true\">新建资讯</el-button>\r\n    <!-- 搜索区域 -->\r\n    <el-card body-style=\"padding: 10px;\">\r\n      <el-form :inline=\"true\" :model=\"formInline\" class=\"demo-form-inline\">\r\n        <el-form-item label=\"省份\" v-if=\"this.grade === 1 || this.grade === 2\">\r\n          <el-select @change=\"changeProvince\" @visible-change=\"dropDownProvince($event)\" v-model=\"formInline.province\" placeholder=\"请选择省份\" size=\"mini\">\r\n            <el-option :label=\"item.province\" :value=\"item.provinceid\" v-for=\"item in provinceAry\" :key=\"item.provinceid\"></el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item label=\"城市\" v-if=\"this.grade === 1 || this.grade === 2\">\r\n          <el-select :disabled=\"disabled\" @visible-change=\"dropDownCity($event)\" v-model=\"formInline.city\" placeholder=\"请选择城市\" size=\"mini\">\r\n            <el-option :label=\"item.city\" :value=\"item.city\" v-for=\"item in cityAry\" :key=\"item.cityid\"></el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item label=\"经销商ID\" v-if=\"this.grade < 4 || this.grade === 4\">\r\n          <el-select v-model=\"formInline.company\" @visible-change=\"dropDowndis($event)\" placeholder=\"经销商ID\" size=\"mini\">\r\n            <el-option v-for=\"(item,index) in disAry\" :key=\"index\" :label=\"item.name4s\" :value=\"item.id\"></el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item label=\"品牌\">\r\n          <el-select v-model=\"formInline.brand\" placeholder=\"全部品牌\" size=\"mini\">\r\n            <el-option v-for=\"(item,index) in brandList\" :key=\"index\" :label=\"item.brand\" :value=\"item.brand\"></el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item label=\"分类\">\r\n          <el-select v-model=\"formInline.classification\" placeholder=\"选择分类\" size=\"mini\">\r\n            <el-option label=\"新闻资讯\" value=\"新闻资讯\"></el-option>\r\n            <el-option label=\"维修保养\" value=\"维修保养\"></el-option>\r\n            <el-option label=\"店内活动\" value=\"店内活动\"></el-option>\r\n            <el-option label=\"新车资讯\" value=\"新车资讯\"></el-option>\r\n            <el-option label=\"大咖风云榜\" value=\"大咖风云榜\"></el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item label=\"状态\">\r\n          <el-select v-model=\"formInline.state\" placeholder=\"请选择状态\" size=\"mini\">\r\n            <el-option label=\"分站待审\" value=\"分站待审\"></el-option>\r\n            <el-option label=\"分站驳回\" value=\"分站驳回\"></el-option>\r\n            <el-option label=\"分站通过待投稿\" value=\"分站通过待投稿\"></el-option>\r\n            <el-option label=\"已投稿总部待审\" value=\"已投稿总部待审\"></el-option>\r\n            <el-option label=\"总部驳回\" value=\"总部驳回\"></el-option>\r\n            <el-option label=\"总部通过(已上线)\" value=\"总部通过(已上线)\"></el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item label=\"文章标题\">\r\n          <el-input style=\"width: 300px;\" v-model=\"formInline.title\" size=\"mini\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item>\r\n          <el-button type=\"primary\" @click=\"submit\" size=\"mini\">查询</el-button>\r\n        </el-form-item>\r\n      </el-form>\r\n    </el-card>\r\n    <!-- 搜索结果 -->\r\n    <el-tabs v-model=\"activeName\" type=\"card\">\r\n      <el-tab-pane label=\"经销商资讯\" name=\"first\">\r\n        <el-table :data=\"tableData1\" cell-click=\"handle(row, column, cell, event)\" border style=\"width: 100%\" :header-cell-style=\"{'text-align':'center'}\" :cell-style=\"cellStyle\">\r\n          <el-table-column prop=\"id\" label=\"编号\" width=\"80\"></el-table-column>\r\n          <el-table-column prop=\"dealer\" label=\"申请店方名称\" width=\"110\"></el-table-column>\r\n          <el-table-column prop=\"title\" label=\"标题\" width=\"300\"></el-table-column>\r\n          <el-table-column prop=\"type\" label=\"分类\" width=\"80\"></el-table-column>\r\n          <el-table-column prop=\"username\" label=\"发布信息\" width=\"180\"></el-table-column>\r\n          <el-table-column prop=\"\" label=\"资讯位置\" width=\"180\"></el-table-column>\r\n          <el-table-column prop=\"\" label=\"运营点击数\" width=\"100\"></el-table-column>\r\n          <el-table-column prop=\"state\" label=\"状态\" width=\"80\">\r\n            <template scope=\"scope\">\r\n              <span v-if=\"scope.row.state === '总部通过(已上线)'\" style=\"color: #67C23A\">{{ scope.row.state }}</span>\r\n              <span v-else-if=\"scope.row.state === '分站驳回' || scope.row.state === '总部驳回'\" style=\"color: #000\">{{ scope.row.state }}</span>\r\n              <span v-else style=\"color: red\">{{ scope.row.state }}</span>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column prop=\"administration\" label=\"管理\" width=\"80\"></el-table-column>\r\n          <el-table-column prop=\"operation\" label=\"操作\">\r\n            <template slot-scope=\"scope\">\r\n              <el-button type=\"text\" @click=\"tab1Details(scope.row.id)\" size=\"mini\">详情</el-button>\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n        <!-- 分页 -->\r\n        <el-pagination\r\n          @current-change=\"changePage1\"\r\n          hide-on-single-page\r\n          :current-page=\"currentPage1\"\r\n          :page-size=\"pagesize1\"\r\n          background\r\n          layout=\"prev, pager, next\"\r\n          :total=\"total1\">\r\n        </el-pagination>\r\n      </el-tab-pane>\r\n      <el-tab-pane label=\"自建资讯\" name=\"second\">\r\n        <el-table :data=\"tableData2\" cell-click=\"handle(row, column, cell, event)\" border style=\"width: 100%\" :header-cell-style=\"{'text-align':'center'}\" :cell-style=\"cellStyle\">\r\n          <el-table-column prop=\"id\" label=\"编号\" width=\"80\"></el-table-column>\r\n          <el-table-column :prop=\"`dealer.name`\" label=\"申请店方名称\" width=\"110\"></el-table-column>\r\n          <!-- <el-table-column :prop=\"`dealer.name`\" label=\"申请店方名称\" width=\"110\"></el-table-column> -->\r\n          <el-table-column prop=\"title\" label=\"标题\" width=\"300\"></el-table-column>\r\n          <el-table-column prop=\"type\" label=\"分类\" width=\"80\"></el-table-column>\r\n          <el-table-column prop=\"username\" label=\"发布信息\" width=\"180\"></el-table-column>\r\n          <el-table-column prop=\"\" label=\"资讯位置\" width=\"180\"></el-table-column>\r\n          <el-table-column prop=\"\" label=\"运营点击数\" width=\"100\"></el-table-column>\r\n          <el-table-column prop=\"state\" label=\"状态\" width=\"80\"></el-table-column>\r\n          <el-table-column prop=\"administration\" label=\"管理\" width=\"80\"></el-table-column>\r\n          <el-table-column prop=\"operation\" label=\"操作\">\r\n            <template slot-scope=\"scope\">\r\n              <el-button type=\"text\" @click=\"tab2Details(scope.row.id)\" size=\"mini\">详情</el-button>\r\n              <el-button type=\"text\" @click=\"tab2Edit(scope.row.id)\" size=\"mini\">编辑</el-button>\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n        <!-- 分页 -->\r\n        <el-pagination\r\n          @current-change=\"changePage2\"\r\n          hide-on-single-page\r\n          :current-page=\"currentPage2\"\r\n          :page-size=\"pagesize2\"\r\n          background\r\n          layout=\"prev, pager, next\"\r\n          :total=\"total2\">\r\n        </el-pagination>\r\n      </el-tab-pane>\r\n    </el-tabs>\r\n    <!-- 选择资讯类型 -->\r\n    <el-dialog title=\"请选择新增资讯类型\" :visible.sync=\"dialogFormVisible\">\r\n      <el-form>\r\n        <el-radio-group v-model=\"radio\">\r\n          <el-radio label=\"新闻资讯\"></el-radio>\r\n          <el-radio label=\"新车资讯\"></el-radio>\r\n          <el-radio label=\"测评\"></el-radio>\r\n          <el-radio label=\"导购\"></el-radio>\r\n          <el-radio label=\"店内活动\"></el-radio>\r\n        </el-radio-group>\r\n      </el-form>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"dialogFormVisible = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"dialogFormVisibleing(radio)\">确 定</el-button>\r\n      </div>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data () {\r\n    return {\r\n      dialogFormVisible: false,\r\n      formLabelWidth: '120px',\r\n      radio: '单纯品牌曝光',\r\n      // 搜索表单\r\n      formInline: {\r\n        province: '',\r\n        city: '',\r\n        company: '',\r\n        account: '', // 账号\r\n        brand: '', // 品牌\r\n        classification: '', // 分类\r\n        state: '', // 状态\r\n        title: '' // 标题\r\n      },\r\n      grade: null,\r\n      // 城市经销商\r\n      provinceAry: [],\r\n      cityAry: [],\r\n      disAry: [],\r\n      disabled: true,\r\n      // Tab栏默认展示\r\n      activeName: 'first',\r\n      tableData1: [], // 返回数据数组\r\n      tableData2: [], // 返回数据数组\r\n      brandList: [], // 品牌数组\r\n      // 经销商资讯分页\r\n      total1: 0, // 总条数\r\n      currentPage1: 1, // 当前页\r\n      pagesize1: 10, // 每页数据\r\n      // 自建资讯分页\r\n      total2: 0, // 总条数\r\n      currentPage2: 1, // 当前页\r\n      pagesize2: 10 // 每页数据\r\n    }\r\n  },\r\n  methods: {\r\n    // 获取经销商资讯列表\r\n    async getInformationList () {\r\n      if ((JSON.parse(grade) === 1) || (JSON.parse(grade) === 2)) {\r\n        const { data: res } = await this.$http.post('/Infor/inforList', {\r\n          pageSize: this.pagesize1,\r\n          pageNo: this.currentPage1\r\n        })\r\n        this.tableData1 = res.l\r\n        this.total1 = res.num\r\n        console.log(res)\r\n      } else if ((JSON.parse(grade) === 3) || (JSON.parse(grade) === 4)) {\r\n        const { data: res } = await this.$http.post('/Infor/inforList', {\r\n          area: area,\r\n          pageSize: this.pagesize1,\r\n          pageNo: this.currentPage1\r\n        })\r\n        this.tableData1 = res.l\r\n        this.total1 = res.num\r\n        console.log(res)\r\n      } else {\r\n        const { data: res } = await this.$http.post('/Infor/inforList', {\r\n          area: area,\r\n          dealerId: ID,\r\n          pageSize: this.pagesize1,\r\n          pageNo: this.currentPage1\r\n        })\r\n        this.tableData1 = res.l\r\n        this.total1 = res.num\r\n        console.log(res)\r\n      }\r\n    },\r\n    // 触发下拉事件获取省份信息\r\n    async dropDownProvince (callback) {\r\n      if (callback === true) {\r\n        const { data: res } = await this.$http.post('/Infor/getProvince')\r\n        this.provinceAry = res\r\n        // console.log(res)\r\n      }\r\n    },\r\n    // 当省份改变时，触发请求\r\n    changeProvince () {\r\n      this.disabled = false\r\n      this.formInline.city = ''\r\n    },\r\n    // 触发下拉事件获取城市信息\r\n    async dropDownCity (callback) {\r\n      if (callback === true) {\r\n        const { data: res } = await this.$http.post('/Infor/getCityByPid', {\r\n          provinceid: this.formInline.province\r\n        })\r\n        this.cityAry = res\r\n        // console.log(res)\r\n      }\r\n    },\r\n    // 获取经销商ID\r\n    async dropDowndis (callback) {\r\n      if (callback === true) {\r\n        if (this.formInline.city === '') {\r\n          return this.$message({\r\n            showClose: true,\r\n            message: '请输入城市信息',\r\n            type: 'warning'\r\n          })\r\n        }\r\n        const { data: res } = await this.$http.post('/dealer/showDealer', {\r\n          city: this.formInline.city\r\n        })\r\n        // console.log(res)\r\n        this.disAry = res\r\n      }\r\n    },\r\n    // 获取品牌列表\r\n    async getBrandList () {\r\n      const { data: res } = await this.$http.post('/Infor/getInforBrand')\r\n      this.brandList = res\r\n      // console.log(res)\r\n    },\r\n    // 表格样式\r\n    cellStyle ({ row, column, rowIndex, columnIndex }) {\r\n      if (columnIndex === 2) {\r\n        // 指定列号\r\n        return 'color: blue'\r\n      } else {\r\n        return ''\r\n      }\r\n    },\r\n    async submit () {\r\n      if ((JSON.parse(grade) === 5) || (JSON.parse(grade) === 6)) {\r\n        const { data: res } = await this.$http.post('/Infor/inforList', {\r\n          area: area,\r\n          dealerId: ID,\r\n          brand: this.formInline.brand,\r\n          type: this.formInline.classification,\r\n          title: this.formInline.title,\r\n          state: this.formInline.state,\r\n          pageSize: this.pagesize1,\r\n          pageNo: this.currentPage1\r\n        })\r\n        // console.log(res)\r\n        this.tableData1 = res.l\r\n        this.total = res.num\r\n      } else if ((JSON.parse(grade) === 3) || (JSON.parse(grade) === 4)) {\r\n        const { data: res } = await this.$http.post('/Infor/inforList', {\r\n          area: area,\r\n          dealerId: this.formInline.account,\r\n          brand: this.formInline.brand,\r\n          type: this.formInline.classification,\r\n          title: this.formInline.title,\r\n          state: this.formInline.state,\r\n          pageSize: this.pagesize1,\r\n          pageNo: this.currentPage1\r\n        })\r\n        // console.log(res)\r\n        this.tableData1 = res.l\r\n        this.total = res.num\r\n      } else {\r\n        const { data: res } = await this.$http.post('/Infor/inforList', {\r\n          area: this.formInline.city,\r\n          dealerId: this.formInline.company,\r\n          brand: this.formInline.brand,\r\n          type: this.formInline.classification,\r\n          title: this.formInline.title,\r\n          state: this.formInline.state,\r\n          pageSize: this.pagesize1,\r\n          pageNo: this.currentPage1\r\n        })\r\n        console.log(res)\r\n        this.tableData1 = res.l\r\n        this.total = res.num\r\n      }\r\n    },\r\n    // 改变第一个分页\r\n    async changePage1 (current) {\r\n      console.log(current)\r\n      if ((JSON.parse(grade) === 5) || (JSON.parse(grade) === 6)) {\r\n        const { data: res } = await this.$http.post('/Infor/inforList', {\r\n          area: area,\r\n          dealerId: ID,\r\n          brand: this.formInline.brand,\r\n          type: this.formInline.classification,\r\n          title: this.formInline.title,\r\n          state: this.formInline.state,\r\n          pageSize: this.pagesize1,\r\n          pageNo: current\r\n        })\r\n        console.log(res)\r\n        this.tableData1 = res.l\r\n      } else {\r\n        const { data: res } = await this.$http.post('/Infor/inforList', {\r\n          area: area,\r\n          dealerId: this.formInline.company,\r\n          brand: this.formInline.brand,\r\n          type: this.formInline.classification,\r\n          title: this.formInline.title,\r\n          state: this.formInline.state,\r\n          pageSize: this.pagesize1,\r\n          pageNo: current\r\n        })\r\n        console.log(res)\r\n        this.tableData1 = res.l\r\n      }\r\n    },\r\n    // 改变第二个分页\r\n    async changePage2 () {\r\n      const { data: res } = await this.$http.post('/Infor/inforList', {\r\n        area: '合肥市',\r\n        pageSize: this.pagesize2,\r\n        pageNo: this.currentPage2\r\n      })\r\n      console.log(res)\r\n    },\r\n    // tab1详情\r\n    tab1Details (id) {\r\n      this.$router.push({\r\n        path: '/information/details',\r\n        query: { id: id }\r\n      })\r\n    },\r\n    // tab2详情\r\n    tab2Details (id) {\r\n      console.log(id)\r\n    },\r\n    // tab2编辑\r\n    tab2Edit (id) {\r\n      console.log(id)\r\n    },\r\n    // 新建资讯\r\n    dialogFormVisibleing (radio) {\r\n      this.$router.push({\r\n        path: '/information/newly',\r\n        query: { type: radio }\r\n      })\r\n      this.dialogFormVisible = false\r\n    }\r\n  },\r\n  created () {\r\n    // 获取资讯列表\r\n    this.getInformationList()\r\n    // 品牌列表\r\n    this.getBrandList()\r\n  },\r\n  mounted () {\r\n    // 获取本地存储的用户等级\r\n    this.grade = JSON.parse(sessionStorage.getItem('level'))\r\n    // console.log(this.grade)\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n// 新建资讯\r\n.addInformation {\r\n  margin-bottom: 20px;\r\n  border-radius: 10px;\r\n}\r\n// 搜索卡片区域\r\n.el-card {\r\n  margin-bottom: 15px;\r\n  .el-form-item {\r\n    margin-right: 20px;\r\n    margin-bottom: 0;\r\n  }\r\n  .el-button {\r\n    width: 150px;\r\n  }\r\n}\r\n// 搜索结果\r\n.el-tabs {\r\n  // 分页\r\n  .el-pagination {\r\n    text-align: center;\r\n    margin-top: 20px;\r\n  }\r\n}\r\n</style>\r\n"]}]}