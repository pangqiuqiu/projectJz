{"remainingRequest":"D:\\myCompany\\project\\aaa\\new\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\myCompany\\project\\aaa\\new\\src\\views\\specialSale\\Add.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\myCompany\\project\\aaa\\new\\src\\views\\specialSale\\Add.vue","mtime":1584670707490},{"path":"D:\\myCompany\\project\\aaa\\new\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\myCompany\\project\\aaa\\new\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\myCompany\\project\\aaa\\new\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\myCompany\\project\\aaa\\new\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQpleHBvcnQgZGVmYXVsdCB7DQogIGRhdGEgKCkgew0KICAgIHJldHVybiB7DQogICAgICAvLyDlk4HniYwNCiAgICAgIGJyYW5kQXJ5OiBbXSwNCiAgICAgIC8vIOeJueWNluaXtumXtA0KICAgICAgdGltZTogW10sDQogICAgICBvcHRpb25zOiBbew0KICAgICAgICB2YWx1ZTogJ+mAiemhuTEnLA0KICAgICAgICBsYWJlbDogJ+m7hOmHkeezlScNCiAgICAgIH0sIHsNCiAgICAgICAgdmFsdWU6ICfpgInpobkyJywNCiAgICAgICAgbGFiZWw6ICflj4znmq7lpbYnDQogICAgICB9XSwNCiAgICAgIC8vIOihqOWNleaVsOaNrg0KICAgICAgZm9ybTogew0KICAgICAgICBicmFuZDogJycsIC8vIOWTgeeJjA0KICAgICAgICBzZXJpZXM6IFtdLCAvLyDns7vliJcNCiAgICAgICAgYXV0aG9yOiAnJywgLy8g5byA5aeL5pe26Ze0DQogICAgICAgIGNvbnRlbnQ6ICcnIC8vIOe7k+adn+aXtumXtA0KICAgICAgfSwNCiAgICAgIC8vIOihqOWNlemqjOivgQ0KICAgICAgcnVsZXM6IHsNCiAgICAgICAgYnJhbmQ6IFsNCiAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+36YCJ5oup54m55Y2W5ZOB54mMJywgdHJpZ2dlcjogJ2NoYW5nZScgfQ0KICAgICAgICBdLA0KICAgICAgICBzZXJpZXM6IFsNCiAgICAgICAgICB7IHR5cGU6ICdhcnJheScsIHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+36Iez5bCR6YCJ5oup5LiA5Liq57O75YiXJywgdHJpZ2dlcjogJ2NoYW5nZScgfQ0KICAgICAgICBdDQogICAgICB9DQogICAgfQ0KICB9LA0KICBjb21wdXRlZDogew0KICB9LA0KICBtZXRob2RzOiB7DQogICAgLy8g6L+U5Zue5LiK5LiA6aG16Z2iDQogICAgYmFjayAoKSB7DQogICAgICB0aGlzLiRyb3V0ZXIuZ28oLTEpDQogICAgfSwNCiAgICAvLyDojrflj5blk4HniYwNCiAgICBhc3luYyBnZXRCcmFuZCAoKSB7DQogICAgICBjb25zdCB7IGRhdGE6IHJlcyB9ID0gYXdhaXQgdGhpcy4kaHR0cC5wb3N0KCcvc2FsZS9zaG93QWRkU2FsZUJyYW5kJywgew0KICAgICAgICB0b2tlbjogd2luZG93LnNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ3Rva2VuJykNCiAgICAgIH0pDQogICAgICBjb25zb2xlLmxvZyhyZXMpDQogICAgfSwNCiAgICAvLyDkuovku7blpITnkIblh73mlbANCiAgICBkYXRlQ29udmVyc2lvbiAodmFsdWUpIHsNCiAgICAgIGZ1bmN0aW9uIGNoZWNrVGltZSAoaSkgew0KICAgICAgICBpZiAoaSA8IDEwKSB7DQogICAgICAgICAgaSA9ICcwJyArIGkNCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gaQ0KICAgICAgfQ0KICAgICAgdmFyIGQgPSBuZXcgRGF0ZSh2YWx1ZSkNCiAgICAgIHZhciBkYXRlID0gZC5nZXRGdWxsWWVhcigpICsgJy0nICsgY2hlY2tUaW1lKGQuZ2V0TW9udGgoKSArIDEpICsgJy0nICsgY2hlY2tUaW1lKGQuZ2V0RGF0ZSgpKSArICcgJyArIGNoZWNrVGltZShkLmdldEhvdXJzKCkpICsgJzonICsgY2hlY2tUaW1lKGQuZ2V0TWludXRlcygpKSArICc6JyArIGNoZWNrVGltZShkLmdldFNlY29uZHMoKSkNCiAgICAgIHJldHVybiBkYXRlDQogICAgfSwNCiAgICAvLyDmj5DkuqTnibnljZYNCiAgICBzdWJtaXQgKGZvcm1OYW1lKSB7DQogICAgICB0aGlzLiRyZWZzW2Zvcm1OYW1lXS52YWxpZGF0ZShhc3luYyB2YWxpZCA9PiB7DQogICAgICAgIGlmICghdmFsaWQpIHsNCiAgICAgICAgICByZXR1cm4NCiAgICAgICAgfQ0KICAgICAgICB0aGlzLmZvcm0ucG9zdERhdGVTID0gdGhpcy5kYXRlQ29udmVyc2lvbih0aGlzLnRpbWVbMF0pDQogICAgICAgIHRoaXMuZm9ybS5wb3N0RGF0ZUUgPSB0aGlzLmRhdGVDb252ZXJzaW9uKHRoaXMudGltZVsxXSkNCiAgICAgICAgY29uc3QgeyBkYXRhOiByZXMgfSA9IGF3YWl0IHRoaXMuJGh0dHAucG9zdCgnL3NhbGUvYWRkU2FsZScsIHRoaXMuZm9ybSkNCiAgICAgICAgdGhpcy50YWJsZURhdGEgPSByZXMubA0KICAgICAgICB0aGlzLnRvdGFsID0gcmVzLm51bQ0KICAgICAgfSkNCiAgICB9LA0KICAgIGNoYW5nZSAoY2FsbGJhY2spIHsNCiAgICAgIGlmIChjYWxsYmFjayA9PT0gZmFsc2UpDQogICAgICBjb25zb2xlLmxvZyh0aGlzLmZvcm0uYnJhbmQpDQogICAgfSwNCiAgICAvLyDojrflj5botYTorq/nsbvlnosNCiAgICBnZXRJbmZvcm1hdGlvblR5cGUgKCkgew0KICAgICAgY29uc3QgdHlwZSA9IHRoaXMuJHJvdXRlLnF1ZXJ5LnR5cGUNCiAgICAgIHRoaXMudGl0bGUgPSB0eXBlDQogICAgfQ0KICB9LA0KICBjcmVhdGVkICgpIHsNCiAgICAvLyDojrflj5blk4HniYwNCiAgICB0aGlzLmdldEJyYW5kKCkNCiAgfQ0KfQ0K"},{"version":3,"sources":["Add.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Add.vue","sourceRoot":"src/views/specialSale","sourcesContent":["<template>\r\n  <div>\r\n    <!-- 头部标题 -->\r\n    <div class=\"HeadTitle\">\r\n      <h2>新增特卖</h2>\r\n      <el-button type=\"text\" @click=\"back\">《《 返回</el-button>\r\n    </div>\r\n    <!-- 注意事项 -->\r\n    <div class=\"notice\">注：每次只发布一个品牌特卖系列</div>\r\n    <!-- 新增特卖表单 -->\r\n    <el-form label-position=\"right\" label-width=\"80px\" :model=\"form\" :rules=\"rules\" ref=\"rulesForm\">\r\n      <el-form-item label=\"品牌\" prop=\"brand\">\r\n        <el-select v-model=\"form.brand\" placeholder=\"请选择特卖品牌\" @visible-change=\"change($event)\">\r\n          <el-option v-for=\"item in options\" :key=\"item.value\" :label=\"item.label\" :value=\"item.label\"></el-option>\r\n        </el-select>\r\n      </el-form-item>\r\n      <el-form-item label=\"系列\" prop=\"series\" v-show=\"this.form.brand !== ''\">\r\n        <el-checkbox-group v-model=\"form.series\">\r\n          <el-checkbox v-for=\"item in options\" :key=\"item.label\" :label=\"item.label\"></el-checkbox>\r\n        </el-checkbox-group>\r\n      </el-form-item>\r\n      <el-form-item label=\"特卖时间\">\r\n        <div class=\"block\">\r\n          <el-date-picker v-model=\"time\" type=\"datetimerange\" range-separator=\"至\" start-placeholder=\"开始日期\" end-placeholder=\"结束日期\"></el-date-picker>\r\n        </div>\r\n      </el-form-item>\r\n      <el-form-item label=\"车型照片\">\r\n        <div style=\"color: skyblue\">每个系列一张即可，超出部分只截取符合条件的个数</div>\r\n      </el-form-item>\r\n      <el-form-item>\r\n        <el-button type=\"primary\" @click=\"submit('rulesForm')\">确认发布</el-button>\r\n      </el-form-item>\r\n    </el-form>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data () {\r\n    return {\r\n      // 品牌\r\n      brandAry: [],\r\n      // 特卖时间\r\n      time: [],\r\n      options: [{\r\n        value: '选项1',\r\n        label: '黄金糕'\r\n      }, {\r\n        value: '选项2',\r\n        label: '双皮奶'\r\n      }],\r\n      // 表单数据\r\n      form: {\r\n        brand: '', // 品牌\r\n        series: [], // 系列\r\n        author: '', // 开始时间\r\n        content: '' // 结束时间\r\n      },\r\n      // 表单验证\r\n      rules: {\r\n        brand: [\r\n          { required: true, message: '请选择特卖品牌', trigger: 'change' }\r\n        ],\r\n        series: [\r\n          { type: 'array', required: true, message: '请至少选择一个系列', trigger: 'change' }\r\n        ]\r\n      }\r\n    }\r\n  },\r\n  computed: {\r\n  },\r\n  methods: {\r\n    // 返回上一页面\r\n    back () {\r\n      this.$router.go(-1)\r\n    },\r\n    // 获取品牌\r\n    async getBrand () {\r\n      const { data: res } = await this.$http.post('/sale/showAddSaleBrand', {\r\n        token: window.sessionStorage.getItem('token')\r\n      })\r\n      console.log(res)\r\n    },\r\n    // 事件处理函数\r\n    dateConversion (value) {\r\n      function checkTime (i) {\r\n        if (i < 10) {\r\n          i = '0' + i\r\n        }\r\n        return i\r\n      }\r\n      var d = new Date(value)\r\n      var date = d.getFullYear() + '-' + checkTime(d.getMonth() + 1) + '-' + checkTime(d.getDate()) + ' ' + checkTime(d.getHours()) + ':' + checkTime(d.getMinutes()) + ':' + checkTime(d.getSeconds())\r\n      return date\r\n    },\r\n    // 提交特卖\r\n    submit (formName) {\r\n      this.$refs[formName].validate(async valid => {\r\n        if (!valid) {\r\n          return\r\n        }\r\n        this.form.postDateS = this.dateConversion(this.time[0])\r\n        this.form.postDateE = this.dateConversion(this.time[1])\r\n        const { data: res } = await this.$http.post('/sale/addSale', this.form)\r\n        this.tableData = res.l\r\n        this.total = res.num\r\n      })\r\n    },\r\n    change (callback) {\r\n      if (callback === false)\r\n      console.log(this.form.brand)\r\n    },\r\n    // 获取资讯类型\r\n    getInformationType () {\r\n      const type = this.$route.query.type\r\n      this.title = type\r\n    }\r\n  },\r\n  created () {\r\n    // 获取品牌\r\n    this.getBrand()\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n// 头部标题\r\n.HeadTitle {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  background-color: #f7f8f9;\r\n  padding-left: 30px;\r\n  height: 50px;\r\n  line-height: 50px;\r\n}\r\n// 注意\r\n.notice {\r\n  color: red;\r\n  font-size: 18px;\r\n  height: 60px;\r\n  line-height: 60px;\r\n  padding-left: 20px;\r\n}\r\n// 新增表单\r\n.el-form {\r\n  margin-top: 30px;\r\n  .el-form-item {\r\n    margin-bottom: 20px;\r\n  }\r\n  .el-button {\r\n    margin-top: 20px;\r\n    width: 300px;\r\n  }\r\n}\r\n</style>\r\n"]}]}