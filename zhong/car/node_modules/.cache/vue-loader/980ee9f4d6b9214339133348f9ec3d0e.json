{"remainingRequest":"H:\\jz\\前端\\w\\zhong\\car\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!H:\\jz\\前端\\w\\zhong\\car\\src\\views\\user\\ZhongEdit.vue?vue&type=script&lang=js&","dependencies":[{"path":"H:\\jz\\前端\\w\\zhong\\car\\src\\views\\user\\ZhongEdit.vue","mtime":1595293606233},{"path":"H:\\jz\\前端\\w\\zhong\\car\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"H:\\jz\\前端\\w\\zhong\\car\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"H:\\jz\\前端\\w\\zhong\\car\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"H:\\jz\\前端\\w\\zhong\\car\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgV2FuZyBmcm9tICcuLi8uLi9jb21wb25lbnRzL2VkaXRvci9XYW5nJw0KZXhwb3J0IGRlZmF1bHQgew0KICBjb21wb25lbnRzOiB7DQogICAgV2FuZw0KICB9LA0KICBkYXRhICgpIHsNCiAgICByZXR1cm4gew0KICAgICAgLy8g6LWE6K6v6KeG6aKRSUQNCiAgICAgIHpob25nSWQ6IHRoaXMuJHJvdXRlLnF1ZXJ5LmlkLA0KICAgICAgLy8g57G75Z6LDQogICAgICB0eXBlOiAodGhpcy4kcm91dGUucXVlcnkudHlwZSA9PT0gMSB8fCB0aGlzLiRyb3V0ZS5xdWVyeS50eXBlID09PSAnMScpID8gJ+mHjeeCueWPt+i1hOiurycgOiAn6YeN54K55Y+36KeG6aKRJywNCiAgICAgIC8vIOagh+etvg0KICAgICAgbGFiZWxBcnk6IFsNCiAgICAgICAgeyBsYWJlbDogJ+Wkp+WSluivhOi9picsIGxpbms6ICcvbWVkaWEvYmlnZ3V5JyB9LA0KICAgICAgICB7IGxhYmVsOiAn55So6L2m5a6d5YW4JywgbGluazogJy9tZWRpYS9tYW51YWwnIH0sDQogICAgICAgIHsgbGFiZWw6ICfmioDmnK/op6Por7snLCBsaW5rOiAnL21lZGlhL3RlY2huaWNhbCcgfSwNCiAgICAgICAgeyBsYWJlbDogJ+i9puWxlScsIGxpbms6ICcvbWVkaWEvYXV0b3Nob3cnIH0sDQogICAgICAgIHsgbGFiZWw6ICfnjqnovabooYzlrrYnLCBsaW5rOiAnL21lZGlhL2V4cGVydCcgfSwNCiAgICAgICAgeyBsYWJlbDogJ+ihjOS4muWIhuaekCcsIGxpbms6ICcvbWVkaWEvYW5hbHlzaXMnIH0sDQogICAgICAgIHsgbGFiZWw6ICfoh6rpqb7ml4XooYwnLCBsaW5rOiAnL21lZGlhL3RyYXZlbCcgfSwNCiAgICAgICAgeyBsYWJlbDogJ+eyvumAiScsIGxpbms6ICcvbWVkaWEvc2VsZWN0ZWQnIH0sDQogICAgICAgIHsgbGFiZWw6ICfmlrDog73mupDovaYnLCBsaW5rOiAnL21lZGlhL2VuZXJneScgfSwNCiAgICAgICAgeyBsYWJlbDogJ+eDreeCueiBmueEpicsIGxpbms6ICcvbWVkaWEvZm9jdXNpbmcnIH0sDQogICAgICAgIHsgbGFiZWw6ICfmsb3ovabmlofljJYnLCBsaW5rOiAnL21lZGlhL2N1bHR1cmUnIH0NCiAgICAgIF0sDQogICAgICAvLyDmj5DkuqTlkI7nq6/mlbDmja4NCiAgICAgIGZvcm1BbGlnbjogew0KICAgICAgICB0aXRsZTogJycsDQogICAgICAgIGludHJvOiAnJywNCiAgICAgICAgY292ZXJQaWM6ICcnLA0KICAgICAgICB0ZXh0OiAnJywNCiAgICAgICAgaWQ6ICcnLA0KICAgICAgICBzZXJpZXM6ICcnLA0KICAgICAgICBsYWJlbExpc3Q6IFtdDQogICAgICB9LA0KICAgICAgLy8g57yW6L6R5YmN55qE5YaF5a65DQogICAgICBjb246ICcnDQogICAgfQ0KICB9LA0KICBtZXRob2RzOiB7DQogICAgLy8g6I635Y+W6YeN54K55Y+36K+m5oOFDQogICAgYXN5bmMgZ2V0RGV0YWlscyAoKSB7DQogICAgICBjb25zdCB7IGRhdGE6IHJlcyB9ID0gYXdhaXQgdGhpcy4kaHR0cC5wb3N0KCcva2V5L2dldEtleU4nLCB7DQogICAgICAgIGlkOiB0aGlzLnpob25nSWQNCiAgICAgIH0pDQogICAgICB0aGlzLmNvbiA9IHJlcy5vYmplY3QudGV4dA0KICAgICAgdGhpcy5mb3JtQWxpZ24udGl0bGUgPSByZXMub2JqZWN0LnRpdGxlDQogICAgICB0aGlzLmZvcm1BbGlnbi5pbnRybyA9IHJlcy5vYmplY3QuaW50cm8NCiAgICAgIHRoaXMuZm9ybUFsaWduLmNvdmVyUGljID0gcmVzLm9iamVjdC5jb3ZlclBpYw0KICAgICAgdGhpcy5mb3JtQWxpZ24uc2VyaWVzID0gcmVzLm9iamVjdC5zZXJpZXMNCiAgICAgIHRoaXMuZm9ybUFsaWduLmxhYmVsTGlzdCA9IHJlcy5sYWJlbExpc3QNCiAgICB9LA0KICAgIC8vIOe7hOS7tuS8oOWAvA0KICAgIGdldE1zZyAoZGF0YSkgew0KICAgICAgdGhpcy5mb3JtQWxpZ24udGV4dCA9IGRhdGENCiAgICB9LA0KICAgIC8vIOaPkOS6pOe8lui+keWGheWuuQ0KICAgIGFzeW5jIHN1Ym1pdCAoKSB7DQogICAgICB0aGlzLmZvcm1BbGlnbi5pZCA9IHRoaXMuemhvbmdJZA0KICAgICAgaWYgKHRoaXMuJHJlZnMubmV3X2ltYWdlLmZpbGVzWzBdID09PSB1bmRlZmluZWQpIHsNCiAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy4kaHR0cC5wb3N0KCcva2V5L3VwZGF0ZUtleU4nLCB0aGlzLmZvcm1BbGlnbikNCiAgICAgICAgaWYgKHJlcy5kYXRhICE9PSB0cnVlIHx8IHJlcy5zdGF0dXMgIT09IDIwMCkgcmV0dXJuIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+aPkOS6pOWksei0pScpDQogICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygn5L+u5pS55oiQ5YqfJykNCiAgICAgICAgdGhpcy4kcm91dGVyLmdvKDApDQogICAgICB9IGVsc2Ugew0KICAgICAgICBjb25zdCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpDQogICAgICAgIGZvcm1EYXRhLmFwcGVuZCgnaW1hZ2VfZGF0YScsIHRoaXMuJHJlZnMubmV3X2ltYWdlLmZpbGVzWzBdKQ0KICAgICAgICAvLyDljZXkuKrmlofku7bov5vooYzkuIrkvKANCiAgICAgICAgY29uc3QgcmV3ID0gYXdhaXQgdGhpcy4kaHR0cC5wb3N0KCcvdXBsb2FkL3VwbG9hZDUnLCBmb3JtRGF0YSwgew0KICAgICAgICAgIGhlYWRlcnM6IHsNCiAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnbXVsdGlwYXJ0L2Zvcm0tZGF0YScNCiAgICAgICAgICB9DQogICAgICAgIH0pDQogICAgICAgIHRoaXMuZm9ybUFsaWduLmNvdmVyUGljID0gcmV3LmRhdGENCiAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy4kaHR0cC5wb3N0KCcva2V5L3VwZGF0ZUtleU4nLCB0aGlzLmZvcm1BbGlnbikNCiAgICAgICAgaWYgKHJlcy5kYXRhICE9PSB0cnVlIHx8IHJlcy5zdGF0dXMgIT09IDIwMCkgcmV0dXJuIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+aPkOS6pOWksei0pScpDQogICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygn5L+u5pS55oiQ5YqfJykNCiAgICAgICAgdGhpcy4kcm91dGVyLmdvKDApDQogICAgICB9DQogICAgfQ0KICB9LA0KICBtb3VudGVkICgpIHsNCiAgICAvLyDojrflj5bph43ngrnlj7for6bmg4UNCiAgICB0aGlzLmdldERldGFpbHMoKQ0KICB9DQp9DQo="},{"version":3,"sources":["ZhongEdit.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AA0BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ZhongEdit.vue","sourceRoot":"src/views/user","sourcesContent":["<template>\r\n  <div>\r\n    <h4>标题</h4>\r\n    <el-input v-model=\"formAlign.title\"></el-input>\r\n    <h4>摘要</h4>\r\n    <el-input v-model=\"formAlign.intro\"></el-input>\r\n    <!-- 标签 -->\r\n    <h4>标签</h4>\r\n    <el-checkbox-group\r\n      v-model=\"formAlign.labelList\"\r\n      :min=\"1\"\r\n      :max=\"3\">\r\n      <el-checkbox v-for=\"item in labelAry\" :label=\"item.label\" :key=\"item.label\">{{item.label}}</el-checkbox>\r\n    </el-checkbox-group>\r\n    <h4>封面图</h4>\r\n    <img :src=\"formAlign.coverPic\" alt=\"\" style=\"display: block; margin: 20px 0\">\r\n    <!-- 修改封面图 -->\r\n    <input type=\"file\" id=\"saveImage\" name=\"myphoto\" accept=\"image/png,image/gif,image/jpeg\" ref=\"new_image\">\r\n    <div style=\"font-size: 12px;color: #999;\">尺寸为800x400; 图片格式为png/gif/jpeg, 大小不大于2M (如果不修改封面图，可以省略此项)</div>\r\n    <!-- 富文本编辑器 -->\r\n    <Wang class=\"wang\" :title=\"con\" @func=\"getMsg\" v-if=\"type === '重点号资讯'\"></Wang>\r\n    <el-button @click=\"submit\" type=\"primary\">提交</el-button>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Wang from '../../components/editor/Wang'\r\nexport default {\r\n  components: {\r\n    Wang\r\n  },\r\n  data () {\r\n    return {\r\n      // 资讯视频ID\r\n      zhongId: this.$route.query.id,\r\n      // 类型\r\n      type: (this.$route.query.type === 1 || this.$route.query.type === '1') ? '重点号资讯' : '重点号视频',\r\n      // 标签\r\n      labelAry: [\r\n        { label: '大咖评车', link: '/media/bigguy' },\r\n        { label: '用车宝典', link: '/media/manual' },\r\n        { label: '技术解读', link: '/media/technical' },\r\n        { label: '车展', link: '/media/autoshow' },\r\n        { label: '玩车行家', link: '/media/expert' },\r\n        { label: '行业分析', link: '/media/analysis' },\r\n        { label: '自驾旅行', link: '/media/travel' },\r\n        { label: '精选', link: '/media/selected' },\r\n        { label: '新能源车', link: '/media/energy' },\r\n        { label: '热点聚焦', link: '/media/focusing' },\r\n        { label: '汽车文化', link: '/media/culture' }\r\n      ],\r\n      // 提交后端数据\r\n      formAlign: {\r\n        title: '',\r\n        intro: '',\r\n        coverPic: '',\r\n        text: '',\r\n        id: '',\r\n        series: '',\r\n        labelList: []\r\n      },\r\n      // 编辑前的内容\r\n      con: ''\r\n    }\r\n  },\r\n  methods: {\r\n    // 获取重点号详情\r\n    async getDetails () {\r\n      const { data: res } = await this.$http.post('/key/getKeyN', {\r\n        id: this.zhongId\r\n      })\r\n      this.con = res.object.text\r\n      this.formAlign.title = res.object.title\r\n      this.formAlign.intro = res.object.intro\r\n      this.formAlign.coverPic = res.object.coverPic\r\n      this.formAlign.series = res.object.series\r\n      this.formAlign.labelList = res.labelList\r\n    },\r\n    // 组件传值\r\n    getMsg (data) {\r\n      this.formAlign.text = data\r\n    },\r\n    // 提交编辑内容\r\n    async submit () {\r\n      this.formAlign.id = this.zhongId\r\n      if (this.$refs.new_image.files[0] === undefined) {\r\n        const res = await this.$http.post('/key/updateKeyN', this.formAlign)\r\n        if (res.data !== true || res.status !== 200) return this.$message.error('提交失败')\r\n        this.$message.success('修改成功')\r\n        this.$router.go(0)\r\n      } else {\r\n        const formData = new FormData()\r\n        formData.append('image_data', this.$refs.new_image.files[0])\r\n        // 单个文件进行上传\r\n        const rew = await this.$http.post('/upload/upload5', formData, {\r\n          headers: {\r\n            'Content-Type': 'multipart/form-data'\r\n          }\r\n        })\r\n        this.formAlign.coverPic = rew.data\r\n        const res = await this.$http.post('/key/updateKeyN', this.formAlign)\r\n        if (res.data !== true || res.status !== 200) return this.$message.error('提交失败')\r\n        this.$message.success('修改成功')\r\n        this.$router.go(0)\r\n      }\r\n    }\r\n  },\r\n  mounted () {\r\n    // 获取重点号详情\r\n    this.getDetails()\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\nh4 {\r\n  margin: 5px 0;\r\n}\r\n.el-button {\r\n  width: 100%;\r\n  margin-top: 20px;\r\n}\r\n.wang {\r\n  margin-top: 20px;\r\n}\r\n</style>\r\n"]}]}