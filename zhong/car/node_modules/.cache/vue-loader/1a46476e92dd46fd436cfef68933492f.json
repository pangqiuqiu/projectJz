{"remainingRequest":"H:\\jz\\前端\\w\\zhong\\car\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!H:\\jz\\前端\\w\\zhong\\car\\src\\views\\user\\ZhongEdit.vue?vue&type=style&index=0&id=cff3fe4c&lang=less&scoped=true&","dependencies":[{"path":"H:\\jz\\前端\\w\\zhong\\car\\src\\views\\user\\ZhongEdit.vue","mtime":1595293606233},{"path":"H:\\jz\\前端\\w\\zhong\\car\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"H:\\jz\\前端\\w\\zhong\\car\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"H:\\jz\\前端\\w\\zhong\\car\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"H:\\jz\\前端\\w\\zhong\\car\\node_modules\\less-loader\\dist\\cjs.js","mtime":499162500000},{"path":"H:\\jz\\前端\\w\\zhong\\car\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"H:\\jz\\前端\\w\\zhong\\car\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKDQpoNCB7DQogIG1hcmdpbjogNXB4IDA7DQp9DQouZWwtYnV0dG9uIHsNCiAgd2lkdGg6IDEwMCU7DQogIG1hcmdpbi10b3A6IDIwcHg7DQp9DQoud2FuZyB7DQogIG1hcmdpbi10b3A6IDIwcHg7DQp9DQo="},{"version":3,"sources":["ZhongEdit.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ZhongEdit.vue","sourceRoot":"src/views/user","sourcesContent":["<template>\r\n  <div>\r\n    <h4>标题</h4>\r\n    <el-input v-model=\"formAlign.title\"></el-input>\r\n    <h4>摘要</h4>\r\n    <el-input v-model=\"formAlign.intro\"></el-input>\r\n    <!-- 标签 -->\r\n    <h4>标签</h4>\r\n    <el-checkbox-group\r\n      v-model=\"formAlign.labelList\"\r\n      :min=\"1\"\r\n      :max=\"3\">\r\n      <el-checkbox v-for=\"item in labelAry\" :label=\"item.label\" :key=\"item.label\">{{item.label}}</el-checkbox>\r\n    </el-checkbox-group>\r\n    <h4>封面图</h4>\r\n    <img :src=\"formAlign.coverPic\" alt=\"\" style=\"display: block; margin: 20px 0\">\r\n    <!-- 修改封面图 -->\r\n    <input type=\"file\" id=\"saveImage\" name=\"myphoto\" accept=\"image/png,image/gif,image/jpeg\" ref=\"new_image\">\r\n    <div style=\"font-size: 12px;color: #999;\">尺寸为800x400; 图片格式为png/gif/jpeg, 大小不大于2M (如果不修改封面图，可以省略此项)</div>\r\n    <!-- 富文本编辑器 -->\r\n    <Wang class=\"wang\" :title=\"con\" @func=\"getMsg\" v-if=\"type === '重点号资讯'\"></Wang>\r\n    <el-button @click=\"submit\" type=\"primary\">提交</el-button>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Wang from '../../components/editor/Wang'\r\nexport default {\r\n  components: {\r\n    Wang\r\n  },\r\n  data () {\r\n    return {\r\n      // 资讯视频ID\r\n      zhongId: this.$route.query.id,\r\n      // 类型\r\n      type: (this.$route.query.type === 1 || this.$route.query.type === '1') ? '重点号资讯' : '重点号视频',\r\n      // 标签\r\n      labelAry: [\r\n        { label: '大咖评车', link: '/media/bigguy' },\r\n        { label: '用车宝典', link: '/media/manual' },\r\n        { label: '技术解读', link: '/media/technical' },\r\n        { label: '车展', link: '/media/autoshow' },\r\n        { label: '玩车行家', link: '/media/expert' },\r\n        { label: '行业分析', link: '/media/analysis' },\r\n        { label: '自驾旅行', link: '/media/travel' },\r\n        { label: '精选', link: '/media/selected' },\r\n        { label: '新能源车', link: '/media/energy' },\r\n        { label: '热点聚焦', link: '/media/focusing' },\r\n        { label: '汽车文化', link: '/media/culture' }\r\n      ],\r\n      // 提交后端数据\r\n      formAlign: {\r\n        title: '',\r\n        intro: '',\r\n        coverPic: '',\r\n        text: '',\r\n        id: '',\r\n        series: '',\r\n        labelList: []\r\n      },\r\n      // 编辑前的内容\r\n      con: ''\r\n    }\r\n  },\r\n  methods: {\r\n    // 获取重点号详情\r\n    async getDetails () {\r\n      const { data: res } = await this.$http.post('/key/getKeyN', {\r\n        id: this.zhongId\r\n      })\r\n      this.con = res.object.text\r\n      this.formAlign.title = res.object.title\r\n      this.formAlign.intro = res.object.intro\r\n      this.formAlign.coverPic = res.object.coverPic\r\n      this.formAlign.series = res.object.series\r\n      this.formAlign.labelList = res.labelList\r\n    },\r\n    // 组件传值\r\n    getMsg (data) {\r\n      this.formAlign.text = data\r\n    },\r\n    // 提交编辑内容\r\n    async submit () {\r\n      this.formAlign.id = this.zhongId\r\n      if (this.$refs.new_image.files[0] === undefined) {\r\n        const res = await this.$http.post('/key/updateKeyN', this.formAlign)\r\n        if (res.data !== true || res.status !== 200) return this.$message.error('提交失败')\r\n        this.$message.success('修改成功')\r\n        this.$router.go(0)\r\n      } else {\r\n        const formData = new FormData()\r\n        formData.append('image_data', this.$refs.new_image.files[0])\r\n        // 单个文件进行上传\r\n        const rew = await this.$http.post('/upload/upload5', formData, {\r\n          headers: {\r\n            'Content-Type': 'multipart/form-data'\r\n          }\r\n        })\r\n        this.formAlign.coverPic = rew.data\r\n        const res = await this.$http.post('/key/updateKeyN', this.formAlign)\r\n        if (res.data !== true || res.status !== 200) return this.$message.error('提交失败')\r\n        this.$message.success('修改成功')\r\n        this.$router.go(0)\r\n      }\r\n    }\r\n  },\r\n  mounted () {\r\n    // 获取重点号详情\r\n    this.getDetails()\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\nh4 {\r\n  margin: 5px 0;\r\n}\r\n.el-button {\r\n  width: 100%;\r\n  margin-top: 20px;\r\n}\r\n.wang {\r\n  margin-top: 20px;\r\n}\r\n</style>\r\n"]}]}