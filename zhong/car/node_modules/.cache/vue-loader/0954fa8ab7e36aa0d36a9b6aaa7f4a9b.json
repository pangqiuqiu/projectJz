{"remainingRequest":"H:\\jz\\前端\\w\\zhong\\car\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!H:\\jz\\前端\\w\\zhong\\car\\src\\views\\user\\Follow.vue?vue&type=style&index=0&id=a657402a&lang=less&scoped=true&","dependencies":[{"path":"H:\\jz\\前端\\w\\zhong\\car\\src\\views\\user\\Follow.vue","mtime":1589178845914},{"path":"H:\\jz\\前端\\w\\zhong\\car\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"H:\\jz\\前端\\w\\zhong\\car\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"H:\\jz\\前端\\w\\zhong\\car\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"H:\\jz\\前端\\w\\zhong\\car\\node_modules\\less-loader\\dist\\cjs.js","mtime":499162500000},{"path":"H:\\jz\\前端\\w\\zhong\\car\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"H:\\jz\\前端\\w\\zhong\\car\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKDQpoMyB7DQogIG1hcmdpbi1ib3R0b206IDEwcHg7DQp9DQoNCi5mb2xsb3cgew0KICBkaXNwbGF5OiBmbGV4Ow0KICBqdXN0aWZ5LWNvbnRlbnQ6IGZsZXgtc3RhcnQ7DQogIGZsZXgtd3JhcDogd3JhcDsNCiAgbGkgew0KICAgIHdpZHRoOiAxNTBweDsNCiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7DQogICAgZGl2IHsNCiAgICAgIG1hcmdpbjogNXB4IDA7DQogICAgfQ0KICAgIGltZyB7DQogICAgICB3aWR0aDogNjBweDsNCiAgICAgIGhlaWdodDogNjBweDsNCiAgICAgIGJvcmRlci1yYWRpdXM6IDUwJTsNCiAgICAgIGN1cnNvcjogcG9pbnRlcjsNCiAgICB9DQogICAgbWFyZ2luLWJvdHRvbTogMTVweDsNCiAgfQ0KfQ0KDQovLyDliIbpobUNCi5lbC1wYWdpbmF0aW9uIHsNCiAgbWFyZ2luLXRvcDogMjBweDsNCiAgdGV4dC1hbGlnbjogY2VudGVyOw0KfQ0K"},{"version":3,"sources":["Follow.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkIA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"Follow.vue","sourceRoot":"src/views/user","sourcesContent":["<template>\r\n  <div>\r\n    <h3>我的关注</h3>\r\n    <el-divider></el-divider>\r\n    <el-button style=\"margin-bottom: 20px\" size=\"mini\" @click=\"changeFollow\">我的关注</el-button>\r\n    <el-button size=\"mini\" @click=\"changeFans\">我的粉丝</el-button>\r\n    <!-- 关注列表 -->\r\n    <div v-show=\"this.flag\">\r\n      <h2 v-show=\"this.total_follow === 0\">暂时还没有关注的人哦！</h2>\r\n      <ul class=\"follow\">\r\n        <li v-for=\"item in followList\" :key=\"item.id\">\r\n          <img :src=\"item.key.headPic\" alt=\"\" @click=\"userMain(item.key.id)\">\r\n          <div>{{item.key.name}}</div>\r\n          <el-button size=\"mini\" type=\"danger\" @click=\"deleted(item.key.id)\">取消关注</el-button>\r\n        </li>\r\n      </ul>\r\n      <!-- 分页 -->\r\n      <el-pagination\r\n        background\r\n        @current-change=\"changePageFollow\"\r\n        :current-page=\"this.form_follow.pageNo\"\r\n        :page-size=\"this.form_follow.pageSize\"\r\n        hide-on-single-page\r\n        layout=\"prev, pager, next\"\r\n        :total=\"total_follow\">\r\n      </el-pagination>\r\n    </div>\r\n    <!-- 粉丝列表 -->\r\n    <div v-show=\"!this.flag\">\r\n      <h2 v-show=\"this.total_fans === 0\">暂时还没有人关注你哦！</h2>\r\n      <ul class=\"fans follow\">\r\n        <li v-for=\"item in fansList\" :key=\"item.id\">\r\n          <img :src=\"item.user.headPic\" alt=\"\">\r\n          <div>{{item.user.name}}</div>\r\n        </li>\r\n      </ul>\r\n      <el-pagination\r\n        background\r\n        @current-change=\"changePageFans\"\r\n        :current-page=\"this.form_fans.pageNo\"\r\n        :page-size=\"this.form_fans.pageSize\"\r\n        hide-on-single-page\r\n        layout=\"prev, pager, next\"\r\n        :total=\"total_fans\">\r\n      </el-pagination>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Cookie from 'js-cookie'\r\nexport default {\r\n  data () {\r\n    return {\r\n      // 关注列表\r\n      followList: [],\r\n      total_follow: 0,\r\n      form_follow: {\r\n        pageSize: 18,\r\n        pageNo: 1,\r\n        userId: Cookie.get('ID')\r\n      },\r\n      // 粉丝列表\r\n      fansList: [],\r\n      total_fans: 0,\r\n      form_fans: {\r\n        userId: Cookie.get('ID')\r\n      },\r\n      // 控制关注和粉丝列表\r\n      flag: true\r\n    }\r\n  },\r\n  methods: {\r\n    // 关注列表\r\n    async getFollow () {\r\n      const { data: res } = await this.$http.post('/user/showgz', this.form_follow)\r\n      this.followList = res.l\r\n      this.total_follow = res.num\r\n    },\r\n    // 粉丝列表\r\n    async getFans () {\r\n      const { data: res } = await this.$http.post('/user/showFans', this.form_fans)\r\n      this.fansList = res.l\r\n      this.total_fans = res.num\r\n    },\r\n    // 取消关注\r\n    async deleted (id) {\r\n      const res = await this.$http.post('/key/gz', {\r\n        userId: Cookie.get('ID'),\r\n        keyId: id\r\n      })\r\n      if (res.data !== true || res.status !== 200) return this.$message.error('操作失败')\r\n      this.$message.success('操作成功')\r\n      this.getFollow()\r\n    },\r\n    // 点击头像跳转个人主页\r\n    userMain (id) {\r\n      const { href } = this.$router.resolve({\r\n        path: '/media/user',\r\n        query: { id: id }\r\n      })\r\n      window.open(href, '_blank')\r\n    },\r\n    // 切换展示的列表\r\n    changeFollow () {\r\n      this.flag = true\r\n    },\r\n    changeFans () {\r\n      this.flag = false\r\n    },\r\n    // 改变页面\r\n    changePageFollow (index) {\r\n      this.form_follow.pageNo = index\r\n      this.getFollow()\r\n    },\r\n    changePageFans (index) {\r\n      this.form_fans.pageNo = index\r\n      this.getFans()\r\n    }\r\n  },\r\n  created () {\r\n    // 获取关注列表\r\n    this.getFollow()\r\n    // 获取粉丝列表\r\n    this.getFans()\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\nh3 {\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.follow {\r\n  display: flex;\r\n  justify-content: flex-start;\r\n  flex-wrap: wrap;\r\n  li {\r\n    width: 150px;\r\n    text-align: center;\r\n    div {\r\n      margin: 5px 0;\r\n    }\r\n    img {\r\n      width: 60px;\r\n      height: 60px;\r\n      border-radius: 50%;\r\n      cursor: pointer;\r\n    }\r\n    margin-bottom: 15px;\r\n  }\r\n}\r\n\r\n// 分页\r\n.el-pagination {\r\n  margin-top: 20px;\r\n  text-align: center;\r\n}\r\n</style>\r\n"]}]}